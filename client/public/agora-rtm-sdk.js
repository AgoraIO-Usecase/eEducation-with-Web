/*! @preserve
 * AgoraRTM Web SDK 0.9.0-beta.0 - commit: v0.9.0-alpha.1-66-g66fd615
 * Copyright (C) 2018-2019 Agora Lab.
 * This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
 * A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).AgoraRTM={})}(this,function(exports){"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var _global=createCommonjsModule(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),_core=createCommonjsModule(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),_core_1=_core.version,_isObject=function(e){return"object"==typeof e?null!==e:"function"==typeof e},_anObject=function(e){if(!_isObject(e))throw TypeError(e+" is not an object!");return e},_fails=function(e){try{return!!e()}catch(e){return!0}},_descriptors=!_fails(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),document$1=_global.document,is=_isObject(document$1)&&_isObject(document$1.createElement),_domCreate=function(e){return is?document$1.createElement(e):{}},_ie8DomDefine=!_descriptors&&!_fails(function(){return 7!=Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a}),_toPrimitive=function(e,t){if(!_isObject(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!_isObject(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!_isObject(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!_isObject(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},dP=Object.defineProperty,f=_descriptors?Object.defineProperty:function(e,t,r){if(_anObject(e),t=_toPrimitive(t,!0),_anObject(r),_ie8DomDefine)try{return dP(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e},_objectDp={f:f},_propertyDesc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_hide=_descriptors?function(e,t,r){return _objectDp.f(e,t,_propertyDesc(1,r))}:function(e,t,r){return e[t]=r,e},hasOwnProperty={}.hasOwnProperty,_has=function(e,t){return hasOwnProperty.call(e,t)},id=0,px=Math.random(),_uid=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++id+px).toString(36))},_library=!1,_shared=createCommonjsModule(function(e){var t=_global["__core-js_shared__"]||(_global["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:_core.version,mode:"global",copyright:"漏 2019 Denis Pushkarev (zloirock.ru)"})}),_functionToString=_shared("native-function-to-string",Function.toString),_redefine=createCommonjsModule(function(e){var t=_uid("src"),r=(""+_functionToString).split("toString");_core.inspectSource=function(e){return _functionToString.call(e)},(e.exports=function(e,n,o,i){var s="function"==typeof o;s&&(_has(o,"name")||_hide(o,"name",n)),e[n]!==o&&(s&&(_has(o,t)||_hide(o,t,e[n]?""+e[n]:r.join(String(n)))),e===_global?e[n]=o:i?e[n]?e[n]=o:_hide(e,n,o):(delete e[n],_hide(e,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||_functionToString.call(this)})}),_aFunction=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},_ctx=function(e,t,r){if(_aFunction(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},PROTOTYPE="prototype",$export=function(e,t,r){var n,o,i,s,a=e&$export.F,u=e&$export.G,c=e&$export.S,l=e&$export.P,f=e&$export.B,p=u?_global:c?_global[t]||(_global[t]={}):(_global[t]||{})[PROTOTYPE],h=u?_core:_core[t]||(_core[t]={}),_=h[PROTOTYPE]||(h[PROTOTYPE]={});for(n in u&&(r=t),r)i=((o=!a&&p&&void 0!==p[n])?p:r)[n],s=f&&o?_ctx(i,_global):l&&"function"==typeof i?_ctx(Function.call,i):i,p&&_redefine(p,n,i,e&$export.U),h[n]!=i&&_hide(h,n,s),l&&_[n]!=i&&(_[n]=i)};_global.core=_core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var _export=$export,ceil=Math.ceil,floor=Math.floor,_toInteger=function(e){return isNaN(e=+e)?0:(e>0?floor:ceil)(e)},min=Math.min,_toLength=function(e){return e>0?min(_toInteger(e),9007199254740991):0},toString={}.toString,_cof=function(e){return toString.call(e).slice(8,-1)},_wks=createCommonjsModule(function(e){var t=_shared("wks"),r=_global.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:_uid)("Symbol."+e))}).store=t}),MATCH=_wks("match"),_isRegexp=function(e){var t;return _isObject(e)&&(void 0!==(t=e[MATCH])?!!t:"RegExp"==_cof(e))},_defined=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},_stringContext=function(e,t,r){if(_isRegexp(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(_defined(e))},MATCH$1=_wks("match"),_failsIsRegexp=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[MATCH$1]=!1,!"/./"[e](t)}catch(e){}}return!0},STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];_export(_export.P+_export.F*_failsIsRegexp(STARTS_WITH),"String",{startsWith:function(e){var t=_stringContext(this,e,STARTS_WITH),r=_toLength(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return $startsWith?$startsWith.call(t,n,r):t.slice(r,r+n.length)===n}});var _flags=function(){var e=_anObject(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};_descriptors&&"g"!=/./g.flags&&_objectDp.f(RegExp.prototype,"flags",{configurable:!0,get:_flags});var TO_STRING="toString",$toString=/./[TO_STRING],define=function(e){_redefine(RegExp.prototype,TO_STRING,e,!0)};_fails(function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})})?define(function(){var e=_anObject(this);return"/".concat(e.source,"/","flags"in e?e.flags:!_descriptors&&e instanceof RegExp?_flags.call(e):void 0)}):$toString.name!=TO_STRING&&define(function(){return $toString.call(this)});var DateProto=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING$1="toString",$toString$1=DateProto[TO_STRING$1],getTime=DateProto.getTime;new Date(NaN)+""!=INVALID_DATE&&_redefine(DateProto,TO_STRING$1,function(){var e=getTime.call(this);return e==e?$toString$1.call(this):INVALID_DATE});var TAG=_wks("toStringTag"),ARG="Arguments"==_cof(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},_classof=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=Object(e),TAG))?r:ARG?_cof(t):"Object"==(n=_cof(t))&&"function"==typeof t.callee?"Arguments":n},test={};test[_wks("toStringTag")]="z",test+""!="[object z]"&&_redefine(Object.prototype,"toString",function(){return"[object "+_classof(this)+"]"},!0);var UNSCOPABLES=_wks("unscopables"),ArrayProto=Array.prototype;null==ArrayProto[UNSCOPABLES]&&_hide(ArrayProto,UNSCOPABLES,{});var _addToUnscopables=function(e){ArrayProto[UNSCOPABLES][e]=!0},_iterStep=function(e,t){return{value:t,done:!!e}},_iterators={},_iobject=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==_cof(e)?e.split(""):Object(e)},_toIobject=function(e){return _iobject(_defined(e))},max=Math.max,min$1=Math.min,_toAbsoluteIndex=function(e,t){return(e=_toInteger(e))<0?max(e+t,0):min$1(e,t)},_arrayIncludes=function(e){return function(t,r,n){var o,i=_toIobject(t),s=_toLength(i.length),a=_toAbsoluteIndex(n,s);if(e&&r!=r){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((e||a in i)&&i[a]===r)return e||a||0;return!e&&-1}},shared=_shared("keys"),_sharedKey=function(e){return shared[e]||(shared[e]=_uid(e))},arrayIndexOf=_arrayIncludes(!1),IE_PROTO=_sharedKey("IE_PROTO"),_objectKeysInternal=function(e,t){var r,n=_toIobject(e),o=0,i=[];for(r in n)r!=IE_PROTO&&_has(n,r)&&i.push(r);for(;t.length>o;)_has(n,r=t[o++])&&(~arrayIndexOf(i,r)||i.push(r));return i},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_objectKeys=Object.keys||function(e){return _objectKeysInternal(e,_enumBugKeys)},_objectDps=_descriptors?Object.defineProperties:function(e,t){_anObject(e);for(var r,n=_objectKeys(t),o=n.length,i=0;o>i;)_objectDp.f(e,r=n[i++],t[r]);return e},document$2=_global.document,_html=document$2&&document$2.documentElement,IE_PROTO$1=_sharedKey("IE_PROTO"),Empty=function(){},PROTOTYPE$1="prototype",createDict=function(){var e,t=_domCreate("iframe"),r=_enumBugKeys.length;for(t.style.display="none",_html.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),createDict=e.F;r--;)delete createDict[PROTOTYPE$1][_enumBugKeys[r]];return createDict()},_objectCreate=Object.create||function(e,t){var r;return null!==e?(Empty[PROTOTYPE$1]=_anObject(e),r=new Empty,Empty[PROTOTYPE$1]=null,r[IE_PROTO$1]=e):r=createDict(),void 0===t?r:_objectDps(r,t)},def=_objectDp.f,TAG$1=_wks("toStringTag"),_setToStringTag=function(e,t,r){e&&!_has(e=r?e:e.prototype,TAG$1)&&def(e,TAG$1,{configurable:!0,value:t})},IteratorPrototype={};_hide(IteratorPrototype,_wks("iterator"),function(){return this});var _iterCreate=function(e,t,r){e.prototype=_objectCreate(IteratorPrototype,{next:_propertyDesc(1,r)}),_setToStringTag(e,t+" Iterator")},_toObject=function(e){return Object(_defined(e))},IE_PROTO$2=_sharedKey("IE_PROTO"),ObjectProto=Object.prototype,_objectGpo=Object.getPrototypeOf||function(e){return e=_toObject(e),_has(e,IE_PROTO$2)?e[IE_PROTO$2]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectProto:null},ITERATOR=_wks("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this},_iterDefine=function(e,t,r,n,o,i,s){_iterCreate(r,t,n);var a,u,c,l=function(e){if(!BUGGY&&e in _)return _[e];switch(e){case KEYS:case VALUES:return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",p=o==VALUES,h=!1,_=e.prototype,d=_[ITERATOR]||_[FF_ITERATOR]||o&&_[o],g=d||l(o),b=o?p?l("entries"):g:void 0,y="Array"==t&&_.entries||d;if(y&&(c=_objectGpo(y.call(new e)))!==Object.prototype&&c.next&&(_setToStringTag(c,f,!0),"function"!=typeof c[ITERATOR]&&_hide(c,ITERATOR,returnThis)),p&&d&&d.name!==VALUES&&(h=!0,g=function(){return d.call(this)}),(BUGGY||h||!_[ITERATOR])&&_hide(_,ITERATOR,g),_iterators[t]=g,_iterators[f]=returnThis,o)if(a={values:p?g:l(VALUES),keys:i?g:l(KEYS),entries:b},s)for(u in a)u in _||_redefine(_,u,a[u]);else _export(_export.P+_export.F*(BUGGY||h),t,a);return a},es6_array_iterator=_iterDefine(Array,"Array",function(e,t){this._t=_toIobject(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,_iterStep(1)):_iterStep(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");_iterators.Arguments=_iterators.Array,_addToUnscopables("keys"),_addToUnscopables("values"),_addToUnscopables("entries");for(var ITERATOR$1=_wks("iterator"),TO_STRING_TAG=_wks("toStringTag"),ArrayValues=_iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=_objectKeys(DOMIterables),i=0;i<collections.length;i++){var NAME=collections[i],explicit=DOMIterables[NAME],Collection=_global[NAME],proto=Collection&&Collection.prototype,key;if(proto&&(proto[ITERATOR$1]||_hide(proto,ITERATOR$1,ArrayValues),proto[TO_STRING_TAG]||_hide(proto,TO_STRING_TAG,NAME),_iterators[NAME]=ArrayValues,explicit))for(key in es6_array_iterator)proto[key]||_redefine(proto,key,es6_array_iterator[key],!0)}var _objectSap=function(e,t){var r=(_core.Object||{})[e]||Object[e],n={};n[e]=t(r),_export(_export.S+_export.F*_fails(function(){r(1)}),"Object",n)};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep(i,n,o,s,a,"throw",e)}s(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}_objectSap("keys",function(){return function(e){return _objectKeys(_toObject(e))}});for(var pad=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},env="object"===("undefined"==typeof window?"undefined":_typeof(window))?window:self,globalCount=Object.keys(env).length,mimeTypesLength=navigator.mimeTypes?navigator.mimeTypes.length:0,clientId=pad((mimeTypesLength+navigator.userAgent.length).toString(36)+globalCount.toString(36),4),fingerprint_browser=function(){return clientId},TYPED=_uid("typed_array"),VIEW=_uid("view"),ABV=!(!_global.ArrayBuffer||!_global.DataView),CONSTR=ABV,i$1=0,l=9,Typed,TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");i$1<l;)(Typed=_global[TypedArrayConstructors[i$1++]])?(_hide(Typed.prototype,TYPED,!0),_hide(Typed.prototype,VIEW,!0)):CONSTR=!1;var _typed={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW},_redefineAll=function(e,t,r){for(var n in t)_redefine(e,n,t[n],r);return e},_anInstance=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},_toIndex=function(e){if(void 0===e)return 0;var t=_toInteger(e),r=_toLength(t);if(t!==r)throw RangeError("Wrong length!");return r},hiddenKeys=_enumBugKeys.concat("length","prototype"),f$1=Object.getOwnPropertyNames||function(e){return _objectKeysInternal(e,hiddenKeys)},_objectGopn={f:f$1},_arrayFill=function(e){for(var t=_toObject(this),r=_toLength(t.length),n=arguments.length,o=_toAbsoluteIndex(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,s=void 0===i?r:_toAbsoluteIndex(i,r);s>o;)t[o++]=e;return t},_typedBuffer=createCommonjsModule(function(e,t){var r=_objectGopn.f,n=_objectDp.f,o="prototype",i="Wrong index!",s=_global.ArrayBuffer,a=_global.DataView,u=_global.Math,c=_global.RangeError,l=_global.Infinity,f=s,p=u.abs,h=u.pow,_=u.floor,d=u.log,g=u.LN2,b=_descriptors?"_b":"buffer",y=_descriptors?"_l":"byteLength",m=_descriptors?"_o":"byteOffset";function v(e,t,r){var n,o,i,s=new Array(r),a=8*r-t-1,u=(1<<a)-1,c=u>>1,f=23===t?h(2,-24)-h(2,-77):0,b=0,y=e<0||0===e&&1/e<0?1:0;for((e=p(e))!=e||e===l?(o=e!=e?1:0,n=u):(n=_(d(e)/g),e*(i=h(2,-n))<1&&(n--,i*=2),(e+=n+c>=1?f/i:f*h(2,1-c))*i>=2&&(n++,i/=2),n+c>=u?(o=0,n=u):n+c>=1?(o=(e*i-1)*h(2,t),n+=c):(o=e*h(2,c-1)*h(2,t),n=0));t>=8;s[b++]=255&o,o/=256,t-=8);for(n=n<<t|o,a+=t;a>0;s[b++]=255&n,n/=256,a-=8);return s[--b]|=128*y,s}function E(e,t,r){var n,o=8*r-t-1,i=(1<<o)-1,s=i>>1,a=o-7,u=r-1,c=e[u--],f=127&c;for(c>>=7;a>0;f=256*f+e[u],u--,a-=8);for(n=f&(1<<-a)-1,f>>=-a,a+=t;a>0;n=256*n+e[u],u--,a-=8);if(0===f)f=1-s;else{if(f===i)return n?NaN:c?-l:l;n+=h(2,t),f-=s}return(c?-1:1)*n*h(2,f-t)}function S(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function w(e){return[255&e]}function O(e){return[255&e,e>>8&255]}function T(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function $(e){return v(e,52,8)}function A(e){return v(e,23,4)}function I(e,t,r){n(e[o],t,{get:function(){return this[r]}})}function R(e,t,r,n){var o=_toIndex(+r);if(o+t>e[y])throw c(i);var s=e[b]._b,a=o+e[m],u=s.slice(a,a+t);return n?u:u.reverse()}function N(e,t,r,n,o,s){var a=_toIndex(+r);if(a+t>e[y])throw c(i);for(var u=e[b]._b,l=a+e[m],f=n(+o),p=0;p<t;p++)u[l+p]=f[s?p:t-p-1]}if(_typed.ABV){if(!_fails(function(){s(1)})||!_fails(function(){new s(-1)})||_fails(function(){return new s,new s(1.5),new s(NaN),"ArrayBuffer"!=s.name})){for(var L,x=(s=function(e){return _anInstance(this,s),new f(_toIndex(e))})[o]=f[o],P=r(f),C=0;P.length>C;)(L=P[C++])in s||_hide(s,L,f[L]);x.constructor=s}var k=new a(new s(2)),M=a[o].setInt8;k.setInt8(0,2147483648),k.setInt8(1,2147483649),!k.getInt8(0)&&k.getInt8(1)||_redefineAll(a[o],{setInt8:function(e,t){M.call(this,e,t<<24>>24)},setUint8:function(e,t){M.call(this,e,t<<24>>24)}},!0)}else s=function(e){_anInstance(this,s,"ArrayBuffer");var t=_toIndex(e);this._b=_arrayFill.call(new Array(t),0),this[y]=t},a=function(e,t,r){_anInstance(this,a,"DataView"),_anInstance(e,s,"DataView");var n=e[y],o=_toInteger(t);if(o<0||o>n)throw c("Wrong offset!");if(o+(r=void 0===r?n-o:_toLength(r))>n)throw c("Wrong length!");this[b]=e,this[m]=o,this[y]=r},_descriptors&&(I(s,"byteLength","_l"),I(a,"buffer","_b"),I(a,"byteLength","_l"),I(a,"byteOffset","_o")),_redefineAll(a[o],{getInt8:function(e){return R(this,1,e)[0]<<24>>24},getUint8:function(e){return R(this,1,e)[0]},getInt16:function(e){var t=R(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=R(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return S(R(this,4,e,arguments[1]))},getUint32:function(e){return S(R(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return E(R(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return E(R(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){N(this,1,e,w,t)},setUint8:function(e,t){N(this,1,e,w,t)},setInt16:function(e,t){N(this,2,e,O,t,arguments[2])},setUint16:function(e,t){N(this,2,e,O,t,arguments[2])},setInt32:function(e,t){N(this,4,e,T,t,arguments[2])},setUint32:function(e,t){N(this,4,e,T,t,arguments[2])},setFloat32:function(e,t){N(this,4,e,A,t,arguments[2])},setFloat64:function(e,t){N(this,8,e,$,t,arguments[2])}});_setToStringTag(s,"ArrayBuffer"),_setToStringTag(a,"DataView"),_hide(a[o],_typed.VIEW,!0),t.ArrayBuffer=s,t.DataView=a}),ITERATOR$2=_wks("iterator"),ArrayProto$1=Array.prototype,_isArrayIter=function(e){return void 0!==e&&(_iterators.Array===e||ArrayProto$1[ITERATOR$2]===e)},ITERATOR$3=_wks("iterator"),core_getIteratorMethod=_core.getIteratorMethod=function(e){if(null!=e)return e[ITERATOR$3]||e["@@iterator"]||_iterators[_classof(e)]},_isArray=Array.isArray||function(e){return"Array"==_cof(e)},SPECIES=_wks("species"),_arraySpeciesConstructor=function(e){var t;return _isArray(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!_isArray(t.prototype)||(t=void 0),_isObject(t)&&null===(t=t[SPECIES])&&(t=void 0)),void 0===t?Array:t},_arraySpeciesCreate=function(e,t){return new(_arraySpeciesConstructor(e))(t)},_arrayMethods=function(e,t){var r=1==e,n=2==e,o=3==e,i=4==e,s=6==e,a=5==e||s,u=t||_arraySpeciesCreate;return function(t,c,l){for(var f,p,h=_toObject(t),_=_iobject(h),d=_ctx(c,l,3),g=_toLength(_.length),b=0,y=r?u(t,g):n?u(t,0):void 0;g>b;b++)if((a||b in _)&&(p=d(f=_[b],b,h),e))if(r)y[b]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:y.push(f)}else if(i)return!1;return s?-1:o||i?i:y}},SPECIES$1=_wks("species"),_speciesConstructor=function(e,t){var r,n=_anObject(e).constructor;return void 0===n||null==(r=_anObject(n)[SPECIES$1])?t:_aFunction(r)},ITERATOR$4=_wks("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR$4]();riter.return=function(){SAFE_CLOSING=!0}}catch(e){}var _iterDetect=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var r=!1;try{var n=[7],o=n[ITERATOR$4]();o.next=function(){return{done:r=!0}},n[ITERATOR$4]=function(){return o},e(n)}catch(e){}return r},SPECIES$2=_wks("species"),_setSpecies=function(e){var t=_global[e];_descriptors&&t&&!t[SPECIES$2]&&_objectDp.f(t,SPECIES$2,{configurable:!0,get:function(){return this}})},_arrayCopyWithin=[].copyWithin||function(e,t){var r=_toObject(this),n=_toLength(r.length),o=_toAbsoluteIndex(e,n),i=_toAbsoluteIndex(t,n),s=arguments.length>2?arguments[2]:void 0,a=Math.min((void 0===s?n:_toAbsoluteIndex(s,n))-i,n-o),u=1;for(i<o&&o<i+a&&(u=-1,i+=a-1,o+=a-1);a-- >0;)i in r?r[o]=r[i]:delete r[o],o+=u,i+=u;return r},f$2={}.propertyIsEnumerable,_objectPie={f:f$2},gOPD=Object.getOwnPropertyDescriptor,f$3=_descriptors?gOPD:function(e,t){if(e=_toIobject(e),t=_toPrimitive(t,!0),_ie8DomDefine)try{return gOPD(e,t)}catch(e){}if(_has(e,t))return _propertyDesc(!_objectPie.f.call(e,t),e[t])},_objectGopd={f:f$3},_typedArray=createCommonjsModule(function(e){if(_descriptors){var t=_library,r=_global,n=_fails,o=_export,i=_typed,s=_typedBuffer,a=_ctx,u=_anInstance,c=_propertyDesc,l=_hide,f=_redefineAll,p=_toInteger,h=_toLength,_=_toIndex,d=_toAbsoluteIndex,g=_toPrimitive,b=_has,y=_classof,m=_isObject,v=_toObject,E=_isArrayIter,S=_objectCreate,w=_objectGpo,O=_objectGopn.f,T=core_getIteratorMethod,$=_uid,A=_wks,I=_arrayMethods,R=_arrayIncludes,N=_speciesConstructor,L=es6_array_iterator,x=_iterators,P=_iterDetect,C=_setSpecies,k=_arrayFill,M=_arrayCopyWithin,j=_objectDp,D=_objectGopd,U=j.f,B=D.f,q=r.RangeError,G=r.TypeError,F=r.Uint8Array,H=Array.prototype,z=s.ArrayBuffer,V=s.DataView,W=I(0),Z=I(2),K=I(3),Y=I(4),J=I(5),X=I(6),Q=R(!0),ee=R(!1),te=L.values,re=L.keys,ne=L.entries,oe=H.lastIndexOf,ie=H.reduce,se=H.reduceRight,ae=H.join,ue=H.sort,ce=H.slice,le=H.toString,fe=H.toLocaleString,pe=A("iterator"),he=A("toStringTag"),_e=$("typed_constructor"),de=$("def_constructor"),ge=i.CONSTR,be=i.TYPED,ye=i.VIEW,me=I(1,function(e,t){return Oe(N(e,e[de]),t)}),ve=n(function(){return 1===new F(new Uint16Array([1]).buffer)[0]}),Ee=!!F&&!!F.prototype.set&&n(function(){new F(1).set({})}),Se=function(e,t){var r=p(e);if(r<0||r%t)throw q("Wrong offset!");return r},we=function(e){if(m(e)&&be in e)return e;throw G(e+" is not a typed array!")},Oe=function(e,t){if(!(m(e)&&_e in e))throw G("It is not a typed array constructor!");return new e(t)},Te=function(e,t){return $e(N(e,e[de]),t)},$e=function(e,t){for(var r=0,n=t.length,o=Oe(e,n);n>r;)o[r]=t[r++];return o},Ae=function(e,t,r){U(e,t,{get:function(){return this._d[r]}})},Ie=function(e){var t,r,n,o,i,s,u=v(e),c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,p=T(u);if(null!=p&&!E(p)){for(s=p.call(u),n=[],t=0;!(i=s.next()).done;t++)n.push(i.value);u=n}for(f&&c>2&&(l=a(l,arguments[2],2)),t=0,r=h(u.length),o=Oe(this,r);r>t;t++)o[t]=f?l(u[t],t):u[t];return o},Re=function(){for(var e=0,t=arguments.length,r=Oe(this,t);t>e;)r[e]=arguments[e++];return r},Ne=!!F&&n(function(){fe.call(new F(1))}),Le=function(){return fe.apply(Ne?ce.call(we(this)):we(this),arguments)},xe={copyWithin:function(e,t){return M.call(we(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Y(we(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return k.apply(we(this),arguments)},filter:function(e){return Te(this,Z(we(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return J(we(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return X(we(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){W(we(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ee(we(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return Q(we(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ae.apply(we(this),arguments)},lastIndexOf:function(e){return oe.apply(we(this),arguments)},map:function(e){return me(we(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ie.apply(we(this),arguments)},reduceRight:function(e){return se.apply(we(this),arguments)},reverse:function(){for(var e,t=we(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return K(we(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(we(this),e)},subarray:function(e,t){var r=we(this),n=r.length,o=d(e,n);return new(N(r,r[de]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,h((void 0===t?n:d(t,n))-o))}},Pe=function(e,t){return Te(this,ce.call(we(this),e,t))},Ce=function(e){we(this);var t=Se(arguments[1],1),r=this.length,n=v(e),o=h(n.length),i=0;if(o+t>r)throw q("Wrong length!");for(;i<o;)this[t+i]=n[i++]},ke={entries:function(){return ne.call(we(this))},keys:function(){return re.call(we(this))},values:function(){return te.call(we(this))}},Me=function(e,t){return m(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},je=function(e,t){return Me(e,t=g(t,!0))?c(2,e[t]):B(e,t)},De=function(e,t,r){return!(Me(e,t=g(t,!0))&&m(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?U(e,t,r):(e[t]=r.value,e)};ge||(D.f=je,j.f=De),o(o.S+o.F*!ge,"Object",{getOwnPropertyDescriptor:je,defineProperty:De}),n(function(){le.call({})})&&(le=fe=function(){return ae.call(this)});var Ue=f({},xe);f(Ue,ke),l(Ue,pe,ke.values),f(Ue,{slice:Pe,set:Ce,constructor:function(){},toString:le,toLocaleString:Le}),Ae(Ue,"buffer","b"),Ae(Ue,"byteOffset","o"),Ae(Ue,"byteLength","l"),Ae(Ue,"length","e"),U(Ue,he,{get:function(){return this[be]}}),e.exports=function(e,s,a,c){var f=e+((c=!!c)?"Clamped":"")+"Array",p="get"+e,d="set"+e,g=r[f],b=g||{},v=g&&w(g),E=!g||!i.ABV,T={},$=g&&g.prototype,A=function(e,t){U(e,t,{get:function(){return function(e,t){var r=e._d;return r.v[p](t*s+r.o,ve)}(this,t)},set:function(e){return function(e,t,r){var n=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),n.v[d](t*s+n.o,r,ve)}(this,t,e)},enumerable:!0})};E?(g=a(function(e,t,r,n){u(e,g,f,"_d");var o,i,a,c,p=0,d=0;if(m(t)){if(!(t instanceof z||"ArrayBuffer"==(c=y(t))||"SharedArrayBuffer"==c))return be in t?$e(g,t):Ie.call(g,t);o=t,d=Se(r,s);var b=t.byteLength;if(void 0===n){if(b%s)throw q("Wrong length!");if((i=b-d)<0)throw q("Wrong length!")}else if((i=h(n)*s)+d>b)throw q("Wrong length!");a=i/s}else a=_(t),o=new z(i=a*s);for(l(e,"_d",{b:o,o:d,l:i,e:a,v:new V(o)});p<a;)A(e,p++)}),$=g.prototype=S(Ue),l($,"constructor",g)):n(function(){g(1)})&&n(function(){new g(-1)})&&P(function(e){new g,new g(null),new g(1.5),new g(e)},!0)||(g=a(function(e,t,r,n){var o;return u(e,g,f),m(t)?t instanceof z||"ArrayBuffer"==(o=y(t))||"SharedArrayBuffer"==o?void 0!==n?new b(t,Se(r,s),n):void 0!==r?new b(t,Se(r,s)):new b(t):be in t?$e(g,t):Ie.call(g,t):new b(_(t))}),W(v!==Function.prototype?O(b).concat(O(v)):O(b),function(e){e in g||l(g,e,b[e])}),g.prototype=$,t||($.constructor=g));var I=$[pe],R=!!I&&("values"==I.name||null==I.name),N=ke.values;l(g,_e,!0),l($,be,f),l($,ye,!0),l($,de,g),(c?new g(1)[he]==f:he in $)||U($,he,{get:function(){return f}}),T[f]=g,o(o.G+o.W+o.F*(g!=b),T),o(o.S,f,{BYTES_PER_ELEMENT:s}),o(o.S+o.F*n(function(){b.of.call(g,1)}),f,{from:Ie,of:Re}),"BYTES_PER_ELEMENT"in $||l($,"BYTES_PER_ELEMENT",s),o(o.P,f,xe),C(f),o(o.P+o.F*Ee,f,{set:Ce}),o(o.P+o.F*!R,f,ke),t||$.toString==le||($.toString=le),o(o.P+o.F*n(function(){new g(1).slice()}),f,{slice:Pe}),o(o.P+o.F*(n(function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()})||!n(function(){$.toLocaleString.call([1,2])})),f,{toLocaleString:Le}),x[f]=R?I:N,t||R||l($,pe,N)}}else e.exports=function(){}}),getRandomValue;_typedArray("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}});var crypto=window.crypto||window.msCrypto;if(crypto){var lim=Math.pow(2,32)-1;getRandomValue=function(){return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0]/lim)}}else getRandomValue=Math.random;var getRandomValue_browser=getRandomValue,c=0,blockSize=4,base=36,discreteValues=Math.pow(base,blockSize);function randomBlock(){return pad((getRandomValue_browser()*discreteValues<<0).toString(base),blockSize)}function safeCounter(){return c=c<discreteValues?c:0,++c-1}function cuid(){return"c"+(new Date).getTime().toString(base)+pad(safeCounter().toString(base),blockSize)+fingerprint_browser()+(randomBlock()+randomBlock())}cuid.slug=function(){var e=(new Date).getTime().toString(36),t=safeCounter().toString(36).slice(-4),r=fingerprint_browser().slice(0,1)+fingerprint_browser().slice(-1),n=randomBlock().slice(-2);return e.slice(-2)+t+r+n},cuid.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},cuid.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},cuid.fingerprint=fingerprint_browser;var cuid_1=cuid,CreateInstanceError,LoginError,LogoutError,JoinChannelError,LeaveChannelError,GetMembersError,CreateChannelError,ChannelMessageError,PeerMessageError;!function(e){e.CREATE_INSTANCE_ERR_REJECTED="CREATE_INSTANCE_ERR_REJECTED"}(CreateInstanceError||(CreateInstanceError={})),function(e){e.LOGIN_ERR_UNKNOWN="LOGIN_ERR_UNKNOWN",e.LOGIN_ERR_REJECTED="LOGIN_ERR_REJECTED",e.LOGIN_ERR_INVALID_ARGUMENT="LOGIN_ERR_INVALID_ARGUMENT",e.LOGIN_ERR_INVALID_APP_ID="LOGIN_ERR_INVALID_APP_ID",e.LOGIN_ERR_INVALID_TOKEN="LOGIN_ERR_INVALID_TOKEN",e.LOGIN_ERR_TOKEN_EXPIRED="LOGIN_ERR_TOKEN_EXPIRED",e.LOGIN_ERR_NOT_AUTHORIZED="LOGIN_ERR_NOT_AUTHORIZED",e.LOGIN_ERR_ALREADY_LOGIN="LOGIN_ERR_ALREADY_LOGIN",e.LOGIN_ERR_TIMEOUT="LOGIN_ERR_TIMEOUT",e.LOGIN_ERR_TOO_OFTEN="LOGIN_ERR_TOO_OFTEN"}(LoginError||(LoginError={})),function(e){e.LOGOUT_ERR_REJECTED="LOGOUT_ERR_REJECTED"}(LogoutError||(LogoutError={})),function(e){e.JOIN_CHANNEL_ERR_FAILURE="JOIN_CHANNEL_ERR_FAILURE",e.JOIN_CHANNEL_ERR_REJECTED="JOIN_CHANNEL_ERR_REJECTED",e.JOIN_CHANNEL_ERR_TIMEOUT="JOIN_CHANNEL_ERR_TIMEOUT"}(JoinChannelError||(JoinChannelError={})),function(e){e.LEAVE_CHANNEL_ERR_REJECTED="LEAVE_CHANNEL_ERR_REJECTED"}(LeaveChannelError||(LeaveChannelError={})),function(e){e.GET_MEMBERS_ERR_FAILURE="GET_MEMBERS_ERR_FAILURE",e.GET_MEMBERS_ERR_REJECTED="GET_MEMBERS_ERR_REJECTED",e.GET_MEMBERS_ERR_TIMEOUT="GET_MEMBERS_ERR_TIMEOUT"}(GetMembersError||(GetMembersError={})),function(e){e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(CreateChannelError||(CreateChannelError={})),function(e){e.CHANNEL_MESSAGE_ERR_FAILURE="CHANNEL_MESSAGE_ERR_FAILURE",e.CHANNEL_MESSAGE_ERR_TIMEOUT="CHANNEL_MESSAGE_ERR_TIMEOUT"}(ChannelMessageError||(ChannelMessageError={})),function(e){e.PEER_MESSAGE_ERR_FAILURE="PEER_MESSAGE_ERR_FAILURE",e.PEER_MESSAGE_ERR_TIMEOUT="PEER_MESSAGE_ERR_TIMEOUT"}(PeerMessageError||(PeerMessageError={}));var _iterCall=function(e,t,r,n){try{return n?t(_anObject(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&_anObject(o.call(e)),t}},_forOf=createCommonjsModule(function(e){var t={},r={},n=e.exports=function(e,n,o,i,s){var a,u,c,l,f=s?function(){return e}:core_getIteratorMethod(e),p=_ctx(o,i,n?2:1),h=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(_isArrayIter(f)){for(a=_toLength(e.length);a>h;h++)if((l=n?p(_anObject(u=e[h])[0],u[1]):p(e[h]))===t||l===r)return l}else for(c=f.call(e);!(u=c.next()).done;)if((l=_iterCall(c,p,u.value,n))===t||l===r)return l};n.BREAK=t,n.RETURN=r}),_invoke=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},process$1=_global.process,setTask=_global.setImmediate,clearTask=_global.clearImmediate,MessageChannel=_global.MessageChannel,Dispatch=_global.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(){var e=+this;if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},listener=function(e){run.call(e.data)};setTask&&clearTask||(setTask=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return queue[++counter]=function(){_invoke("function"==typeof e?e:Function(e),t)},defer(counter),counter},clearTask=function(e){delete queue[e]},"process"==_cof(process$1)?defer=function(e){process$1.nextTick(_ctx(run,e,1))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(_ctx(run,e,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=_ctx(port.postMessage,port,1)):_global.addEventListener&&"function"==typeof postMessage&&!_global.importScripts?(defer=function(e){_global.postMessage(e+"","*")},_global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in _domCreate("script")?function(e){_html.appendChild(_domCreate("script"))[ONREADYSTATECHANGE]=function(){_html.removeChild(this),run.call(e)}}:function(e){setTimeout(_ctx(run,e,1),0)});var _task={set:setTask,clear:clearTask},macrotask=_task.set,Observer=_global.MutationObserver||_global.WebKitMutationObserver,process$2=_global.process,Promise$1=_global.Promise,isNode="process"==_cof(process$2),_microtask=function(){var e,t,r,n=function(){var n,o;for(isNode&&(n=process$2.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(isNode)r=function(){process$2.nextTick(n)};else if(!Observer||_global.navigator&&_global.navigator.standalone)if(Promise$1&&Promise$1.resolve){var o=Promise$1.resolve(void 0);r=function(){o.then(n)}}else r=function(){macrotask.call(_global,n)};else{var i=!0,s=document.createTextNode("");new Observer(n).observe(s,{characterData:!0}),r=function(){s.data=i=!i}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}};function PromiseCapability(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=_aFunction(t),this.reject=_aFunction(r)}var f$4=function(e){return new PromiseCapability(e)},_newPromiseCapability={f:f$4},_perform=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},navigator$1=_global.navigator,_userAgent=navigator$1&&navigator$1.userAgent||"",_promiseResolve=function(e,t){if(_anObject(e),_isObject(t)&&t.constructor===e)return t;var r=_newPromiseCapability.f(e);return(0,r.resolve)(t),r.promise},task=_task.set,microtask=_microtask(),PROMISE="Promise",TypeError$1=_global.TypeError,process$3=_global.process,versions=process$3&&process$3.versions,v8=versions&&versions.v8||"",$Promise=_global[PROMISE],isNode$1="process"==_classof(process$3),empty=function(){},Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,newPromiseCapability=newGenericPromiseCapability=_newPromiseCapability.f,USE_NATIVE=!!function(){try{var e=$Promise.resolve(1),t=(e.constructor={})[_wks("species")]=function(e){e(empty,empty)};return(isNode$1||"function"==typeof PromiseRejectionEvent)&&e.then(empty)instanceof t&&0!==v8.indexOf("6.6")&&-1===_userAgent.indexOf("Chrome/66")}catch(e){}}(),isThenable=function(e){var t;return!(!_isObject(e)||"function"!=typeof(t=e.then))&&t},notify=function(e,t){if(!e._n){e._n=!0;var r=e._c;microtask(function(){for(var n=e._v,o=1==e._s,i=0,s=function(t){var r,i,s,a=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{a?(o||(2==e._h&&onHandleUnhandled(e),e._h=1),!0===a?r=n:(l&&l.enter(),r=a(n),l&&(l.exit(),s=!0)),r===t.promise?c(TypeError$1("Promise-chain cycle")):(i=isThenable(r))?i.call(r,u,c):u(r)):c(n)}catch(e){l&&!s&&l.exit(),c(e)}};r.length>i;)s(r[i++]);e._c=[],e._n=!1,t&&!e._h&&onUnhandled(e)})}},onUnhandled=function(e){task.call(_global,function(){var t,r,n,o=e._v,i=isUnhandled(e);if(i&&(t=_perform(function(){isNode$1?process$3.emit("unhandledRejection",o,e):(r=_global.onunhandledrejection)?r({promise:e,reason:o}):(n=_global.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=isNode$1||isUnhandled(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},isUnhandled=function(e){return 1!==e._h&&0===(e._a||e._c).length},onHandleUnhandled=function(e){task.call(_global,function(){var t;isNode$1?process$3.emit("rejectionHandled",e):(t=_global.onrejectionhandled)&&t({promise:e,reason:e._v})})},$reject=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),notify(t,!0))},$resolve=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw TypeError$1("Promise can't be resolved itself");(t=isThenable(e))?microtask(function(){var n={_w:r,_d:!1};try{t.call(e,_ctx($resolve,n,1),_ctx($reject,n,1))}catch(e){$reject.call(n,e)}}):(r._v=e,r._s=1,notify(r,!1))}catch(e){$reject.call({_w:r,_d:!1},e)}}};USE_NATIVE||($Promise=function(e){_anInstance(this,$Promise,PROMISE,"_h"),_aFunction(e),Internal.call(this);try{e(_ctx($resolve,this,1),_ctx($reject,this,1))}catch(e){$reject.call(this,e)}},Internal=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=_redefineAll($Promise.prototype,{then:function(e,t){var r=newPromiseCapability(_speciesConstructor(this,$Promise));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=isNode$1?process$3.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&notify(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal;this.promise=e,this.resolve=_ctx($resolve,e,1),this.reject=_ctx($reject,e,1)},_newPromiseCapability.f=newPromiseCapability=function(e){return e===$Promise||e===Wrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)}),_export(_export.G+_export.W+_export.F*!USE_NATIVE,{Promise:$Promise}),_setToStringTag($Promise,PROMISE),_setSpecies(PROMISE),Wrapper=_core[PROMISE],_export(_export.S+_export.F*!USE_NATIVE,PROMISE,{reject:function(e){var t=newPromiseCapability(this);return(0,t.reject)(e),t.promise}}),_export(_export.S+_export.F*!USE_NATIVE,PROMISE,{resolve:function(e){return _promiseResolve(this,e)}}),_export(_export.S+_export.F*!(USE_NATIVE&&_iterDetect(function(e){$Promise.all(e).catch(empty)})),PROMISE,{all:function(e){var t=this,r=newPromiseCapability(t),n=r.resolve,o=r.reject,i=_perform(function(){var r=[],i=0,s=1;_forOf(e,!1,function(e){var a=i++,u=!1;r.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,r[a]=e,--s||n(r))},o)}),--s||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=newPromiseCapability(t),n=r.reject,o=_perform(function(){_forOf(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}});var check=function(e,t){if(_anObject(e),!_isObject(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},_setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=_ctx(Function.call,_objectGopd.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return check(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:check};_export(_export.S,"Object",{setPrototypeOf:_setProto.set});var dP$1=_objectDp.f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/,NAME$1="name";NAME$1 in FProto||_descriptors&&dP$1(FProto,NAME$1,{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}});var _strictMethod=function(e,t){return!!e&&_fails(function(){t?e.call(null,function(){},1):e.call(null)})},$forEach=_arrayMethods(0),STRICT=_strictMethod([].forEach,!0);_export(_export.P+_export.F*!STRICT,"Array",{forEach:function(e){return $forEach(this,e,arguments[1])}}),_export(_export.S,"Object",{create:_objectCreate});var f$5=_wks,_wksExt={f:f$5},defineProperty=_objectDp.f,_wksDefine=function(e){var t=_core.Symbol||(_core.Symbol=_global.Symbol||{});"_"==e.charAt(0)||e in t||defineProperty(t,e,{value:_wksExt.f(e)})};_wksDefine("asyncIterator");var _meta=createCommonjsModule(function(e){var t=_uid("meta"),r=_objectDp.f,n=0,o=Object.isExtensible||function(){return!0},i=!_fails(function(){return o(Object.preventExtensions({}))}),s=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},a=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!_isObject(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!_has(e,t)){if(!o(e))return"F";if(!r)return"E";s(e)}return e[t].i},getWeak:function(e,r){if(!_has(e,t)){if(!o(e))return!0;if(!r)return!1;s(e)}return e[t].w},onFreeze:function(e){return i&&a.NEED&&o(e)&&!_has(e,t)&&s(e),e}}}),_meta_1=_meta.KEY,_meta_2=_meta.NEED,_meta_3=_meta.fastKey,_meta_4=_meta.getWeak,_meta_5=_meta.onFreeze,f$6=Object.getOwnPropertySymbols,_objectGops={f:f$6},_enumKeys=function(e){var t=_objectKeys(e),r=_objectGops.f;if(r)for(var n,o=r(e),i=_objectPie.f,s=0;o.length>s;)i.call(e,n=o[s++])&&t.push(n);return t},gOPN=_objectGopn.f,toString$1={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return gOPN(e)}catch(e){return windowNames.slice()}},f$7=function(e){return windowNames&&"[object Window]"==toString$1.call(e)?getWindowNames(e):gOPN(_toIobject(e))},_objectGopnExt={f:f$7},META=_meta.KEY,gOPD$1=_objectGopd.f,dP$2=_objectDp.f,gOPN$1=_objectGopnExt.f,$Symbol=_global.Symbol,$JSON=_global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE$2="prototype",HIDDEN=_wks("_hidden"),TO_PRIMITIVE=_wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=_shared("symbol-registry"),AllSymbols=_shared("symbols"),OPSymbols=_shared("op-symbols"),ObjectProto$1=Object[PROTOTYPE$2],USE_NATIVE$1="function"==typeof $Symbol,QObject=_global.QObject,setter=!QObject||!QObject[PROTOTYPE$2]||!QObject[PROTOTYPE$2].findChild,setSymbolDesc=_descriptors&&_fails(function(){return 7!=_objectCreate(dP$2({},"a",{get:function(){return dP$2(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=gOPD$1(ObjectProto$1,t);n&&delete ObjectProto$1[t],dP$2(e,t,r),n&&e!==ObjectProto$1&&dP$2(ObjectProto$1,t,n)}:dP$2,wrap=function(e){var t=AllSymbols[e]=_objectCreate($Symbol[PROTOTYPE$2]);return t._k=e,t},isSymbol=USE_NATIVE$1&&"symbol"==typeof $Symbol.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof $Symbol},$defineProperty=function(e,t,r){return e===ObjectProto$1&&$defineProperty(OPSymbols,t,r),_anObject(e),t=_toPrimitive(t,!0),_anObject(r),_has(AllSymbols,t)?(r.enumerable?(_has(e,HIDDEN)&&e[HIDDEN][t]&&(e[HIDDEN][t]=!1),r=_objectCreate(r,{enumerable:_propertyDesc(0,!1)})):(_has(e,HIDDEN)||dP$2(e,HIDDEN,_propertyDesc(1,{})),e[HIDDEN][t]=!0),setSymbolDesc(e,t,r)):dP$2(e,t,r)},$defineProperties=function(e,t){_anObject(e);for(var r,n=_enumKeys(t=_toIobject(t)),o=0,i=n.length;i>o;)$defineProperty(e,r=n[o++],t[r]);return e},$create=function(e,t){return void 0===t?_objectCreate(e):$defineProperties(_objectCreate(e),t)},$propertyIsEnumerable=function(e){var t=isEnum.call(this,e=_toPrimitive(e,!0));return!(this===ObjectProto$1&&_has(AllSymbols,e)&&!_has(OPSymbols,e))&&(!(t||!_has(this,e)||!_has(AllSymbols,e)||_has(this,HIDDEN)&&this[HIDDEN][e])||t)},$getOwnPropertyDescriptor=function(e,t){if(e=_toIobject(e),t=_toPrimitive(t,!0),e!==ObjectProto$1||!_has(AllSymbols,t)||_has(OPSymbols,t)){var r=gOPD$1(e,t);return!r||!_has(AllSymbols,t)||_has(e,HIDDEN)&&e[HIDDEN][t]||(r.enumerable=!0),r}},$getOwnPropertyNames=function(e){for(var t,r=gOPN$1(_toIobject(e)),n=[],o=0;r.length>o;)_has(AllSymbols,t=r[o++])||t==HIDDEN||t==META||n.push(t);return n},$getOwnPropertySymbols=function(e){for(var t,r=e===ObjectProto$1,n=gOPN$1(r?OPSymbols:_toIobject(e)),o=[],i=0;n.length>i;)!_has(AllSymbols,t=n[i++])||r&&!_has(ObjectProto$1,t)||o.push(AllSymbols[t]);return o};USE_NATIVE$1||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var e=_uid(arguments.length>0?arguments[0]:void 0),t=function(r){this===ObjectProto$1&&t.call(OPSymbols,r),_has(this,HIDDEN)&&_has(this[HIDDEN],e)&&(this[HIDDEN][e]=!1),setSymbolDesc(this,e,_propertyDesc(1,r))};return _descriptors&&setter&&setSymbolDesc(ObjectProto$1,e,{configurable:!0,set:t}),wrap(e)},_redefine($Symbol[PROTOTYPE$2],"toString",function(){return this._k}),_objectGopd.f=$getOwnPropertyDescriptor,_objectDp.f=$defineProperty,_objectGopn.f=_objectGopnExt.f=$getOwnPropertyNames,_objectPie.f=$propertyIsEnumerable,_objectGops.f=$getOwnPropertySymbols,_descriptors&&!_library&&_redefine(ObjectProto$1,"propertyIsEnumerable",$propertyIsEnumerable,!0),_wksExt.f=function(e){return wrap(_wks(e))}),_export(_export.G+_export.W+_export.F*!USE_NATIVE$1,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)_wks(es6Symbols[j++]);for(var wellKnownSymbols=_objectKeys(_wks.store),k=0;wellKnownSymbols.length>k;)_wksDefine(wellKnownSymbols[k++]);_export(_export.S+_export.F*!USE_NATIVE$1,"Symbol",{for:function(e){return _has(SymbolRegistry,e+="")?SymbolRegistry[e]:SymbolRegistry[e]=$Symbol(e)},keyFor:function(e){if(!isSymbol(e))throw TypeError(e+" is not a symbol!");for(var t in SymbolRegistry)if(SymbolRegistry[t]===e)return t},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),_export(_export.S+_export.F*!USE_NATIVE$1,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&_export(_export.S+_export.F*(!USE_NATIVE$1||_fails(function(){var e=$Symbol();return"[null]"!=_stringify([e])||"{}"!=_stringify({a:e})||"{}"!=_stringify(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(_isObject(t)||void 0!==e)&&!isSymbol(e))return _isArray(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!isSymbol(t))return t}),n[1]=t,_stringify.apply($JSON,n)}}),$Symbol[PROTOTYPE$2][TO_PRIMITIVE]||_hide($Symbol[PROTOTYPE$2],TO_PRIMITIVE,$Symbol[PROTOTYPE$2].valueOf),_setToStringTag($Symbol,"Symbol"),_setToStringTag(Math,"Math",!0),_setToStringTag(_global.JSON,"JSON",!0);var runtime_1=createCommonjsModule(function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),s=new A(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return R()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=O(s,r);if(a){if(a===_)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?h:f,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=h,r.method="throw",r.arg=u.arg)}}}(e,r,s),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",p="executing",h="completed",_={};function d(){}function g(){}function b(){}var y={};y[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(I([])));v&&v!==r&&n.call(v,i)&&(y=v);var E=b.prototype=d.prototype=Object.create(y);function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function w(e){var t;this._invoke=function(r,o){function i(){return new Promise(function(t,i){!function t(r,o,i,s){var a=c(e[r],e,o);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"===_typeof(l)&&n.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,s)},function(e){t("throw",e,i,s)}):Promise.resolve(l).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,s)})}s(a.arg)}(r,o,t,i)})}return t=t?t.then(i,i):i()}}function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=c(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=E.constructor=b,b.constructor=g,b[a]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},S(w.prototype),w.prototype[s]=function(){return this},e.AsyncIterator=w,e.async=function(t,r,n,o){var i=new w(u(t,r,n,o));return e.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(E),E[a]="Generator",E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach($),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),$(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;$(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),regenerator=runtime_1,arraySlice=[].slice,factories={},construct=function(e,t,r){if(!(t in factories)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";factories[t]=Function("F,a","return new F("+n.join(",")+")")}return factories[t](e,r)},_bind=Function.bind||function(e){var t=_aFunction(this),r=arraySlice.call(arguments,1),n=function(){var o=r.concat(arraySlice.call(arguments));return this instanceof n?construct(t,o.length,o):_invoke(t,o,e)};return _isObject(t.prototype)&&(n.prototype=t.prototype),n};_export(_export.P,"Function",{bind:_bind}),_export(_export.S+_export.F*!_descriptors,"Object",{defineProperty:_objectDp.f});var $indexOf=_arrayIncludes(!1),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;_export(_export.P+_export.F*(NEGATIVE_ZERO||!_strictMethod($native)),"Array",{indexOf:function(e){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,e,arguments[1])}});var $assign=Object.assign,_objectAssign=!$assign||_fails(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=$assign({},e)[r]||Object.keys($assign({},t)).join("")!=n})?function(e,t){for(var r=_toObject(e),n=arguments.length,o=1,i=_objectGops.f,s=_objectPie.f;n>o;)for(var a,u=_iobject(arguments[o++]),c=i?_objectKeys(u).concat(i(u)):_objectKeys(u),l=c.length,f=0;l>f;)s.call(u,a=c[f++])&&(r[a]=u[a]);return r}:$assign;_export(_export.S+_export.F,"Object",{assign:_objectAssign});var _extendStatics=function(e,t){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}_extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function isFunction(e){return"function"==typeof e}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;_enable_super_gross_mode_that_will_cause_bad_things=e},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(e){setTimeout(function(){throw e})}var empty$1={closed:!0,next:function(e){},error:function(e){if(config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)},complete:function(){}},_arrayReduce=function(e,t,r,n,o){_aFunction(t);var i=_toObject(e),s=_iobject(i),a=_toLength(i.length),u=o?a-1:0,c=o?-1:1;if(r<2)for(;;){if(u in s){n=s[u],u+=c;break}if(u+=c,o?u<0:a<=u)throw TypeError("Reduce of empty array with no initial value")}for(;o?u>=0:a>u;u+=c)u in s&&(n=t(n,s[u],u,i));return n};_export(_export.P+_export.F*!_strictMethod([].reduce,!0),"Array",{reduce:function(e){return _arrayReduce(this,e,arguments.length,arguments[1],!1)}}),_export(_export.S,"Array",{isArray:_isArray});var isArray=Array.isArray||function(e){return e&&"number"==typeof e.length};function isObject(e){return null!==e&&"object"===_typeof(e)}var $map=_arrayMethods(1);function UnsubscriptionErrorImpl(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}_export(_export.P+_export.F*!_strictMethod([].map,!0),"Array",{map:function(e){return $map(this,e,arguments[1])}}),UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype);var UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,n=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=n?n.length:0;r;)r.remove(this),r=++s<a&&n[s]||null;if(isFunction(o))try{o.call(this)}catch(r){t=!0,e=r instanceof UnsubscriptionError?flattenUnsubscriptionErrors(r.errors):[r]}if(isArray(i))for(s=-1,a=i.length;++s<a;){var u=i[s];if(isObject(u))try{u.unsubscribe()}catch(r){t=!0,e=e||[],r instanceof UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(r.errors)):e.push(r)}}if(t)throw new UnsubscriptionError(e)}},e.prototype.add=function(t){var r=t;switch(_typeof(t)){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(r._addParent(this)){var o=this._subscriptions;o?o.push(r):this._subscriptions=[r]}return r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;return t!==e&&(t?r?-1===r.indexOf(e)&&(r.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))},e.EMPTY=((t=new e).closed=!0,t),e}();function flattenUnsubscriptionErrors(e){return e.reduce(function(e,t){return e.concat(t instanceof UnsubscriptionError?t.errors:t)},[])}var rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Subscriber=function(e){function t(r,n,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=empty$1;break;case 1:if(!r){i.destination=empty$1;break}if("object"===_typeof(r)){r instanceof t?(i.syncErrorThrowable=r.syncErrorThrowable,i.destination=r,r.add(i)):(i.syncErrorThrowable=!0,i.destination=new SafeSubscriber(i,r));break}default:i.syncErrorThrowable=!0,i.destination=new SafeSubscriber(i,r,n,o)}return i}return __extends(t,e),t.prototype[rxSubscriber]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(Subscription),SafeSubscriber=function(e){function t(t,r,n,o){var i,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return isFunction(r)?i=r:r&&(i=r.next,n=r.error,o=r.complete,r!==empty$1&&(isFunction((a=Object.create(r)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=i,s._error=n,s._complete=o,s}return __extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Subscriber);function canReportError(e){for(;e;){var t=e,r=t.closed,n=t.destination,o=t.isStopped;if(r||o)return!1;e=n&&n instanceof Subscriber?n:null}return!0}function toSubscriber(e,t,r){if(e){if(e instanceof Subscriber)return e;if(e[rxSubscriber])return e[rxSubscriber]()}return e||t||r?new Subscriber(e,t,r):new Subscriber(empty$1)}var observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function noop(){}function pipe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipeFromArray(e)}function pipeFromArray(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:noop}var Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=toSubscriber(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=getPromiseCtor(t))(function(t,n){var o;o=r.subscribe(function(t){try{e(t)}catch(e){n(e),o&&o.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=getPromiseCtor(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function getPromiseCtor(e){if(e||(e=config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype);var ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return __extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(Subscription),SubjectSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return __extends(t,e),t}(Subscriber),Subject=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return __extends(t,e),t.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},t.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Subscription.EMPTY):this.isStopped?(e.complete(),Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new Observable;return e.source=this,e},t.create=function(e,t){return new AnonymousSubject(e,t)},t}(Observable),AnonymousSubject=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return __extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Subscription.EMPTY},t}(Subject);function refCount(){return function(e){return e.lift(new RefCountOperator(e))}}var RefCountOperator=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new RefCountSubscriber(e,r),o=t.subscribe(n);return n.closed||(n.connection=r.connect()),o},e}(),RefCountSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return __extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(Subscriber),ConnectableObservable=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return __extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Subscription).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),e.closed?(this._connection=null,e=Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return refCount()(this)},t}(Observable),connectableProto=ConnectableObservable.prototype,connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}},ConnectableSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return __extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(SubjectSubscriber),_stringAt=function(e){return function(t,r){var n,o,i=String(_defined(t)),s=_toInteger(r),a=i.length;return s<0||s>=a?e?"":void 0:(n=i.charCodeAt(s))<55296||n>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?e?i.charAt(s):n:e?i.slice(s,s+2):o-56320+(n-55296<<10)+65536}},$at=_stringAt(!0);_iterDefine(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=$at(t,r),this._i+=e.length,{value:e,done:!1})});var _validateCollection=function(e,t){if(!_isObject(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},dP$3=_objectDp.f,fastKey=_meta.fastKey,SIZE=_descriptors?"_s":"size",getEntry=function(e,t){var r,n=fastKey(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},_collectionStrong={getConstructor:function(e,t,r,n){var o=e(function(e,i){_anInstance(e,o,t,"_i"),e._t=t,e._i=_objectCreate(null),e._f=void 0,e._l=void 0,e[SIZE]=0,null!=i&&_forOf(i,r,e[n],e)});return _redefineAll(o.prototype,{clear:function(){for(var e=_validateCollection(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[SIZE]=0},delete:function(e){var r=_validateCollection(this,t),n=getEntry(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[SIZE]--}return!!n},forEach:function(e){_validateCollection(this,t);for(var r,n=_ctx(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!getEntry(_validateCollection(this,t),e)}}),_descriptors&&dP$3(o.prototype,"size",{get:function(){return _validateCollection(this,t)[SIZE]}}),o},def:function(e,t,r){var n,o,i=getEntry(e,t);return i?i.v=r:(e._l=i={i:o=fastKey(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[SIZE]++,"F"!==o&&(e._i[o]=i)),e},getEntry:getEntry,setStrong:function(e,t,r){_iterDefine(e,t,function(e,r){this._t=_validateCollection(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?_iterStep(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,_iterStep(1))},r?"entries":"values",!r,!0),_setSpecies(t)}},setPrototypeOf=_setProto.set,_inheritIfRequired=function(e,t,r){var n,o=t.constructor;return o!==r&&"function"==typeof o&&(n=o.prototype)!==r.prototype&&_isObject(n)&&setPrototypeOf&&setPrototypeOf(e,n),e},_collection=function(e,t,r,n,o,i){var s=_global[e],a=s,u=o?"set":"add",c=a&&a.prototype,l={},f=function(e){var t=c[e];_redefine(c,e,"delete"==e?function(e){return!(i&&!_isObject(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!_isObject(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!_isObject(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof a&&(i||c.forEach&&!_fails(function(){(new a).entries().next()}))){var p=new a,h=p[u](i?{}:-0,1)!=p,_=_fails(function(){p.has(1)}),d=_iterDetect(function(e){new a(e)}),g=!i&&_fails(function(){for(var e=new a,t=5;t--;)e[u](t,t);return!e.has(-0)});d||((a=t(function(t,r){_anInstance(t,a,e);var n=_inheritIfRequired(new s,t,a);return null!=r&&_forOf(r,o,n[u],n),n})).prototype=c,c.constructor=a),(_||g)&&(f("delete"),f("has"),o&&f("get")),(g||h)&&f(u),i&&c.clear&&delete c.clear}else a=n.getConstructor(t,e,o,u),_redefineAll(a.prototype,r),_meta.NEED=!0;return _setToStringTag(a,e),l[e]=a,_export(_export.G+_export.W+_export.F*(a!=s),l),i||n.setStrong(a,e,o),a},MAP="Map",es6_map=_collection(MAP,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=_collectionStrong.getEntry(_validateCollection(this,MAP),e);return t&&t.v},set:function(e,t){return _collectionStrong.def(_validateCollection(this,MAP),0===e?0:e,t)}},_collectionStrong,!0),GroupedObservable=function(e){function t(t,r,n){var o=e.call(this)||this;return o.key=t,o.groupSubject=r,o.refCountSubscription=n,o}return __extends(t,e),t.prototype._subscribe=function(e){var t=new Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new InnerRefCountSubscription(r)),t.add(n.subscribe(e)),t},t}(Observable),InnerRefCountSubscription=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return __extends(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Subscription),BehaviorSubject=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Subject),_stringWs="\t\n\v\f\r 聽釟€釥庘€€鈥佲€傗€冣€勨€呪€嗏€団€堚€夆€娾€仧銆€\u2028\u2029\ufeff",space="["+_stringWs+"]",non="鈥嬄�",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(e,t,r){var n={},o=_fails(function(){return!!_stringWs[e]()||non[e]()!=non}),i=n[e]=o?t(trim):_stringWs[e];r&&(n[r]=i),_export(_export.P+_export.F*o,"String",n)},trim=exporter.trim=function(e,t){return e=String(_defined(e)),1&t&&(e=e.replace(ltrim,"")),2&t&&(e=e.replace(rtrim,"")),e},_stringTrim=exporter,gOPN$2=_objectGopn.f,gOPD$2=_objectGopd.f,dP$4=_objectDp.f,$trim=_stringTrim.trim,NUMBER="Number",$Number=_global[NUMBER],Base=$Number,proto$1=$Number.prototype,BROKEN_COF=_cof(_objectCreate(proto$1))==NUMBER,TRIM="trim"in String.prototype,toNumber=function(e){var t=_toPrimitive(e,!1);if("string"==typeof t&&t.length>2){var r,n,o,i=(t=TRIM?t.trim():$trim(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var s,a=t.slice(2),u=0,c=a.length;u<c;u++)if((s=a.charCodeAt(u))<48||s>o)return NaN;return parseInt(a,n)}}return+t};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof $Number&&(BROKEN_COF?_fails(function(){proto$1.valueOf.call(r)}):_cof(r)!=NUMBER)?_inheritIfRequired(new Base(toNumber(t)),r,$Number):toNumber(t)};for(var keys=_descriptors?gOPN$2(Base):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j$1=0,key$1;keys.length>j$1;j$1++)_has(Base,key$1=keys[j$1])&&!_has($Number,key$1)&&dP$4($Number,key$1,gOPD$2(Base,key$1));$Number.prototype=proto$1,proto$1.constructor=$Number,_redefine(_global,NUMBER,$Number)}var Action=function(e){function t(t,r){return e.call(this)||this}return __extends(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Subscription),AsyncAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return __extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(Action),QueueAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(AsyncAction);_export(_export.S,"Date",{now:function(){return(new Date).getTime()}});var Scheduler=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}(),AsyncScheduler=function(e){function t(r,n){void 0===n&&(n=Scheduler.now);var o=e.call(this,r,function(){return t.delegate&&t.delegate!==o?t.delegate.now():n()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return __extends(t,e),t.prototype.schedule=function(r,n,o){return void 0===n&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,o):e.prototype.schedule.call(this,r,n,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(Scheduler),QueueScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(AsyncScheduler),queue$1=new QueueScheduler(QueueAction),EMPTY=new Observable(function(e){return e.complete()});function empty$2(e){return e?emptyScheduled(e):EMPTY}function emptyScheduled(e){return new Observable(function(t){return e.schedule(function(){return t.complete()})})}function isScheduler(e){return e&&"function"==typeof e.schedule}var subscribeToArray=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.closed||t.complete()}};function fromArray(e,t){return new Observable(t?function(r){var n=new Subscription,o=0;return n.add(t.schedule(function(){o!==e.length?(r.next(e[o++]),r.closed||n.add(this.schedule())):r.complete()})),n}:subscribeToArray(e))}function scalar(e){var t=new Observable(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];switch(isScheduler(r)?e.pop():r=void 0,e.length){case 0:return empty$2(r);case 1:return r?fromArray(e,r):scalar(e[0]);default:return fromArray(e,r)}}function throwError(e,t){return new Observable(t?function(r){return t.schedule(dispatch,0,{error:e,subscriber:r})}:function(t){return t.error(e)})}function dispatch(e){var t=e.error;e.subscriber.error(t)}var Notification=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty$2()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),ObserveOnSubscriber=function(e){function t(t,r,n){void 0===n&&(n=0);var o=e.call(this,t)||this;return o.scheduler=r,o.delay=n,o}return __extends(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ObserveOnMessage(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},t}(Subscriber),ObserveOnMessage=function(){return function(e,t){this.notification=e,this.destination=t}}(),ReplaySubject=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var o=e.call(this)||this;return o.scheduler=n,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=t<1?1:t,o._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return __extends(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new ReplayEvent(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=n.length;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?t=Subscription.EMPTY:(this.observers.push(e),t=new SubjectSubscription(this,e)),o&&e.add(e=new ObserveOnSubscriber(e,o)),r)for(var s=0;s<i&&!e.closed;s++)e.next(n[s]);else for(s=0;s<i&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||queue$1).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,o=n.length,i=0;i<o&&!(e-n[i].time<r);)i++;return o>t&&(i=Math.max(i,o-t)),i>0&&n.splice(0,i),n},t}(Subject),ReplayEvent=function(){return function(e,t){this.time=e,this.value=t}}(),AsyncSubject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return __extends(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(Subject),nextHandle=1,tasksByHandle={};function runIfPresent(e){var t=tasksByHandle[e];t&&t()}var Immediate={setImmediate:function(e){var t=nextHandle++;return tasksByHandle[t]=e,Promise.resolve().then(function(){return runIfPresent(t)}),t},clearImmediate:function(e){delete tasksByHandle[e]}},AsapAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(Immediate.clearImmediate(r),t.scheduled=void 0)},t}(AsyncAction),AsapScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,o=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<o&&(e=r.shift()));if(this.active=!1,t){for(;++n<o&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),asap=new AsapScheduler(AsapAction),async=new AsyncScheduler(AsyncAction),AnimationFrameAction=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return __extends(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(cancelAnimationFrame(r),t.scheduled=void 0)},t}(AsyncAction),AnimationFrameScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,o=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<o&&(e=r.shift()));if(this.active=!1,t){for(;++n<o&&(e=r.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),animationFrame=new AnimationFrameScheduler(AnimationFrameAction),$sort=[].sort,test$1=[1,2,3];_export(_export.P+_export.F*(_fails(function(){test$1.sort(void 0)})||!_fails(function(){test$1.sort(null)})||!_strictMethod($sort)),"Array",{sort:function(e){return void 0===e?$sort.call(_toObject(this)):$sort.call(_toObject(this),_aFunction(e))}});var VirtualTimeScheduler=function(e){function t(t,r){void 0===t&&(t=VirtualAction),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this,t,function(){return n.frame})||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return __extends(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(AsyncScheduler),VirtualAction=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var o=e.call(this,t,r)||this;return o.scheduler=t,o.work=r,o.index=n,o.active=!0,o.index=t.index=n,o}return __extends(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var o=new t(this.scheduler,this.work);return this.add(o),o.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(AsyncAction);function identity(e){return e}function isObservable(e){return!!e&&(e instanceof Observable||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype);var ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}EmptyErrorImpl.prototype=Object.create(Error.prototype);var EmptyError=EmptyErrorImpl;function TimeoutErrorImpl(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}TimeoutErrorImpl.prototype=Object.create(Error.prototype);var TimeoutError=TimeoutErrorImpl;function map(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new MapOperator(e,t))}}var MapOperator=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new MapSubscriber(e,this.project,this.thisArg))},e}(),MapSubscriber=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return __extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber);function bindCallback(e,t,r){if(t){if(!isScheduler(t))return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return bindCallback(e,r).apply(void 0,n).pipe(map(function(e){return isArray(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o,i=this,s={context:i,subject:o,callbackFunc:e,scheduler:r};return new Observable(function(n){if(r){var a={args:t,subscriber:n,params:s};return r.schedule(dispatch$1,0,a)}if(!o){o=new AsyncSubject;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(e){canReportError(o)?o.error(e):console.warn(e)}}return o.subscribe(n)})}}function dispatch$1(e){var t=this,r=e.args,n=e.subscriber,o=e.params,i=o.callbackFunc,s=o.context,a=o.scheduler,u=o.subject;if(!u){u=o.subject=new AsyncSubject;try{i.apply(s,r.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length<=1?e[0]:e;t.add(a.schedule(dispatchNext,0,{value:n,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(n))}function dispatchNext(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function bindNodeCallback(e,t,r){if(t){if(!isScheduler(t))return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return bindNodeCallback(e,r).apply(void 0,n).pipe(map(function(e){return isArray(e)?t.apply(void 0,e):t(e)}))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new Observable(function(n){var i=o.context,s=o.subject;if(r)return r.schedule(dispatch$2,0,{params:o,subscriber:n,context:i});if(!s){s=o.subject=new AsyncSubject;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?s.error(r):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){canReportError(s)?s.error(e):console.warn(e)}}return s.subscribe(n)})}}function dispatch$2(e){var t=this,r=e.params,n=e.subscriber,o=e.context,i=r.callbackFunc,s=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new AsyncSubject;try{i.apply(o,s.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.shift();if(n)t.add(a.schedule(dispatchError,0,{err:n,subject:u}));else{var o=e.length<=1?e[0]:e;t.add(a.schedule(dispatchNext$1,0,{value:o,subject:u}))}}]))}catch(e){this.add(a.schedule(dispatchError,0,{err:e,subject:u}))}}this.add(u.subscribe(n))}function dispatchNext$1(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function dispatchError(e){var t=e.err;e.subject.error(t)}var OuterSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Subscriber),InnerSubscriber=function(e){function t(t,r,n){var o=e.call(this)||this;return o.parent=t,o.outerValue=r,o.outerIndex=n,o.index=0,o}return __extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Subscriber),subscribeToPromise=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,hostReportError),t}};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var iterator=getSymbolIterator(),subscribeToIterable=function(e){return function(t){for(var r=e[iterator]();;){var n=r.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add(function(){r.return&&r.return()}),t}},subscribeToObservable=function(e){return function(t){var r=e[observable]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}},isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function isPromise(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var subscribeTo=function(e){if(e instanceof Observable)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[observable])return subscribeToObservable(e);if(isArrayLike(e))return subscribeToArray(e);if(isPromise(e))return subscribeToPromise(e);if(e&&"function"==typeof e[iterator])return subscribeToIterable(e);var t=isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function subscribeToResult(e,t,r,n,o){if(void 0===o&&(o=new InnerSubscriber(e,r,n)),!o.closed)return subscribeTo(t)(o)}var NONE={};function combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null,n=null;return isScheduler(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&isArray(e[0])&&(e=e[0]),fromArray(e,n).lift(new CombineLatestOperator(r))}var CombineLatestOperator=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new CombineLatestSubscriber(e,this.resultSelector))},e}(),CombineLatestSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return __extends(t,e),t.prototype._next=function(e){this.values.push(NONE),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){var i=this.values,s=i[r],a=this.toRespond?s===NONE?--this.toRespond:this.toRespond:0;i[r]=t,0===a&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(OuterSubscriber);function isInteropObservable(e){return e&&"function"==typeof e[observable]}function isIterable(e){return e&&"function"==typeof e[iterator]}function fromPromise(e,t){return new Observable(t?function(r){var n=new Subscription;return n.add(t.schedule(function(){return e.then(function(e){n.add(t.schedule(function(){r.next(e),n.add(t.schedule(function(){return r.complete()}))}))},function(e){n.add(t.schedule(function(){return r.error(e)}))})})),n}:subscribeToPromise(e))}function fromIterable(e,t){if(!e)throw new Error("Iterable cannot be null");return new Observable(t?function(r){var n,o=new Subscription;return o.add(function(){n&&"function"==typeof n.return&&n.return()}),o.add(t.schedule(function(){n=e[iterator](),o.add(t.schedule(function(){if(!r.closed){var e,t;try{var o=n.next();e=o.value,t=o.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),o}:subscribeToIterable(e))}function fromObservable(e,t){return new Observable(t?function(r){var n=new Subscription;return n.add(t.schedule(function(){var o=e[observable]();n.add(o.subscribe({next:function(e){n.add(t.schedule(function(){return r.next(e)}))},error:function(e){n.add(t.schedule(function(){return r.error(e)}))},complete:function(){n.add(t.schedule(function(){return r.complete()}))}}))})),n}:subscribeToObservable(e))}function from(e,t){if(!t)return e instanceof Observable?e:new Observable(subscribeTo(e));if(null!=e){if(isInteropObservable(e))return fromObservable(e,t);if(isPromise(e))return fromPromise(e,t);if(isArrayLike(e))return fromArray(e,t);if(isIterable(e)||"string"==typeof e)return fromIterable(e,t)}throw new TypeError((null!==e&&_typeof(e)||e)+" is not observable")}function mergeMap(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(mergeMap(function(r,n){return from(e(r,n)).pipe(map(function(e,o){return t(r,e,n,o)}))},r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new MergeMapOperator(e,r))})}var MergeMapOperator=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new MergeMapSubscriber(e,this.project,this.concurrent))},e}(),MergeMapSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var o=e.call(this,t)||this;return o.project=r,o.concurrent=n,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return __extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=new InnerSubscriber(this,void 0,void 0);this.destination.add(n),subscribeToResult(this,e,t,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber);function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),mergeMap(identity,e)}function concatAll(){return mergeAll(1)}function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concatAll()(of.apply(void 0,e))}function defer$1(e){return new Observable(function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?from(r):empty$2()).subscribe(t)})}function forkJoin(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&isArray(t[0])&&(t=t[0]),0===t.length?EMPTY:e?forkJoin(t).pipe(map(function(t){return e.apply(void 0,t)})):new Observable(function(e){return new ForkJoinSubscriber(e,t)})}var ForkJoinSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;n.sources=r,n.completed=0,n.haveValues=0;var o=r.length;n.values=new Array(o);for(var i=0;i<o;i++){var s=subscribeToResult(n,r[i],null,i);s&&n.add(s)}return n}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.values[r]=t,o._hasValue||(o._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this.haveValues,n=this.values,o=n.length;e._hasValue?(this.completed++,this.completed===o&&(r===o&&t.next(n),t.complete())):t.complete()},t}(OuterSubscriber);function fromEvent(e,t,r,n){return isFunction(r)&&(n=r,r=void 0),n?fromEvent(e,t,r).pipe(map(function(e){return isArray(e)?n.apply(void 0,e):n(e)})):new Observable(function(n){setupSubscription(e,t,function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)},n,r)})}function setupSubscription(e,t,r,n,o){var i;if(isEventTarget(e)){var s=e;e.addEventListener(t,r,o),i=function(){return s.removeEventListener(t,r,o)}}else if(isJQueryStyleEventEmitter(e)){var a=e;e.on(t,r),i=function(){return a.off(t,r)}}else if(isNodeStyleEventEmitter(e)){var u=e;e.addListener(t,r),i=function(){return u.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)setupSubscription(e[c],t,r,n,o)}n.add(i)}function isNodeStyleEventEmitter(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function isJQueryStyleEventEmitter(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function isEventTarget(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}function fromEventPattern(e,t,r){return r?fromEventPattern(e,t).pipe(map(function(e){return isArray(e)?r.apply(void 0,e):r(e)})):new Observable(function(r){var n,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)};try{n=e(o)}catch(e){return void r.error(e)}if(isFunction(t))return function(){return t(o,n)}})}function generate(e,t,r,n,o){var i,s;if(1==arguments.length){var a=e;s=a.initialState,t=a.condition,r=a.iterate,i=a.resultSelector||identity,o=a.scheduler}else void 0===n||isScheduler(n)?(s=e,i=identity,o=n):(s=e,i=n);return new Observable(function(e){var n=s;if(o)return o.schedule(dispatch$3,0,{subscriber:e,iterate:r,condition:t,resultSelector:i,state:n});for(;;){if(t){var a=void 0;try{a=t(n)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var u=void 0;try{u=i(n)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{n=r(n)}catch(t){return void e.error(t)}}})}function dispatch$3(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var o;try{o=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(o),!t.closed))return this.schedule(e)}}function iif(e,t,r){return void 0===t&&(t=EMPTY),void 0===r&&(r=EMPTY),defer$1(function(){return e()?t:r})}function isNumeric(e){return!isArray(e)&&e-parseFloat(e)+1>=0}function interval(e,t){return void 0===e&&(e=0),void 0===t&&(t=async),(!isNumeric(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=async),new Observable(function(r){return r.add(t.schedule(dispatch$4,e,{subscriber:r,counter:0,period:e})),r})}function dispatch$4(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,o=e[e.length-1];return isScheduler(o)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof o&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof Observable?e[0]:mergeAll(r)(fromArray(e,n))}var NEVER=new Observable(noop);function never(){return NEVER}function onErrorResumeNext(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return EMPTY;var r=e[0],n=e.slice(1);return 1===e.length&&isArray(r)?onErrorResumeNext.apply(void 0,r):new Observable(function(e){var t=function(){return e.add(onErrorResumeNext.apply(void 0,n).subscribe(e))};return from(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function pairs(e,t){return new Observable(t?function(r){var n=Object.keys(e),o=new Subscription;return o.add(t.schedule(dispatch$5,0,{keys:n,index:0,subscriber:r,subscription:o,obj:e})),o}:function(t){for(var r=Object.keys(e),n=0;n<r.length&&!t.closed;n++){var o=r[n];e.hasOwnProperty(o)&&t.next([o,e[o]])}t.complete()})}function dispatch$5(e){var t=e.keys,r=e.index,n=e.subscriber,o=e.subscription,i=e.obj;if(!n.closed)if(r<t.length){var s=t[r];n.next([s,i[s]]),o.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:o,obj:i}))}else n.complete()}function race(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!isArray(e[0]))return e[0];e=e[0]}return fromArray(e,void 0).lift(new RaceOperator)}var RaceOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new RaceSubscriber(e))},e}(),RaceSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return __extends(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],o=subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==r){var s=this.subscriptions[i];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(OuterSubscriber);function range(e,t,r){return void 0===e&&(e=0),new Observable(function(n){void 0===t&&(t=e,e=0);var o=0,i=e;if(r)return r.schedule(dispatch$6,0,{index:o,count:t,start:e,subscriber:n});for(;;){if(o++>=t){n.complete();break}if(n.next(i++),n.closed)break}})}function dispatch$6(e){var t=e.start,r=e.index,n=e.count,o=e.subscriber;r>=n?o.complete():(o.next(t),o.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}function timer(e,t,r){void 0===e&&(e=0);var n=-1;return isNumeric(t)?n=Number(t)<1?1:Number(t):isScheduler(t)&&(r=t),isScheduler(r)||(r=async),new Observable(function(t){var o=isNumeric(e)?e:+e-r.now();return r.schedule(dispatch$7,o,{index:0,period:n,subscriber:t})})}function dispatch$7(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}function using(e,t){return new Observable(function(r){var n,o;try{n=e()}catch(e){return void r.error(e)}try{o=t(n)}catch(e){return void r.error(e)}var i=(o?from(o):EMPTY).subscribe(r);return function(){i.unsubscribe(),n&&n.unsubscribe()}})}function zip(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),fromArray(e,void 0).lift(new ZipOperator(r))}var ZipOperator=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new ZipSubscriber(e,this.resultSelector))},e}(),ZipSubscriber=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null));var o=e.call(this,t)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof r?r:null,o.values=n,o}return __extends(t,e),t.prototype._next=function(e){var t=this.iterators;isArray(e)?t.push(new StaticArrayIterator(e)):"function"==typeof e[iterator]?t.push(new StaticIterator(e[iterator]())):t.push(new ZipBufferIterator(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++){if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return}var o=!1,i=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(o=!0),a.done)return void r.complete();i.push(a.value)}this.resultSelector?this._tryresultSelector(i):r.next(i),o&&r.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Subscriber),StaticIterator=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),StaticArrayIterator=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),ZipBufferIterator=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.parent=r,o.observable=n,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return __extends(t,e),t.prototype[iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,o){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return subscribeToResult(this,this.observable,this,t)},t}(OuterSubscriber),_esm5=Object.freeze({Observable:Observable,ConnectableObservable:ConnectableObservable,GroupedObservable:GroupedObservable,observable:observable,Subject:Subject,BehaviorSubject:BehaviorSubject,ReplaySubject:ReplaySubject,AsyncSubject:AsyncSubject,asapScheduler:asap,asyncScheduler:async,queueScheduler:queue$1,animationFrameScheduler:animationFrame,VirtualTimeScheduler:VirtualTimeScheduler,VirtualAction:VirtualAction,Scheduler:Scheduler,Subscription:Subscription,Subscriber:Subscriber,Notification:Notification,pipe:pipe,noop:noop,identity:identity,isObservable:isObservable,ArgumentOutOfRangeError:ArgumentOutOfRangeError,EmptyError:EmptyError,ObjectUnsubscribedError:ObjectUnsubscribedError,UnsubscriptionError:UnsubscriptionError,TimeoutError:TimeoutError,bindCallback:bindCallback,bindNodeCallback:bindNodeCallback,combineLatest:combineLatest,concat:concat,defer:defer$1,empty:empty$2,forkJoin:forkJoin,from:from,fromEvent:fromEvent,fromEventPattern:fromEventPattern,generate:generate,iif:iif,interval:interval,merge:merge,never:never,of:of,onErrorResumeNext:onErrorResumeNext,pairs:pairs,race:race,range:range,throwError:throwError,timer:timer,using:using,zip:zip,EMPTY:EMPTY,NEVER:NEVER,config:config}),at=_stringAt(!0),_advanceStringIndex=function(e,t,r){return t+(r?at(e,t).length:1)},builtinExec=RegExp.prototype.exec,_regexpExecAbstract=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==_classof(e))throw new TypeError("RegExp#exec called on incompatible receiver");return builtinExec.call(e,t)},nativeExec=RegExp.prototype.exec,nativeReplace=String.prototype.replace,patchedExec=nativeExec,LAST_INDEX="lastIndex",UPDATES_LAST_INDEX_WRONG=function(){var e=/a/,t=/b*/g;return nativeExec.call(e,"a"),nativeExec.call(t,"a"),0!==e[LAST_INDEX]||0!==t[LAST_INDEX]}(),NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED;PATCH&&(patchedExec=function(e){var t,r,n,o,i=this;return NPCG_INCLUDED&&(r=new RegExp("^"+i.source+"$(?!\\s)",_flags.call(i))),UPDATES_LAST_INDEX_WRONG&&(t=i[LAST_INDEX]),n=nativeExec.call(i,e),UPDATES_LAST_INDEX_WRONG&&n&&(i[LAST_INDEX]=i.global?n.index+n[0].length:t),NPCG_INCLUDED&&n&&n.length>1&&nativeReplace.call(n[0],r,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n});var _regexpExec=patchedExec;_export({target:"RegExp",proto:!0,forced:_regexpExec!==/./.exec},{exec:_regexpExec});var SPECIES$3=_wks("species"),REPLACE_SUPPORTS_NAMED_GROUPS=!_fails(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),_fixReWks=function(e,t,r){var n=_wks(e),o=!_fails(function(){var t={};return t[n]=function(){return 7},7!=""[e](t)}),i=o?!_fails(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[SPECIES$3]=function(){return r}),r[n](""),!t}):void 0;if(!o||!i||"replace"===e&&!REPLACE_SUPPORTS_NAMED_GROUPS||"split"===e&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC){var s=/./[n],a=r(_defined,n,""[e],function(e,t,r,n,i){return t.exec===_regexpExec?o&&!i?{done:!0,value:s.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),u=a[0],c=a[1];_redefine(String.prototype,e,u),_hide(RegExp.prototype,n,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}},max$1=Math.max,min$2=Math.min,floor$1=Math.floor,SUBSTITUTION_SYMBOLS=/\$([$&`']|\d\d?|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&`']|\d\d?)/g,maybeToString=function(e){return void 0===e?e:String(e)};function fetch(e,t){return t=t||{},new Promise(function(r,n){var o=new XMLHttpRequest,i=[],s=[],a={};for(var u in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){i.push(t=t.toLowerCase()),s.push([t,r]),a[t]=a[t]?a[t]+","+r:r}),r(function e(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:e,headers:{keys:function(){return i},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}}())},o.onerror=n,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(u,t.headers[u]);o.send(t.body||null)})}function catchError(e){return function(t){var r=new CatchOperator(e),n=t.lift(r);return r.caught=n}}_fixReWks("replace",2,function(e,t,r,n){return[function(n,o){var i=e(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,i,o):r.call(String(i),n,o)},function(e,t){var i=n(r,e,this,t);if(i.done)return i.value;var s=_anObject(e),a=String(this),u="function"==typeof t;u||(t=String(t));var c=s.global;if(c){var l=s.unicode;s.lastIndex=0}for(var f=[];;){var p=_regexpExecAbstract(s,a);if(null===p)break;if(f.push(p),!c)break;""===String(p[0])&&(s.lastIndex=_advanceStringIndex(a,_toLength(s.lastIndex),l))}for(var h="",_=0,d=0;d<f.length;d++){p=f[d];for(var g=String(p[0]),b=max$1(min$2(_toInteger(p.index),a.length),0),y=[],m=1;m<p.length;m++)y.push(maybeToString(p[m]));var v=p.groups;if(u){var E=[g].concat(y,b,a);void 0!==v&&E.push(v);var S=String(t.apply(void 0,E))}else S=o(g,a,b,y,v,t);b>=_&&(h+=a.slice(_,b)+S,_=b+g.length)}return h+a.slice(_)}];function o(e,t,n,o,i,s){var a=n+e.length,u=o.length,c=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==i&&(i=_toObject(i),c=SUBSTITUTION_SYMBOLS),r.call(s,c,function(r,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":c=i[s.slice(1,-1)];break;default:var l=+s;if(0===l)return r;if(l>u){var f=floor$1(l/10);return 0===f?r:f<=u?void 0===o[f-1]?s.charAt(1):o[f-1]+s.charAt(1):r}c=o[l-1]}return void 0===c?"":c})}});var CatchOperator=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new CatchSubscriber(e,this.selector,this.caught))},e}(),CatchSubscriber=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.selector=r,o.caught=n,o}return __extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var n=new InnerSubscriber(this,void 0,void 0);this.add(n),subscribeToResult(this,r,void 0,void 0,n)}},t}(OuterSubscriber);function concatMap(e,t){return mergeMap(e,t,1)}function defaultIfEmpty(e){return void 0===e&&(e=null),function(t){return t.lift(new DefaultIfEmptyOperator(e))}}var DefaultIfEmptyOperator=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new DefaultIfEmptySubscriber(e,this.defaultValue))},e}(),DefaultIfEmptySubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.defaultValue=r,n.isEmpty=!0,n}return __extends(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Subscriber);function isDate(e){return e instanceof Date&&!isNaN(+e)}function delay(e,t){void 0===t&&(t=async);var r=isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new DelayOperator(r,t))}}var DelayOperator=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new DelaySubscriber(e,this.delay,this.scheduler))},e}(),DelaySubscriber=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.delay=r,o.scheduler=n,o.queue=[],o.active=!1,o.errored=!1,o}return __extends(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,n=e.scheduler,o=e.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(e,i)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,r=new DelayMessage(t.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},t}(Subscriber),DelayMessage=function(){return function(e,t){this.time=e,this.notification=t}}(),SET="Set",es6_set=_collection(SET,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return _collectionStrong.def(_validateCollection(this,SET),e=0===e?0:e,e)}},_collectionStrong);function distinct(e,t){return function(r){return r.lift(new DistinctOperator(e,t))}}var DistinctOperator=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new DistinctSubscriber(e,this.keySelector,this.flushes))},e}(),DistinctSubscriber=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.keySelector=r,o.values=new Set,n&&o.add(subscribeToResult(o,n)),o}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,r=this.destination;try{t=this.keySelector(e)}catch(e){return void r.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var r=this.values;r.has(e)||(r.add(e),this.destination.next(t))},t}(OuterSubscriber);function filter(e,t){return function(r){return r.lift(new FilterOperator(e,t))}}var FilterOperator=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new FilterSubscriber(e,this.predicate,this.thisArg))},e}(),FilterSubscriber=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.predicate=r,o.thisArg=n,o.count=0,o}return __extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Subscriber);function tap(e,t,r){return function(n){return n.lift(new DoOperator(e,t,r))}}var DoOperator=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new TapSubscriber(e,this.nextOrObserver,this.error,this.complete))},e}(),TapSubscriber=function(e){function t(t,r,n,o){var i=e.call(this,t)||this;return i._tapNext=noop,i._tapError=noop,i._tapComplete=noop,i._tapError=n||noop,i._tapComplete=o||noop,isFunction(r)?(i._context=i,i._tapNext=r):r&&(i._context=r,i._tapNext=r.next||noop,i._tapError=r.error||noop,i._tapComplete=r.complete||noop),i}return __extends(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(Subscriber),throwIfEmpty=function(e){return void 0===e&&(e=defaultErrorFactory),tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw e()}})};function defaultErrorFactory(){return new EmptyError}function take(e){return function(t){return 0===e?empty$2():t.lift(new TakeOperator(e))}}var TakeOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeSubscriber(e,this.total))},e}(),TakeSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.count=0,n}return __extends(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(Subscriber);function finalize(e){return function(t){return t.lift(new FinallyOperator(e))}}var FinallyOperator=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new FinallySubscriber(e,this.callback))},e}(),FinallySubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.add(new Subscription(r)),n}return __extends(t,e),t}(Subscriber);function first(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?filter(function(t,r){return e(t,r,n)}):identity,take(1),r?defaultIfEmpty(t):throwIfEmpty(function(){return new EmptyError}))}}function ignoreElements(){return function(e){return e.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new IgnoreElementsSubscriber(e))},e}(),IgnoreElementsSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._next=function(e){},t}(Subscriber);function takeLast(e){return function(t){return 0===e?empty$2():t.lift(new TakeLastOperator(e))}}var TakeLastOperator=function(){function e(e){if(this.total=e,this.total<0)throw new ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new TakeLastSubscriber(e,this.total))},e}(),TakeLastSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.ring=new Array,n.count=0,n}return __extends(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,o=0;o<r;o++){var i=t++%r;e.next(n[i])}e.complete()},t}(Subscriber);function mapTo(e){return function(t){return t.lift(new MapToOperator(e))}}var MapToOperator=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new MapToSubscriber(e,this.value))},e}(),MapToSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.value=r,n}return __extends(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(Subscriber);function scan(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new ScanOperator(e,t,r))}}var ScanOperator=function(){function e(e,t,r){void 0===r&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return e.prototype.call=function(e,t){return t.subscribe(new ScanSubscriber(e,this.accumulator,this.seed,this.hasSeed))},e}(),ScanSubscriber=function(e){function t(t,r,n,o){var i=e.call(this,t)||this;return i.accumulator=r,i._seed=n,i.hasSeed=o,i.index=0,i}return __extends(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(Subscriber);function reduce(e,t){return arguments.length>=2?function(r){return pipe(scan(e,t),takeLast(1),defaultIfEmpty(t))(r)}:function(t){return pipe(scan(function(t,r,n){return e(t,r,n+1)}),takeLast(1))(t)}}function multicast(e,t){return function(r){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return r.lift(new MulticastOperator(n,t));var o=Object.create(r,connectableObservableDescriptor);return o.source=r,o.subjectFactory=n,o}}var MulticastOperator=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var r=this.selector,n=this.subjectFactory(),o=r(n).subscribe(e);return o.add(t.subscribe(n)),o},e}();function retryWhen(e){return function(t){return t.lift(new RetryWhenOperator(e,t))}}var RetryWhenOperator=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new RetryWhenSubscriber(e,this.notifier,this.source))},e}(),RetryWhenSubscriber=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.notifier=r,o.source=n,o}return __extends(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,n=this.retries,o=this.retriesSubscription;if(n)this.errors=null,this.retriesSubscription=null;else{r=new Subject;try{n=(0,this.notifier)(r)}catch(t){return e.prototype.error.call(this,t)}o=subscribeToResult(this,n)}this._unsubscribeAndRecycle(),this.errors=r,this.retries=n,this.retriesSubscription=o,r.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,r,n,o){var i=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=i,this.source.subscribe(this)},t}(OuterSubscriber);function shareSubjectFactory(){return new Subject}function share(){return function(e){return refCount()(multicast(shareSubjectFactory)(e))}}function shareReplay(e,t,r){var n;return n=e&&"object"===_typeof(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:r},function(e){return e.lift(shareReplayOperator(n))}}function shareReplayOperator(e){var t,r,n=e.bufferSize,o=void 0===n?Number.POSITIVE_INFINITY:n,i=e.windowTime,s=void 0===i?Number.POSITIVE_INFINITY:i,a=e.refCount,u=e.scheduler,c=0,l=!1,f=!1;return function(e){c++,t&&!l||(l=!1,t=new ReplaySubject(o,s,u),r=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){f=!0,t.complete()}}));var n=t.subscribe(this);this.add(function(){c--,n.unsubscribe(),r&&!f&&a&&0===c&&(r.unsubscribe(),r=void 0,t=void 0)})}}function skipLast(e){return function(t){return t.lift(new SkipLastOperator(e))}}var SkipLastOperator=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new Subscriber(e)):t.subscribe(new SkipLastSubscriber(e,this._skipCount))},e}(),SkipLastSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n._skipCount=r,n._count=0,n._ring=new Array(r),n}return __extends(t,e),t.prototype._next=function(e){var t=this._skipCount,r=this._count++;if(r<t)this._ring[r]=e;else{var n=r%t,o=this._ring,i=o[n];o[n]=e,this.destination.next(i)}},t}(Subscriber);function switchMap(e,t){return"function"==typeof t?function(r){return r.pipe(switchMap(function(r,n){return from(e(r,n)).pipe(map(function(e,o){return t(r,e,n,o)}))}))}:function(t){return t.lift(new SwitchMapOperator(e))}}var SwitchMapOperator=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new SwitchMapSubscriber(e,this.project))},e}(),SwitchMapSubscriber=function(e){function t(t,r){var n=e.call(this,t)||this;return n.project=r,n.index=0,n}return __extends(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe();var o=new InnerSubscriber(this,void 0,void 0);this.destination.add(o),this.innerSubscription=subscribeToResult(this,e,t,r,o)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,n,o){this.destination.next(t)},t}(OuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(e,t){return t?switchMap(function(){return e},t):switchMap(function(){return e})}function takeUntil(e){return function(t){return t.lift(new TakeUntilOperator(e))}}var TakeUntilOperator=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new TakeUntilSubscriber(e),n=subscribeToResult(r,this.notifier);return n&&!r.seenValue?(r.add(n),t.subscribe(r)):r},e}(),TakeUntilSubscriber=function(e){function t(t){var r=e.call(this,t)||this;return r.seenValue=!1,r}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,n,o){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(OuterSubscriber);function timeoutWith(e,t,r){return void 0===r&&(r=async),function(n){var o=isDate(e),i=o?+e-r.now():Math.abs(e);return n.lift(new TimeoutWithOperator(i,o,t,r))}}var TimeoutWithOperator=function(){function e(e,t,r,n){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new TimeoutWithSubscriber(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),TimeoutWithSubscriber=function(e){function t(t,r,n,o,i){var s=e.call(this,t)||this;return s.absoluteTimeout=r,s.waitFor=n,s.withObservable=o,s.scheduler=i,s.action=null,s.scheduleTimeout(),s}return __extends(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(OuterSubscriber);function timeout(e,t){return void 0===t&&(t=async),timeoutWith(e,throwError(new TimeoutError),t)}function isObject$1(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject$1,freeGlobal="object"==_typeof(commonjsGlobal)&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,_Symbol2=_root.Symbol,_Symbol=_Symbol2,objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty$1.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0;var n=!0}catch(e){}var o=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=r:delete e[symToStringTag]),o}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObjectLike(e){return null!=e&&"object"==_typeof(e)}var isObjectLike_1=isObjectLike,symbolTag="[object Symbol]";function isSymbol$1(e){return"symbol"==_typeof(e)||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol$1,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN;if(isObject_1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject_1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber$1,dP$5=_objectDp.f,gOPN$3=_objectGopn.f,$RegExp=_global.RegExp,Base$1=$RegExp,proto$2=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(_descriptors&&(!CORRECT_NEW||_fails(function(){return re2[_wks("match")]=!1,$RegExp(re1)!=re1||$RegExp(re2)==re2||"/a/i"!=$RegExp(re1,"i")}))){$RegExp=function(e,t){var r=this instanceof $RegExp,n=_isRegexp(e),o=void 0===t;return!r&&n&&e.constructor===$RegExp&&o?e:_inheritIfRequired(CORRECT_NEW?new Base$1(n&&!o?e.source:e,t):Base$1((n=e instanceof $RegExp)?e.source:e,n&&o?_flags.call(e):t),r?this:proto$2,$RegExp)};for(var proxy=function(e){e in $RegExp||dP$5($RegExp,e,{configurable:!0,get:function(){return Base$1[e]},set:function(t){Base$1[e]=t}})},keys$1=gOPN$3(Base$1),i$2=0;keys$1.length>i$2;)proxy(keys$1[i$2++]);proto$2.constructor=$RegExp,$RegExp.prototype=proto$2,_redefine(_global,"RegExp",$RegExp)}_setSpecies("RegExp");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction$1,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=(uid=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:""),uid;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$2=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$2).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$3.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$4.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map$1=_getNative(_root,"Map"),_Map=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=_typeof(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(memoize.Cache||_MapCache),r}memoize.Cache=_MapCache;var memoize_1=memoize;_export(_export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),_typedArray("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),_typedArray("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}});var EnvironmentDetectingEntropyProvider=function(){function e(){if(_classCallCheck(this,e),"undefined"!=typeof window&&void 0!==window.document){if(this.environment="browser",void 0===window.crypto||void 0===window.crypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");this.browserCrypto=window.crypto}else{if("undefined"==typeof process||!process.versions||!process.versions.node)throw new Error("Unexpected environment: neither browser nor node");this.environment="node";try{this.nodeCrypto=require("crypto")}catch(e){throw new Error("NodeJS.crypto not available")}}}return _createClass(e,[{key:"getRandomValuesBrowser",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r){var n,o,i,s,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("browser"===this.environment){t.next=2;break}throw new Error("not in browser environment");case 2:if(!(r.byteLength<=e.BROWSER_ENTROPY_QUOTA_BYTES)){t.next=4;break}return t.abrupt("return",this.browserCrypto.getRandomValues(r));case 4:for(n=r.byteLength;n>0;)o=Math.min(n,e.BROWSER_ENTROPY_QUOTA_BYTES),i=r.byteLength-n,s=o/r.BYTES_PER_ELEMENT,a=i+s,u=r.subarray(i,a),this.browserCrypto.getRandomValues(u),n-=o;return t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getRandomValuesNode",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("node"===this.environment){e.next=2;break}throw new Error("not in node environment");case 2:return e.abrupt("return",new Promise(function(e,n){r.nodeCrypto.randomFill(t,function(t,r){t?n(t):e(r)})}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRandomValues",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.environment,e.next="browser"===e.t0?3:"node"===e.t0?6:9;break;case 3:return e.next=5,this.getRandomValuesBrowser(t);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,this.getRandomValuesNode(t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();EnvironmentDetectingEntropyProvider.BROWSER_ENTROPY_QUOTA_BYTES=65536;var Alphabets=function e(){_classCallCheck(this,e)};Alphabets.LOWERCASE="abcdefghijklmnopqrstuvwxyz",Alphabets.UPPERCASE="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Alphabets.NUMERIC="0123456789",Alphabets.ALPHABETIC=Alphabets.LOWERCASE+Alphabets.UPPERCASE,Alphabets.ALPHANUMERIC=Alphabets.LOWERCASE+Alphabets.UPPERCASE+Alphabets.NUMERIC;var RandomGenerator=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EnvironmentDetectingEntropyProvider;_classCallCheck(this,e),this.entropyProvider=t}return _createClass(e,[{key:"getRandomArrayForAlphabet",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r,n){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r<=0)){t.next=2;break}throw new Error("alphabetLength must be greater than 0");case 2:if(!(r>e.MAX_ALPHABET_LEN)){t.next=4;break}throw new Error("alphabetLength must be less than or equal to ".concat(e.MAX_ALPHABET_LEN));case 4:if(!(n<=0)){t.next=6;break}throw new Error("desiredRandomLength must be greater than 0");case 6:t.prev=6,o=r<=256?new Uint8Array(n):r<=65536?new Uint16Array(n):new Uint32Array(n),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(6),new Error("TypedArray allocation failed, requested random too big");case 13:return t.next=15,this.entropyProvider.getRandomValues(o);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}},t,this,[[6,10]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"getRemainderForAlphabet",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r<=0)){t.next=2;break}throw new Error("alphabetLength must be greater than 0");case 2:if(!(r>e.MAX_ALPHABET_LEN)){t.next=4;break}throw new Error("alphabetLength must be less than or equal to ".concat(e.MAX_ALPHABET_LEN));case 4:if(!(r<=256)){t.next=6;break}return t.abrupt("return",256%r);case 6:if(!(r<=65536)){t.next=8;break}return t.abrupt("return",65536%r);case 8:return t.abrupt("return",e.MAX_ALPHABET_LEN%r);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"getUniformlyDistributedRandomCharIndexesOfAlphabet",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r,n){var o,i,s,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r<=0)){t.next=2;break}throw new Error("alphabetLength must be greater than 0");case 2:if(!(r>e.MAX_ALPHABET_LEN)){t.next=4;break}throw new Error("alphabetLength must be less than or equal to ".concat(e.MAX_ALPHABET_LEN));case 4:if(!(n<=0)){t.next=6;break}throw new Error("howMany must be greater than 0");case 6:return t.next=8,this.getRemainderForAlphabet(r);case 8:o=t.sent,i=[];case 10:if(!(i.length<n)){t.next=18;break}return s=n-i.length,t.next=14,this.getRandomArrayForAlphabet(r,s);case 14:for(a=t.sent,u=0;u<a.length;u++)a[u]>=o&&i.push(a[u]%r);t.next=10;break;case 18:return t.abrupt("return",i);case 19:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"bytes",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=0)){e.next=2;break}throw new Error("byteCount must be greater than 0");case 2:return e.prev=2,e.next=5,this.entropyProvider.getRandomValues(new Uint8Array(t));case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),new Error("TypedArray allocation failed, requested random too big");case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"integer",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r,n){var o,i,s,a=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a.length>2&&void 0!==a[2]?a[2]:1,!(r<0)){t.next=3;break}throw new Error("min must be greater than or equal to 0");case 3:if(!(r>Number.MAX_SAFE_INTEGER)){t.next=5;break}throw new Error("min must be less than or equal to ".concat(Number.MAX_SAFE_INTEGER));case 5:if(!(n<0)){t.next=7;break}throw new Error("max must be greater than or equal to 0");case 7:if(!(n>Number.MAX_SAFE_INTEGER)){t.next=9;break}throw new Error("max must be less than or equal to ".concat(Number.MAX_SAFE_INTEGER));case 9:if(!(o<=0)){t.next=11;break}throw new Error("howMany must be greater than 0");case 11:if(!(n<=r)){t.next=13;break}throw new Error("max must be greater than min");case 13:if(!((i=n-r+1)>e.MAX_ALPHABET_LEN)){t.next=16;break}throw new Error("max - min + 1 must be less than or equal to ".concat(e.MAX_ALPHABET_LEN));case 16:return t.next=18,this.getUniformlyDistributedRandomCharIndexesOfAlphabet(i,o);case 18:return s=t.sent,t.abrupt("return",s.map(function(e){return r+e}));case 20:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"string",value:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r,n){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==r.length){t.next=2;break}throw new Error("alphabet must not be empty");case 2:if(!(r.length>e.MAX_ALPHABET_LEN)){t.next=4;break}throw new Error("alphabet must have maximum ".concat(e.MAX_ALPHABET_LEN," characters"));case 4:if(!(n<=0)){t.next=6;break}throw new Error("desiredLength must be greater than 0");case 6:return t.next=8,this.getUniformlyDistributedRandomCharIndexesOfAlphabet(r.length,n);case 8:return o=t.sent,t.abrupt("return",o.map(function(e){return r.charAt(e)}).join(""));case 10:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"lowercase",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.string(Alphabets.LOWERCASE,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"uppercase",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.string(Alphabets.UPPERCASE,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"numeric",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.string(Alphabets.NUMERIC,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"alphabetic",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.string(Alphabets.ALPHABETIC,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"alphanumeric",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.string(Alphabets.ALPHANUMERIC,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"boolean",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.integer(0,1);case 2:return t=e.sent,r=_slicedToArray(t,1),n=r[0],e.abrupt("return",1===n);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();RandomGenerator.MAX_ALPHABET_LEN=4294967296;var quot=/"/g,createHTML=function(e,t,r,n){var o=String(_defined(e)),i="<"+t;return""!==r&&(i+=" "+r+'="'+String(n).replace(quot,"&quot;")+'"'),i+">"+o+"</"+t+">"},_stringHtml=function(e,t){var r={};r[e]=t(createHTML),_export(_export.P+_export.F*_fails(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)};_stringHtml("sub",function(e){return function(){return e(this,"sub","","")}});var long_1=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=UINT_CACHE[e])?n:(r=fromBits(e,(0|e)<0?-1:0,!0),o&&(UINT_CACHE[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=INT_CACHE[e])?n:(r=fromBits(e,e<0?-1:0,!1),o&&(INT_CACHE[e]=r),r)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,r){return new Long(e,t,r)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return fromString(e.substring(1),t,r).neg();for(var o=fromNumber(pow_dbl(r,8)),i=ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);if(a<8){var c=fromNumber(pow_dbl(r,a));i=i.mul(c).add(fromNumber(u))}else i=(i=i.mul(o)).add(fromNumber(u))}return i.unsigned=t,i}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$1(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(e,t){return!t||"object"!==_typeof$1(t)&&"function"!=typeof t?_assertThisInitialized$1(e):t}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$1(e,t)}function _wrapNativeSuper$1(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper$1=function(e){if(null===e||!_isNativeFunction$1(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct$1(e,arguments,_getPrototypeOf$1(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf$1(r,e)})(e)}function isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct$1(e,t,r){return(_construct$1=isNativeReflectConstruct$1()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&_setPrototypeOf$1(o,r.prototype),o}).apply(null,arguments)}function _isNativeFunction$1(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function asyncGeneratorStep$1(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$1(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$1(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$1(i,n,o,s,a,"throw",e)}s(void 0)})}}LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=fromNumber(pow_dbl(e,6),this.unsigned),i=this,s="";;){var a=i.div(o),u=(i.sub(a.mul(o)).toInt()>>>0).toString(e);if((i=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,u=0,c=0,l=0,f=0;return l+=(f+=o+(65535&e.low))>>>16,c+=(l+=n+a)>>>16,u+=(c+=r+s)>>>16,u+=t+i,fromBits((l&=65535)<<16|(f&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,u=65535&e.low,c=0,l=0,f=0,p=0;return f+=(p+=o*u)>>>16,l+=(f+=n*u)>>>16,f&=65535,l+=(f+=o*a)>>>16,c+=(l+=r*u)>>>16,l&=65535,c+=(l+=n*a)>>>16,l&=65535,c+=(l+=o*s)>>>16,c+=t*u+r*a+n*s+o*i,fromBits((f&=65535)<<16|(p&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var t,r,n;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;n=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=ZERO}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:pow_dbl(2,o-48),s=fromNumber(t),a=s.mul(e);a.isNegative()||a.gt(r);)a=(s=fromNumber(t-=i,this.unsigned)).mul(e);s.isZero()&&(s=ONE),n=n.add(s),r=r.sub(a)}return n},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var UINT32_MAX=4294967295;function getRandomInt(e,t){return _getRandomInt.apply(this,arguments)}function _getRandomInt(){return(_getRandomInt=_asyncToGenerator$1(regenerator.mark(function e(t,r){var n,o,i,s,a,u,c=arguments;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>2&&void 0!==c[2]&&c[2])){e.next=9;break}return n=new RandomGenerator,e.next=5,n.integer(t,r);case 5:return o=e.sent,i=_slicedToArray$1(o,1),s=i[0],e.abrupt("return",s);case 9:return a=Math.ceil(t),u=Math.floor(r),e.abrupt("return",Math.floor(Math.random()*(u-a))+t);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function genRandomUInt32(){return _genRandomUInt.apply(this,arguments)}function _genRandomUInt(){return(_genRandomUInt=_asyncToGenerator$1(regenerator.mark(function e(){var t,r=arguments;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.abrupt("return",getRandomInt(0,UINT32_MAX,t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function genRandomUInt64(){return _genRandomUInt2.apply(this,arguments)}function _genRandomUInt2(){return(_genRandomUInt2=_asyncToGenerator$1(regenerator.mark(function e(){var t,r,n,o,i,s=arguments;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],e.next=3,Promise.all([getRandomInt(0,UINT32_MAX,t),getRandomInt(1,UINT32_MAX,t)]);case 3:return r=e.sent,n=_slicedToArray$1(r,2),o=n[0],i=n[1],e.abrupt("return",new long_1(o,i,!0));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var genError=function(){return function(e){function t(e){var r;_classCallCheck$1(this,t),(r=_possibleConstructorReturn$1(this,_getPrototypeOf$1(t).call(this))).name=void 0;var n=Object.keys(e),o=_slicedToArray$1(n,1);if(r.name=o[0],!e[n[0]])throw new Error("no error message provided");return r.message=e[n[0]],r}return _inherits$1(t,_wrapNativeSuper$1(Error)),t}()},CommonError=genError();function assertNever(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function calIpDistance(e,t){var r=e.split(".").map(function(e){return Number(e)}),n=t.split(".").map(function(e){return Number(e)});return Math.sqrt(1e3*Math.pow(r[0]-n[0],2)+100*Math.pow(r[1]-n[1],2)+10*Math.pow(r[2]-n[2],2)+1*Math.pow(r[3]-n[3],2))}function longToStringIfNeeded(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}var prefixSeqMap=new Map;function uniquePrefixedId(e,t){var r="".concat(e).concat(t||""),n=prefixSeqMap.get(r)||1;return prefixSeqMap.set(r,n+1),"".concat(e).concat(n)}_fixReWks("match",1,function(e,t,r,n){return[function(r){var n=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var o=_anObject(e),i=String(this);if(!o.global)return _regexpExecAbstract(o,i);var s=o.unicode;o.lastIndex=0;for(var a,u=[],c=0;null!==(a=_regexpExecAbstract(o,i));){var l=String(a[0]);u[c]=l,""===l&&(o.lastIndex=_advanceStringIndex(i,_toLength(o.lastIndex),s)),c++}return 0===c?null:u}]});var $min=Math.min,$push=[].push,$SPLIT="split",LENGTH="length",LAST_INDEX$1="lastIndex",MAX_UINT32=4294967295,SUPPORTS_Y=!_fails(function(){});_fixReWks("split",2,function(e,t,r,n){var o;return o="c"=="abbc"[$SPLIT](/(b)*/)[1]||4!="test"[$SPLIT](/(?:)/,-1)[LENGTH]||2!="ab"[$SPLIT](/(?:ab)*/)[LENGTH]||4!="."[$SPLIT](/(.?)(.?)/)[LENGTH]||"."[$SPLIT](/()()/)[LENGTH]>1||""[$SPLIT](/.?/)[LENGTH]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!_isRegexp(e))return r.call(n,e,t);for(var o,i,s,a=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,l=void 0===t?MAX_UINT32:t>>>0,f=new RegExp(e.source,u+"g");(o=_regexpExec.call(f,n))&&!((i=f[LAST_INDEX$1])>c&&(a.push(n.slice(c,o.index)),o[LENGTH]>1&&o.index<n[LENGTH]&&$push.apply(a,o.slice(1)),s=o[0][LENGTH],c=i,a[LENGTH]>=l));)f[LAST_INDEX$1]===o.index&&f[LAST_INDEX$1]++;return c===n[LENGTH]?!s&&f.test("")||a.push(""):a.push(n.slice(c)),a[LENGTH]>l?a.slice(0,l):a}:"0"[$SPLIT](void 0,0)[LENGTH]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var i=e(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,i,n):o.call(String(i),r,n)},function(e,t){var i=n(o,e,this,t,o!==r);if(i.done)return i.value;var s=_anObject(e),a=String(this),u=_speciesConstructor(s,RegExp),c=s.unicode,l=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),f=new u(SUPPORTS_Y?s:"^(?:"+s.source+")",l),p=void 0===t?MAX_UINT32:t>>>0;if(0===p)return[];if(0===a.length)return null===_regexpExecAbstract(f,a)?[a]:[];for(var h=0,_=0,d=[];_<a.length;){f.lastIndex=SUPPORTS_Y?_:0;var g,b=_regexpExecAbstract(f,SUPPORTS_Y?a:a.slice(_));if(null===b||(g=$min(_toLength(f.lastIndex+(SUPPORTS_Y?0:_)),a.length))===h)_=_advanceStringIndex(a,_,c);else{if(d.push(a.slice(h,_)),d.length===p)return d;for(var y=1;y<=b.length-1;y++)if(d.push(b[y]),d.length===p)return d;_=h=g}}return d.push(a.slice(h)),d}]});var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d,ms=function(e,t){t=t||{};var r=_typeof(e);if("string"===r&&e.length>0)return parse(e);if("number"===r&&!1===isNaN(e))return t.long?fmtLong(e):fmtShort(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(e){var t=Math.abs(e);return t>=d?Math.round(e/d)+"d":t>=h?Math.round(e/h)+"h":t>=m?Math.round(e/m)+"m":t>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){var t=Math.abs(e);return t>=d?plural(e,t,d,"day"):t>=h?plural(e,t,h,"hour"):t>=m?plural(e,t,m,"minute"):t>=s?plural(e,t,s,"second"):e+" ms"}function plural(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}function setup(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var i;function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(s.enabled){var o=s,a=Number(new Date),u=a-(i||a);o.diff=u,o.prev=i,o.curr=a,i=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;c++;var i=r.formatters[n];if("function"==typeof i){var s=t[c];e=i.call(o,s),t.splice(c,1),c--}return e}),r.formatArgs.call(o,t),(o.log||r.log).apply(o,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=o,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){var e=[].concat(_toConsumableArray(r.names.map(i)),_toConsumableArray(r.skips.map(i).map(function(e){return"-"+e}))).join(",");return r.enable(""),e},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms,Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common=setup,browser=createCommonjsModule(function(e,t){t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),browser_1=browser.log,browser_2=browser.formatArgs,browser_3=browser.save,browser_4=browser.load,browser_5=browser.useColors,browser_6=browser.storage,browser_7=browser.colors;_export(_export.S,"Number",{isNaN:function(e){return e!=e}});var Reflect$1=_global.Reflect,_ownKeys=Reflect$1&&Reflect$1.ownKeys||function(e){var t=_objectGopn.f(_anObject(e)),r=_objectGops.f;return r?t.concat(r(e)):t};_export(_export.S,"Reflect",{ownKeys:_ownKeys});var rApply=(_global.Reflect||{}).apply,fApply=Function.apply;_export(_export.S+_export.F*!_fails(function(){rApply(function(){})}),"Reflect",{apply:function(e,t,r){var n=_aFunction(e),o=_anObject(r);return rApply?rApply(n,t,o):fApply.call(n,t,o)}});var R="object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},ReflectOwnKeys;function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var NumberIsNaN=Number.isNaN||function(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}var events=EventEmitter;EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,r,n){var o,i,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(r));if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=$getMaxListeners(e))>0&&s.length>o&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,ProcessEmitWarning(a)}return e}function onceWrapper(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,ReflectApply(this.listener,this.target,e))}function _onceWrap(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=onceWrapper.bind(n);return o.listener=r,n.wrapFn=o,o}function _listeners(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?unwrapListeners(o):arrayClone(o,o.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function arrayClone(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)ReflectApply(a,this,t);else{var u=a.length,c=arrayClone(a,u);for(r=0;r<u;++r)ReflectApply(c[r],this,t)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t));return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t));return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var r,n,o,i,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t));if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():spliceOne(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};var key$2="__global_unique_id__",gud=function(){return commonjsGlobal[key$2]=(commonjsGlobal[key$2]||0)+1},loggerId;function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep$2(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$2(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$2(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$2(i,n,o,s,a,"throw",e)}s(void 0)})}}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$1(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$1(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(e,t){return!t||"object"!==_typeof$2(t)&&"function"!=typeof t?_assertThisInitialized$2(e):t}function _getPrototypeOf$2(e){return(_getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized$2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$2(e,t)}function _setPrototypeOf$2(e,t){return(_setPrototypeOf$2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var prefixer=function(e){return function(t){var r=1===loggerId||void 0===e?"":"#".concat(e," ");return"".concat(r).concat(t)}},loggerGenerator=function(e,t){var r=prefixer(loggerId),n=browser("RTM:".concat(t));return n.log=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.apply(void 0,[r(t)].concat(o))},n.enabled=!0,n},createEventBase=function(){return function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck$2(this,t),(n=_possibleConstructorReturn$2(this,_getPrototypeOf$2(t).call(this))).logger=e,n.name=r,n.error=void 0,n.genTracker=void 0,n.info=void 0,n.warn=void 0,n.log=void 0,n.genLogger=void 0,n.loggerId=void 0,n.loggerId=e.loggerId,n.info=e.info,n.warn=e.warn,n.error=e.error,n.genLogger=e.genLogger,n.genTracker=e.genTracker,n.log=e.genLogger("RTM:LOG","<".concat(r,"> ")),o){var i=n.emit.bind(_assertThisInitialized$2(n));n.emit=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var s=t[0],a=t.slice(1);return n.genTracker("Event").apply(void 0,["%s: "+(a.length>0?'"%s" emitted with args: '.concat(a.map(function(){return"%o"})):'"%s" emitted'),r,s].concat(_toConsumableArray$1(a))),i.apply(void 0,t)}}return n}return _inherits$2(t,events),t}()};function initLoggerId(){return loggerId=gud()}var genInfoLogger=function(){return loggerGenerator(console.log,"INFO")},genWarnLogger=function(){return loggerGenerator(console.warn,"WARN")},genErrorLogger=function(){return loggerGenerator(console.error,"ERROR")},debugLoggerGenerator=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=browser(t),o=prefixer(e),i=console.log;return n.log=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i.apply(void 0,[o(e)].concat(r))},"RTM:TRACK"===t&&(n.enabled=!0),function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,[r+e].concat(o))}}},trackLoggerGenerator=function(e){return function(t){return debugLoggerGenerator(e)("RTM:TRACK","[".concat(t,"] "))}};function logged(e,t,r){var n=r;void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var o=n.value;return n.value=function(){for(var r=this,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];this.genTracker("Invoke").apply(void 0,["%s: "+(i.length>0?'"%s" with args: '.concat(i.map(function(){return"%o"})):"%s"),e.constructor.name,t].concat(i));var a=o.apply(this,i),u=Date.now();return _asyncToGenerator$2(regenerator.mark(function e(){var n;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a;case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r.error(e.t0);case 9:n!==a&&r.genTracker("Resolve")('"%s" resolves after %dms',t,Date.now()-u),n&&r.genTracker("Result")('"%s" result is %o',t,n);case 11:case"end":return e.stop()}},e,null,[[0,6]])}))(),a},n}var AP_CONCURRENT_REQ_NUM=2,AP_REQUEST_TIMEOUT=5e3,KEEPALIVE_INTERVAL=2e3,SOCKET_RETRY_INTERVAL=1500,CLIENT_LOGIN_TIMEOUT=6e3,LOGIN_RESP_TIMEOUT=2e3,MESSAGE_MIN_COMPRESSION_LEN=128,MESSAGE_SEND_TIMEOUT=5e3,COMMON_REQUEST_TIMEOUT=5e3,TLRU_MAX_AGE=5e3,LRU_MAX_ITEM=1e5,PEER_MESSAGE_RETRY_TIMEOUTS=[700,700,1600],LOGOUT_SOCKET_CLOSE_TIMEOUT=5e3,LOGIN_MIN_INTERVAL=500,MESSAGE_TEXT_MAX_BYTES=32768,ONLINE_MESSAGE_DEDUP_DELAY=1e3,MSG_DEDUP_MAX_LEN=200;function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray,nativeFloor=Math.floor,nativeRandom=Math.random;function baseRandom(e,t){return e+nativeFloor(nativeRandom()*(t-e+1))}var _baseRandom=baseRandom;function shuffleSelf(e,t){var r=-1,n=e.length,o=n-1;for(t=void 0===t?n:t;++r<t;){var i=_baseRandom(r,o),s=e[i];e[i]=e[r],e[r]=s}return e.length=t,e}var _shuffleSelf=shuffleSelf;function arrayShuffle(e){return _shuffleSelf(_copyArray(e))}var _arrayShuffle=arrayShuffle;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var _arrayMap=arrayMap;function baseValues(e,t){return _arrayMap(t,function(t){return e[t]})}var _baseValues=baseValues;function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$5.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,isArray$1=Array.isArray,isArray_1=isArray$1;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?_root.Buffer:void 0,i=(o?o.isBuffer:void 0)||stubFalse_1;e.exports=i}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=_typeof(e);return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(e){return function(t){return e(t)}}var _baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&_freeGlobal.process,i=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),o=!r&&!n&&isBuffer_1(e),i=!r&&!n&&!o&&isTypedArray_1(e),s=r||n||o||i,a=s?_baseTimes(e.length,String):[],u=a.length;for(var c in e)!t&&!hasOwnProperty$6.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_isIndex(c,u))||a.push(c);return a}var _arrayLikeKeys=arrayLikeKeys,objectProto$7=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$7)}var _isPrototype=isPrototype;function overArg(e,t){return function(r){return e(t(r))}}var _overArg=overArg,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$7.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function isArrayLike$1(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike$1;function keys$2(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys$2;function values(e){return null==e?[]:_baseValues(e,keys_1(e))}var values_1=values;function baseShuffle(e){return _shuffleSelf(values_1(e))}var _baseShuffle=baseShuffle;function shuffle(e){return(isArray_1(e)?_arrayShuffle:_baseShuffle)(e)}var shuffle_1=shuffle;function _toConsumableArray$2(e){return _arrayWithoutHoles$2(e)||_iterableToArray$2(e)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$2(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$2(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var getUrl=function(e){return"https://".concat(e,"/api/v1")},AP_DOMAINS_CN=["ap-web-3.agoraio.cn","ap-web-4.agoraio.cn"],AP_DOMAINS_IO=["ap-web-3.agora.io","ap-web-4.agora.io"],EDGE_ENV_PORT={0:9591,1:9593};function getEdgeDomain(e){return"".concat(e.split(".").join("-"),".edge.agora.io")}var cnUrl$=of.apply(void 0,_toConsumableArray$2(shuffle_1(AP_DOMAINS_CN.map(getUrl)))),ioUrl$=of.apply(void 0,_toConsumableArray$2(shuffle_1(AP_DOMAINS_IO.map(getUrl))));function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep$3(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$3(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$3(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$3(i,n,o,s,a,"throw",e)}s(void 0)})}}function _toConsumableArray$3(e){return _arrayWithoutHoles$3(e)||_iterableToArray$3(e)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$3(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$3(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _possibleConstructorReturn$3(e,t){return!t||"object"!==_typeof$3(t)&&"function"!=typeof t?_assertThisInitialized$3(e):t}function _getPrototypeOf$3(e){return(_getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized$3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$3(e,t)}function _setPrototypeOf$3(e,t){return(_setPrototypeOf$3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ApResErrorMessage={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token"},ApResErrorCode={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY"},AccessPointError=genError(),AccessPoint=function(e){function t(e,r){var n;return _classCallCheck$3(this,t),(n=_possibleConstructorReturn$3(this,_getPrototypeOf$3(t).call(this,r,"AccessPoint"))).context=e,n.apEdgeInfo$=void 0,n.usedUrl=[],n.url$=zip(cnUrl$,ioUrl$).pipe(concatMap(function(e){return of.apply(void 0,_toConsumableArray$3(e))}),filter(function(e){return!n.usedUrl.includes(e)}),tap(function(e){n.usedUrl.push(e)}),take(AP_CONCURRENT_REQ_NUM),throwIfEmpty(function(){return t.runOutOfUrlSymbol}),catchError(function(e,r){return e===t.runOutOfUrlSymbol?(n.usedUrl.slice(0),r):throwError(e)})),n.apEdgeInfo$=n.url$.pipe(mergeMap(n.fetchAp.bind(_assertThisInitialized$3(n))),timeout(AP_REQUEST_TIMEOUT),distinct(function(e){return e.ip})),n}return _inherits$3(t,createEventBase()),_createClass$1(t,[{key:"fetchAp",value:function(e){var t=this,r=uniquePrefixedId("AP-",this.loggerId);return this.log('The AccessPoint requests "%s"(%s)',e,r),defer$1(_asyncToGenerator$3(regenerator.mark(function r(){return regenerator.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=fetch,r.t1=e,r.t2={"Content-Type":"application/json","X-Packet-Service-Type":"0","X-Packet-URI":"65"},r.t3=JSON,r.t4=t.context.getKey(),r.t5=t.context.getUid(),r.t6={},r.next=9,genRandomUInt32();case 9:return r.t7=r.sent,r.t8={flag:128,request_env:0,opid:0,key:r.t4,cname:r.t5,detail:r.t6,uid:r.t7},r.t9=r.t3.stringify.call(r.t3,r.t8),r.t10={method:"POST",mode:"cors",cache:"no-cache",headers:r.t2,body:r.t9},r.abrupt("return",(0,r.t0)(r.t1,r.t10));case 14:case"end":return r.stop()}},r)}))).pipe(catchError(function(e){return t.error(e),t.warn(new AccessPointError({AP_REQUEST_FAILURE:"Failed to request AP server"})),EMPTY}),mergeMap(function(){var e=_asyncToGenerator$3(regenerator.mark(function e(n){var o,i,s,a,u,c,l,f;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(o=e.sent,t.log("The %s reponsed %o",r,o),i=o.res,s=i.code,a=i.addresses,0===s){e.next=21;break}if(u=s.toString(),Object.keys(ApResErrorCode).includes(u)){e.next=10;break}return e.abrupt("return",throwError(new AccessPointError({AP_INVALID_RESPONSE_CODE:s})));case 10:c=ApResErrorCode[u],l=ApResErrorMessage[c],t.error(new AccessPointError(_defineProperty({},c,l))),e.t0=c,e.next="INVALID_APP_ID"===e.t0?16:"APP_ID_NO_ACTIVED"===e.t0?16:"INVALID_USER_ID"===e.t0?17:"TOKEN_EXPIRED"===e.t0?18:"TOKEN_TIMEOUT"===e.t0?18:"NO_AUTHORIZED"===e.t0?19:"INVALID_TOKEN_UID"===e.t0?19:"DYNAMIC_KEY_NOT_ENABLED"===e.t0?19:"DYNAMIC_ENABLED_BUT_STATIC_KEY"===e.t0?19:20;break;case 16:return e.abrupt("return",throwError(new Error(LoginError.LOGIN_ERR_INVALID_APP_ID)));case 17:return e.abrupt("return",throwError(new Error(LoginError.LOGIN_ERR_INVALID_ARGUMENT)));case 18:return e.abrupt("return",throwError(new Error(LoginError.LOGIN_ERR_TOKEN_EXPIRED)));case 19:return e.abrupt("return",throwError(new Error(LoginError.LOGIN_ERR_INVALID_TOKEN)));case 20:return e.abrupt("return",throwError(assertNever("ApResErrType",c)));case 21:return f=a,void 0,e.abrupt("return",of.apply(void 0,_toConsumableArray$3(f).concat([queue$1])));case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),mergeAll())}}]),t}();function arrayPush(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}AccessPoint.runOutOfUrlSymbol=Symbol("AP urls are used up");var _arrayPush=arrayPush,spreadableSymbol=_Symbol?_Symbol.isConcatSpreadable:void 0;function isFlattenable(e){return isArray_1(e)||isArguments_1(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}var _isFlattenable=isFlattenable;function baseFlatten(e,t,r,n,o){var i=-1,s=e.length;for(r||(r=_isFlattenable),o||(o=[]);++i<s;){var a=e[i];t>0&&r(a)?t>1?baseFlatten(a,t-1,r,n,o):_arrayPush(o,a):n||(o[o.length]=a)}return o}var _baseFlatten=baseFlatten;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new _MapCache;++t<r;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function arraySome(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _arraySome=arraySome;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,t,r,n,o,i){var s=r&COMPARE_PARTIAL_FLAG,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,p=r&COMPARE_UNORDERED_FLAG?new _SetCache:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var h=e[l],_=t[l];if(n)var d=s?n(_,h,l,t,e,i):n(h,_,l,e,t,i);if(void 0!==d){if(d)continue;f=!1;break}if(p){if(!_arraySome(t,function(e,t){if(!_cacheHas(p,t)&&(h===e||o(h,e,r,n,i)))return p.push(t)})){f=!1;break}}else if(h!==_&&!o(h,_,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f}var _equalArrays=equalArrays,Uint8Array$1=_root.Uint8Array,_Uint8Array=Uint8Array$1;function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}var _mapToArray=mapToArray;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var _setToArray=setToArray,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$1="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,r,n,o,i,s){switch(r){case dataViewTag$1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!i(new _Uint8Array(e),new _Uint8Array(t)));case boolTag$1:case dateTag$1:case numberTag$1:return eq_1(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$1:var a=_mapToArray;case setTag$1:var u=n&COMPARE_PARTIAL_FLAG$1;if(a||(a=_setToArray),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;n|=COMPARE_UNORDERED_FLAG$1,s.set(e,t);var l=_equalArrays(a(e),a(t),n,o,i,s);return s.delete(e),l;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var _equalByTag=equalByTag;function baseGetAllKeys(e,t,r){var n=t(e);return isArray_1(e)?n:_arrayPush(n,r(e))}var _baseGetAllKeys=baseGetAllKeys;function arrayFilter(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}var _arrayFilter=arrayFilter;function stubArray(){return[]}var stubArray_1=stubArray,objectProto$9=Object.prototype,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),_arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray_1,_getSymbols=getSymbols;function getAllKeys(e){return _baseGetAllKeys(e,keys_1,_getSymbols)}var _getAllKeys=getAllKeys,COMPARE_PARTIAL_FLAG$2=1,objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function equalObjects(e,t,r,n,o,i){var s=r&COMPARE_PARTIAL_FLAG$2,a=_getAllKeys(e),u=a.length;if(u!=_getAllKeys(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:hasOwnProperty$8.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=s;++c<u;){var _=e[l=a[c]],d=t[l];if(n)var g=s?n(d,_,l,t,e,i):n(_,d,l,e,t,i);if(!(void 0===g?_===d||o(_,d,r,n,i):g)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(p=!1)}return i.delete(e),i.delete(t),p}var _equalObjects=equalObjects,DataView=_getNative(_root,"DataView"),_DataView=DataView,Promise$2=_getNative(_root,"Promise"),_Promise=Promise$2,Set$1=_getNative(_root,"Set"),_Set=Set$1,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,mapTag$2="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$2="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$2||_Map&&getTag(new _Map)!=mapTag$2||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$2||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$1?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function baseIsEqualDeep(e,t,r,n,o,i){var s=isArray_1(e),a=isArray_1(t),u=s?arrayTag$1:_getTag(e),c=a?arrayTag$1:_getTag(t),l=(u=u==argsTag$2?objectTag$2:u)==objectTag$2,f=(c=c==argsTag$2?objectTag$2:c)==objectTag$2,p=u==c;if(p&&isBuffer_1(e)){if(!isBuffer_1(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new _Stack),s||isTypedArray_1(e)?_equalArrays(e,t,r,n,o,i):_equalByTag(e,t,u,r,n,o,i);if(!(r&COMPARE_PARTIAL_FLAG$3)){var h=l&&hasOwnProperty$9.call(e,"__wrapped__"),_=f&&hasOwnProperty$9.call(t,"__wrapped__");if(h||_){var d=h?e.value():e,g=_?t.value():t;return i||(i=new _Stack),o(d,g,r,n,i)}}return!!p&&(i||(i=new _Stack),_equalObjects(e,t,r,n,o,i))}var _baseIsEqualDeep=baseIsEqualDeep;function baseIsEqual(e,t,r,n,o){return e===t||(null==e||null==t||!isObjectLike_1(e)&&!isObjectLike_1(t)?e!=e&&t!=t:_baseIsEqualDeep(e,t,r,n,baseIsEqual,o))}var _baseIsEqual=baseIsEqual,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,t,r,n){var o=r.length,i=o,s=!n;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var u=(a=r[o])[0],c=e[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in e))return!1}else{var f=new _Stack;if(n)var p=n(c,l,u,e,t,f);if(!(void 0===p?_baseIsEqual(l,c,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,n,f):p))return!1}}return!0}var _baseIsMatch=baseIsMatch;function isStrictComparable(e){return e==e&&!isObject_1(e)}var _isStrictComparable=isStrictComparable;function getMatchData(e){for(var t=keys_1(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,_isStrictComparable(o)]}return t}var _getMatchData=getMatchData;function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}var _matchesStrictComparable=matchesStrictComparable;function baseMatches(e){var t=_getMatchData(e);return 1==t.length&&t[0][2]?_matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||_baseIsMatch(r,e,t)}}var _baseMatches=baseMatches,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=_typeof(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,function(e,r,n,o){t.push(n?o.replace(reEscapeChar,"$1"):r||e)}),t}),_stringToPath=stringToPath,INFINITY=1/0,symbolProto$1=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString;function toString$2(e){return null==e?"":_baseToString(e)}var toString_1=toString$2;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get;function baseHasIn(e,t){return null!=e&&t in Object(e)}var _baseHasIn=baseHasIn;function hasPath(e,t,r){for(var n=-1,o=(t=_castPath(t,e)).length,i=!1;++n<o;){var s=_toKey(t[n]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&isLength_1(o)&&_isIndex(s,o)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function hasIn(e,t){return null!=e&&_hasPath(e,t,_baseHasIn)}var hasIn_1=hasIn,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(e,t){return _isKey(e)&&_isStrictComparable(t)?_matchesStrictComparable(_toKey(e),t):function(r){var n=get_1(r,e);return void 0===n&&n===t?hasIn_1(r,e):_baseIsEqual(t,n,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}var _baseMatchesProperty=baseMatchesProperty;function identity$1(e){return e}var identity_1=identity$1;function baseProperty(e){return function(t){return null==t?void 0:t[e]}}var _baseProperty=baseProperty;function basePropertyDeep(e){return function(t){return _baseGet(t,e)}}var _basePropertyDeep=basePropertyDeep;function property(e){return _isKey(e)?_baseProperty(_toKey(e)):_basePropertyDeep(e)}var property_1=property;function baseIteratee(e){return"function"==typeof e?e:null==e?identity_1:"object"==_typeof(e)?isArray_1(e)?_baseMatchesProperty(e[0],e[1]):_baseMatches(e):property_1(e)}var _baseIteratee=baseIteratee;function createBaseFor(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===r(i[u],u,i))break}return t}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function createBaseEach(e,t){return function(r,n){if(null==r)return r;if(!isArrayLike_1(r))return e(r,n);for(var o=r.length,i=t?o:-1,s=Object(r);(t?i--:++i<o)&&!1!==n(s[i],i,s););return r}}var _createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach;function baseMap(e,t){var r=-1,n=isArrayLike_1(e)?Array(e.length):[];return _baseEach(e,function(e,o,i){n[++r]=t(e,o,i)}),n}var _baseMap=baseMap;function baseSortBy(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var _baseSortBy=baseSortBy;function compareAscending(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,i=isSymbol_1(e),s=void 0!==t,a=null===t,u=t==t,c=isSymbol_1(t);if(!a&&!c&&!i&&e>t||i&&s&&u&&!a&&!c||n&&s&&u||!r&&u||!o)return 1;if(!n&&!i&&!c&&e<t||c&&r&&o&&!n&&!i||a&&r&&o||!s&&o||!u)return-1}return 0}var _compareAscending=compareAscending;function compareMultiple(e,t,r){for(var n=-1,o=e.criteria,i=t.criteria,s=o.length,a=r.length;++n<s;){var u=_compareAscending(o[n],i[n]);if(u)return n>=a?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}var _compareMultiple=compareMultiple;function baseOrderBy(e,t,r){var n=-1;t=_arrayMap(t.length?t:[identity_1],_baseUnary(_baseIteratee));var o=_baseMap(e,function(e,r,o){return{criteria:_arrayMap(t,function(t){return t(e)}),index:++n,value:e}});return _baseSortBy(o,function(e,t){return _compareMultiple(e,t,r)})}var _baseOrderBy=baseOrderBy;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply,nativeMax=Math.max;function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=nativeMax(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),_apply(e,this,a)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,defineProperty$1=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty$1=defineProperty$1,baseSetToString=_defineProperty$1?function(e,t){return _defineProperty$1(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,r=0;return function(){var n=nativeNow(),o=HOT_SPAN-(n-r);if(r=n,o>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest;function isIterateeCall(e,t,r){if(!isObject_1(r))return!1;var n=_typeof(t);return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}var _isIterateeCall=isIterateeCall,sortBy=_baseRest(function(e,t){if(null==e)return[];var r=t.length;return r>1&&_isIterateeCall(e,t[0],t[1])?t=[]:r>2&&_isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),_baseOrderBy(e,_baseFlatten(t,1),[])}),sortBy_1=sortBy;function baseSome(e,t){var r;return _baseEach(e,function(e,n,o){return!(r=t(e,n,o))}),!!r}var _baseSome=baseSome;function some(e,t,r){var n=isArray_1(e)?_arraySome:_baseSome;return r&&_isIterateeCall(e,t,r)&&(t=void 0),n(e,_baseIteratee(t,3))}var some_1=some,lib=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=[],n=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,o){var i=void 0===o?{protocols:r,makeWebSocket:n}:o,s=i.protocols,a=void 0===s?r:s,u=i.makeWebSocket,c=void 0===u?n:u;return new _esm5.Observable(function(r){var n,o=new _esm5.Subject,i=function(e){if(!n)return n=e.subscribe(function(e){s.send(e)}),o;f(),r.error(new Error("Web socket message factory function called more than once"))},s=c(e,a),u=!1,l=!1,f=function(){u=!1};return s.onopen=function(){u=!0,l?s.close():r.next(i)},s.onmessage=function(e){o.next(e.data)},s.onerror=function(e){f(),r.error(new Error(e.message))},s.onclose=function(e){u&&(f(),l?(r.complete(),o.complete()):r.error(new Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){l=!0,n&&n.unsubscribe(),u&&(f(),s.close())}})}}),makeWebSocketObservable=unwrapExports(lib),lib_1=lib.normalClosureMessage;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty$1?_defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue;function mapValues(e,t){var r={};return t=_baseIteratee(t,3),_baseForOwn(e,function(e,n,o){_baseAssignValue(r,n,t(e,n,o))}),r}var mapValues_1=mapValues;function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var _arrayEach=arrayEach,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$a.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue;function copyObject(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],u=n?n(r[a],e[a],a,r,e):void 0;void 0===u&&(u=e[a]),o?_baseAssignValue(r,a,u):_assignValue(r,a,u)}return r}var _copyObject=copyObject;function baseAssign(e,t){return e&&_copyObject(t,keys_1(t),e)}var _baseAssign=baseAssign;function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn,objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$b.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn;function keysIn$1(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn$1;function baseAssignIn(e,t){return e&&_copyObject(t,keysIn_1(t),e)}var _baseAssignIn=baseAssignIn,_cloneBuffer=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?_root.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}});function copySymbols(e,t){return _copyObject(e,_getSymbols(e),t)}var _copySymbols=copySymbols,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(e){for(var t=[];e;)_arrayPush(t,_getSymbols(e)),e=_getPrototype(e);return t}:stubArray_1,_getSymbolsIn=getSymbolsIn;function copySymbolsIn(e,t){return _copyObject(e,_getSymbolsIn(e),t)}var _copySymbolsIn=copySymbolsIn;function getAllKeysIn(e){return _baseGetAllKeys(e,keysIn_1,_getSymbolsIn)}var _getAllKeysIn=getAllKeysIn,objectProto$e=Object.prototype,hasOwnProperty$c=objectProto$e.hasOwnProperty;function initCloneArray(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$c.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var _initCloneArray=initCloneArray;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer;function cloneDataView(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _cloneDataView=cloneDataView,reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var _cloneRegExp=cloneRegExp,symbolProto$2=_Symbol?_Symbol.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}var _cloneSymbol=cloneSymbol;function cloneTypedArray(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray,boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,t,r){var n=e.constructor;switch(t){case arrayBufferTag$2:return _cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new n(+e);case dataViewTag$3:return _cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return _cloneTypedArray(e,r);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(e);case regexpTag$2:return _cloneRegExp(e);case setTag$3:return new n;case symbolTag$2:return _cloneSymbol(e)}}var _initCloneByTag=initCloneByTag,objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject_1(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_baseCreate=baseCreate;function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}var _initCloneObject=initCloneObject,mapTag$4="[object Map]";function baseIsMap(e){return isObjectLike_1(e)&&_getTag(e)==mapTag$4}var _baseIsMap=baseIsMap,nodeIsMap=_nodeUtil&&_nodeUtil.isMap,isMap=nodeIsMap?_baseUnary(nodeIsMap):_baseIsMap,isMap_1=isMap,setTag$4="[object Set]";function baseIsSet(e){return isObjectLike_1(e)&&_getTag(e)==setTag$4}var _baseIsSet=baseIsSet,nodeIsSet=_nodeUtil&&_nodeUtil.isSet,isSet=nodeIsSet?_baseUnary(nodeIsSet):_baseIsSet,isSet_1=isSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(e,t,r,n,o,i){var s,a=t&CLONE_DEEP_FLAG,u=t&CLONE_FLAT_FLAG,c=t&CLONE_SYMBOLS_FLAG;if(r&&(s=o?r(e,n,o,i):r(e)),void 0!==s)return s;if(!isObject_1(e))return e;var l=isArray_1(e);if(l){if(s=_initCloneArray(e),!a)return _copyArray(e,s)}else{var f=_getTag(e),p=f==funcTag$2||f==genTag$1;if(isBuffer_1(e))return _cloneBuffer(e,a);if(f==objectTag$3||f==argsTag$3||p&&!o){if(s=u||p?{}:_initCloneObject(e),!a)return u?_copySymbolsIn(e,_baseAssignIn(s,e)):_copySymbols(e,_baseAssign(s,e))}else{if(!cloneableTags[f])return o?e:{};s=_initCloneByTag(e,f,a)}}i||(i=new _Stack);var h=i.get(e);if(h)return h;if(i.set(e,s),isSet_1(e))return e.forEach(function(n){s.add(baseClone(n,t,r,n,e,i))}),s;if(isMap_1(e))return e.forEach(function(n,o){s.set(o,baseClone(n,t,r,o,e,i))}),s;var _=c?u?_getAllKeysIn:_getAllKeys:u?keysIn:keys_1,d=l?void 0:_(e);return _arrayEach(d||e,function(n,o){d&&(n=e[o=n]),_assignValue(s,o,baseClone(n,t,r,o,e,i))}),s}cloneableTags[argsTag$3]=cloneableTags[arrayTag$2]=cloneableTags[arrayBufferTag$3]=cloneableTags[dataViewTag$4]=cloneableTags[boolTag$3]=cloneableTags[dateTag$3]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$5]=cloneableTags[numberTag$3]=cloneableTags[objectTag$3]=cloneableTags[regexpTag$3]=cloneableTags[setTag$5]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$3]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$2]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var _baseClone=baseClone;function last(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var last_1=last;function baseSlice(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}var _baseSlice=baseSlice;function parent(e,t){return t.length<2?e:_baseGet(e,_baseSlice(t,0,-1))}var _parent=parent;function baseUnset(e,t){return t=_castPath(t,e),null==(e=_parent(e,t))||delete e[_toKey(last_1(t))]}var _baseUnset=baseUnset,objectTag$4="[object Object]",funcProto$2=Function.prototype,objectProto$f=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$d=objectProto$f.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag$4)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$d.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject;function customOmitClone(e){return isPlainObject_1(e)?void 0:e}var _customOmitClone=customOmitClone;function flatten(e){return(null==e?0:e.length)?_baseFlatten(e,1):[]}var flatten_1=flatten;function flatRest(e){return _setToString(_overRest(e,void 0,flatten_1),e+"")}var _flatRest=flatRest,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,omit=_flatRest(function(e,t){var r={};if(null==e)return r;var n=!1;t=_arrayMap(t,function(t){return t=_castPath(t,e),n||(n=t.length>1),t}),_copyObject(e,_getAllKeysIn(e),r),n&&(r=_baseClone(r,CLONE_DEEP_FLAG$1|CLONE_FLAT_FLAG$1|CLONE_SYMBOLS_FLAG$1,_customOmitClone));for(var o=t.length;o--;)_baseUnset(r,t[o]);return r}),omit_1=omit;function assignMergeValue(e,t,r){(void 0===r||eq_1(e[t],r))&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignMergeValue=assignMergeValue;function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject;function safeGet(e,t){if("__proto__"!=t)return e[t]}var _safeGet=safeGet;function toPlainObject(e){return _copyObject(e,keysIn_1(e))}var toPlainObject_1=toPlainObject;function baseMergeDeep(e,t,r,n,o,i,s){var a=_safeGet(e,r),u=_safeGet(t,r),c=s.get(u);if(c)_assignMergeValue(e,r,c);else{var l=i?i(a,u,r+"",e,t,s):void 0,f=void 0===l;if(f){var p=isArray_1(u),h=!p&&isBuffer_1(u),_=!p&&!h&&isTypedArray_1(u);l=u,p||h||_?isArray_1(a)?l=a:isArrayLikeObject_1(a)?l=_copyArray(a):h?(f=!1,l=_cloneBuffer(u,!0)):_?(f=!1,l=_cloneTypedArray(u,!0)):l=[]:isPlainObject_1(u)||isArguments_1(u)?(l=a,isArguments_1(a)?l=toPlainObject_1(a):isObject_1(a)&&!isFunction_1(a)||(l=_initCloneObject(u))):f=!1}f&&(s.set(u,l),o(l,u,n,i,s),s.delete(u)),_assignMergeValue(e,r,l)}}var _baseMergeDeep=baseMergeDeep;function baseMerge(e,t,r,n,o){e!==t&&_baseFor(t,function(i,s){if(isObject_1(i))o||(o=new _Stack),_baseMergeDeep(e,t,s,r,baseMerge,n,o);else{var a=n?n(_safeGet(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),_assignMergeValue(e,s,a)}},keysIn_1)}var _baseMerge=baseMerge;function createAssigner(e){return _baseRest(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&_isIterateeCall(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t})}var _createAssigner=createAssigner,mergeWith=_createAssigner(function(e,t,r,n){_baseMerge(e,t,r,n)}),mergeWith_1=mergeWith,lib$1=createCommonjsModule(function(e,t){var r,n=commonjsGlobal&&commonjsGlobal.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queuedValues=[],t}return n(t,e),t.prototype.next=function(t){this.closed||this.observers.length?e.prototype.next.call(this,t):this.queuedValues.push(t)},t.prototype._subscribe=function(t){var r=this,n=e.prototype._subscribe.call(this,t);return this.queuedValues.length&&(this.queuedValues.forEach(function(t){return e.prototype.next.call(r,t)}),this.queuedValues.splice(0)),n},t}(_esm5.Subject);t.QueueingSubject=o});unwrapExports(lib$1);var lib_1$1=lib$1.QueueingSubject;_export(_export.P+_export.F*_fails(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=_toObject(this),r=_toPrimitive(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}});var floor$2=Math.floor,_isInteger=function(e){return!_isObject(e)&&isFinite(e)&&floor$2(e)===e};_export(_export.S,"Number",{isInteger:_isInteger});var meta=_meta.onFreeze;_objectSap("freeze",function(e){return function(t){return e&&_isObject(t)?e(meta(t)):t}});var aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}})}var base64_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),i=0;i<64;)o[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;r.encode=function(e,t,r){for(var o,i=null,s=[],a=0,u=0;t<r;){var c=e[t++];switch(u){case 0:s[a++]=n[c>>2],o=(3&c)<<4,u=1;break;case 1:s[a++]=n[o|c>>4],o=(15&c)<<2,u=2;break;case 2:s[a++]=n[o|c>>6],s[a++]=n[63&c],u=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=n[o],s[a++]=61,1===u&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};r.decode=function(e,t,r){for(var n,i=r,s=0,a=0;a<e.length;){var u=e.charCodeAt(a++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(s){case 0:n=u,s=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:t[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}}),eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter$1.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter$1.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this},_typedArray("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}}),_typedArray("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}});var float_1=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>3.4028234663852886e38)e((o<<31|2139095040)>>>0,r,n);else if(t<1.1754943508222875e-38)e((o<<31|Math.round(t/1.401298464324817e-45))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1.401298464324817e-45*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>1.7976931348623157e308)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<2.2250738585072014e-308)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(a=n*Math.pow(2,-u))>>>0,o,i+t),e((s<<31|u+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+i;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&o),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}}),pool_1=pool;function pool(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new LongBits(r,n)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule(function(e,t){var r=t;function n(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=aspromise,r.base64=base64_1,r.EventEmitter=eventemitter,r.float=float_1,r.inquire=inquire_1,r.utf8=utf8_1,r.pool=pool_1,r.LongBits=longbits,r.global="undefined"!=typeof window&&window||void 0!==commonjsGlobal&&commonjsGlobal||"undefined"!=typeof self&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"===_typeof(e)},r.isset=r.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==_typeof(r)||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},r.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop$1(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var r=Writer.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(e){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(e)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]};function writeStringBuffer(e,t,r){e.length<40?minimal.utf8.write(e,t,r):t.utf8Write(e,r)}BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},value;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e;var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))};var service=Service;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return minimal.asPromise(e,s,t,r,n,o);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return s.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof n))try{r=n[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),i(e)}return s.emit("data",r,t),i(null,r)}s.end(!0)})}catch(e){return s.emit("error",e,t),void setTimeout(function(){i(e)},0)}else setTimeout(function(){i(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,t){t.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,t){var r=t;function n(){r.Reader._configure(r.BufferReader),r.util._configure()}r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,r.configure=n,r.Writer._configure(r.BufferWriter),n()}),indexMinimal_1=indexMinimal.build,indexMinimal_2=indexMinimal.Writer,indexMinimal_3=indexMinimal.BufferWriter,indexMinimal_4=indexMinimal.Reader,indexMinimal_5=indexMinimal.BufferReader,indexMinimal_6=indexMinimal.util,indexMinimal_7=indexMinimal.rpc,indexMinimal_8=indexMinimal.roots,indexMinimal_9=indexMinimal.configure;indexMinimal_6.Long=long_1,indexMinimal_9();var $Reader=indexMinimal_4,$Writer=indexMinimal_2,$util=indexMinimal_6,$root=indexMinimal_8.default||(indexMinimal_8.default={});$root.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[23]="UserPastUri"]=23,t[e[10011]="UserJoinPasswordUri"]=10011,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[43]="UserHasGroupsListUri"]=43,t[e[44]="UserHasGroupsResultUri"]=44,t[e[45]="UserAllGroupsListUri"]=45,t[e[46]="UserAllGroupsResultUri"]=46,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[53]="GroupHasUsersListUri"]=53,t[e[54]="GroupHasUsersResultUri"]=54,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[61]="UserAttributeSetUri"]=61,t[e[62]="UserAttributeGetUri"]=62,t[e[63]="UserAttributeModUri"]=63,t[e[64]="UserAttributeDelUri"]=64,t[e[65]="UserAttributeResUri"]=65,t[e[66]="UserAttributeAltUri"]=66,t[e[71]="GroupAttributeSetUri"]=71,t[e[72]="GroupAttributeGetUri"]=72,t[e[73]="GroupAttributeResUri"]=73,t[e[74]="GroupAttributeAltUri"]=74,t[e[100]="RtmMessageUri"]=100,t[e[101]="AckUri"]=101,t}();var Wrapper$1=$root.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.uri=0,e.prototype.data=$util.newBuffer([]),e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.uri&&e.hasOwnProperty("uri")&&t.uint32(8).int32(e.uri),null!=e.data&&e.hasOwnProperty("data")&&t.uint32(18).bytes(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Wrapper;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.uri=e.int32();break;case 2:n.data=e.bytes();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==_typeof(e)||null===e)return"object expected";if(null!=e.uri&&e.hasOwnProperty("uri"))switch(e.uri){default:return"uri: enum value expected";case 0:case 1:case 2:case 11:case 12:case 21:case 22:case 23:case 10011:case 31:case 32:case 33:case 36:case 37:case 38:case 41:case 42:case 43:case 44:case 45:case 46:case 51:case 52:case 53:case 54:case 55:case 56:case 61:case 62:case 63:case 64:case 65:case 66:case 71:case 72:case 73:case 74:case 100:case 101:}return null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||$util.isString(e.data))?"data: buffer expected":null},e.fromObject=function(e){if(e instanceof $root.Wrapper)return e;var t=new $root.Wrapper;switch(e.uri){case"Unknown":case 0:t.uri=0;break;case"PingUri":case 1:t.uri=1;break;case"PongUri":case 2:t.uri=2;break;case"UserJoinUri":case 11:t.uri=11;break;case"UserRespUri":case 12:t.uri=12;break;case"UserQuitUri":case 21:t.uri=21;break;case"UserDropUri":case 22:t.uri=22;break;case"UserPastUri":case 23:t.uri=23;break;case"UserJoinPasswordUri":case 10011:t.uri=10011;break;case"GroupEnterUri":case 31:t.uri=31;break;case"GroupLeaveUri":case 32:t.uri=32;break;case"GroupReplyUri":case 33:t.uri=33;break;case"GroupEnterNoticeUri":case 36:t.uri=36;break;case"GroupLeaveNoticeUri":case 37:t.uri=37;break;case"GroupEventNoticeUri":case 38:t.uri=38;break;case"UserStatusListUri":case 41:t.uri=41;break;case"UserStatusResultUri":case 42:t.uri=42;break;case"UserHasGroupsListUri":case 43:t.uri=43;break;case"UserHasGroupsResultUri":case 44:t.uri=44;break;case"UserAllGroupsListUri":case 45:t.uri=45;break;case"UserAllGroupsResultUri":case 46:t.uri=46;break;case"GroupStatusListUri":case 51:t.uri=51;break;case"GroupStatusResultUri":case 52:t.uri=52;break;case"GroupHasUsersListUri":case 53:t.uri=53;break;case"GroupHasUsersResultUri":case 54:t.uri=54;break;case"GroupAllUsersListUri":case 55:t.uri=55;break;case"GroupAllUsersResultUri":case 56:t.uri=56;break;case"UserAttributeSetUri":case 61:t.uri=61;break;case"UserAttributeGetUri":case 62:t.uri=62;break;case"UserAttributeModUri":case 63:t.uri=63;break;case"UserAttributeDelUri":case 64:t.uri=64;break;case"UserAttributeResUri":case 65:t.uri=65;break;case"UserAttributeAltUri":case 66:t.uri=66;break;case"GroupAttributeSetUri":case 71:t.uri=71;break;case"GroupAttributeGetUri":case 72:t.uri=72;break;case"GroupAttributeResUri":case 73:t.uri=73;break;case"GroupAttributeAltUri":case 74:t.uri=74;break;case"RtmMessageUri":case 100:t.uri=100;break;case"AckUri":case 101:t.uri=101}return null!=e.data&&("string"==typeof e.data?$util.base64.decode(e.data,t.data=$util.newBuffer($util.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.uri=t.enums===String?"Unknown":0,t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=$util.newBuffer(r.data)))),null!=e.uri&&e.hasOwnProperty("uri")&&(r.uri=t.enums===String?$root.URI[e.uri]:e.uri),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?$util.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),Ping=$root.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&e.hasOwnProperty("ms")&&t.uint32(16).uint64(e.ms),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Ping;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.ms&&e.hasOwnProperty("ms")&&!($util.isInteger(e.ms)||e.ms&&$util.isInteger(e.ms.low)&&$util.isInteger(e.ms.high))?"ms: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.Ping)return e;var t=new $root.Ping;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.ms&&($util.Long?(t.ms=$util.Long.fromValue(e.ms)).unsigned=!0:"string"==typeof e.ms?t.ms=parseInt(e.ms,10):"number"==typeof e.ms?t.ms=e.ms:"object"===_typeof(e.ms)&&(t.ms=new $util.LongBits(e.ms.low>>>0,e.ms.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if($util.Long){var o=new $util.Long(0,0,!0);r.ms=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.ms=t.longs===String?"0":0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.ms&&e.hasOwnProperty("ms")&&("number"==typeof e.ms?r.ms=t.longs===String?String(e.ms):e.ms:r.ms=t.longs===String?$util.Long.prototype.toString.call(e.ms):t.longs===Number?new $util.LongBits(e.ms.low>>>0,e.ms.high>>>0).toNumber(!0):e.ms),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),Pong=$root.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&e.hasOwnProperty("ms")&&t.uint32(16).uint64(e.ms),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Pong;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.ms&&e.hasOwnProperty("ms")&&!($util.isInteger(e.ms)||e.ms&&$util.isInteger(e.ms.low)&&$util.isInteger(e.ms.high))?"ms: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.Pong)return e;var t=new $root.Pong;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.ms&&($util.Long?(t.ms=$util.Long.fromValue(e.ms)).unsigned=!0:"string"==typeof e.ms?t.ms=parseInt(e.ms,10):"number"==typeof e.ms?t.ms=e.ms:"object"===_typeof(e.ms)&&(t.ms=new $util.LongBits(e.ms.low>>>0,e.ms.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if($util.Long){var o=new $util.Long(0,0,!0);r.ms=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.ms=t.longs===String?"0":0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.ms&&e.hasOwnProperty("ms")&&("number"==typeof e.ms?r.ms=t.longs===String?String(e.ms):e.ms:r.ms=t.longs===String?$util.Long.prototype.toString.call(e.ms):t.longs===Number?new $util.LongBits(e.ms.low>>>0,e.ms.high>>>0).toNumber(!0):e.ms),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),UserJoin=$root.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.opt=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&e.hasOwnProperty("opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&e.hasOwnProperty("instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&e.hasOwnProperty("account")&&t.uint32(34).string(e.account),null!=e.ticket&&e.hasOwnProperty("ticket")&&t.uint32(42).string(e.ticket),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserJoin;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.opt=e.uint64();break;case 3:n.instance=e.uint64();break;case 4:n.account=e.string();break;case 5:n.ticket=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.opt&&e.hasOwnProperty("opt")&&!($util.isInteger(e.opt)||e.opt&&$util.isInteger(e.opt.low)&&$util.isInteger(e.opt.high))?"opt: integer|Long expected":null!=e.instance&&e.hasOwnProperty("instance")&&!($util.isInteger(e.instance)||e.instance&&$util.isInteger(e.instance.low)&&$util.isInteger(e.instance.high))?"instance: integer|Long expected":null!=e.account&&e.hasOwnProperty("account")&&!$util.isString(e.account)?"account: string expected":null!=e.ticket&&e.hasOwnProperty("ticket")&&!$util.isString(e.ticket)?"ticket: string expected":null},e.fromObject=function(e){if(e instanceof $root.UserJoin)return e;var t=new $root.UserJoin;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.opt&&($util.Long?(t.opt=$util.Long.fromValue(e.opt)).unsigned=!0:"string"==typeof e.opt?t.opt=parseInt(e.opt,10):"number"==typeof e.opt?t.opt=e.opt:"object"===_typeof(e.opt)&&(t.opt=new $util.LongBits(e.opt.low>>>0,e.opt.high>>>0).toNumber(!0))),null!=e.instance&&($util.Long?(t.instance=$util.Long.fromValue(e.instance)).unsigned=!0:"string"==typeof e.instance?t.instance=parseInt(e.instance,10):"number"==typeof e.instance?t.instance=e.instance:"object"===_typeof(e.instance)&&(t.instance=new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0))),null!=e.account&&(t.account=String(e.account)),null!=e.ticket&&(t.ticket=String(e.ticket)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if($util.Long){var o=new $util.Long(0,0,!0);r.opt=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.opt=t.longs===String?"0":0;if($util.Long){var i=new $util.Long(0,0,!0);r.instance=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.instance=t.longs===String?"0":0;r.account="",r.ticket=""}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.opt&&e.hasOwnProperty("opt")&&("number"==typeof e.opt?r.opt=t.longs===String?String(e.opt):e.opt:r.opt=t.longs===String?$util.Long.prototype.toString.call(e.opt):t.longs===Number?new $util.LongBits(e.opt.low>>>0,e.opt.high>>>0).toNumber(!0):e.opt),null!=e.instance&&e.hasOwnProperty("instance")&&("number"==typeof e.instance?r.instance=t.longs===String?String(e.instance):e.instance:r.instance=t.longs===String?$util.Long.prototype.toString.call(e.instance):t.longs===Number?new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0):e.instance),null!=e.account&&e.hasOwnProperty("account")&&(r.account=e.account),null!=e.ticket&&e.hasOwnProperty("ticket")&&(r.ticket=e.ticket),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),UserResp=$root.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&e.hasOwnProperty("account")&&t.uint32(18).string(e.account),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(24).uint32(e.code),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserResp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.account&&e.hasOwnProperty("account")&&!$util.isString(e.account)?"account: string expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null},e.fromObject=function(e){if(e instanceof $root.UserResp)return e;var t=new $root.UserResp;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.account&&(t.account=String(e.account)),null!=e.code&&(t.code=e.code>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;r.account="",r.code=0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.account&&e.hasOwnProperty("account")&&(r.account=e.account),null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),UserQuit=$root.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.encode=function(e,t){return t||(t=$Writer.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserQuit;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null},e.fromObject=function(e){return e instanceof $root.UserQuit?e:new $root.UserQuit},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),UserDrop=$root.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(8).uint32(e.code),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.UserDrop;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null},e.fromObject=function(e){if(e instanceof $root.UserDrop)return e;var t=new $root.UserDrop;return null!=e.code&&(t.code=e.code>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.code=0),null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupEnter=$root.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&e.hasOwnProperty("account")&&t.uint32(18).string(e.account),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupEnter;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.account&&e.hasOwnProperty("account")&&!$util.isString(e.account)?"account: string expected":null},e.fromObject=function(e){if(e instanceof $root.GroupEnter)return e;var t=new $root.GroupEnter;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.account&&(t.account=String(e.account)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;r.account=""}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.account&&e.hasOwnProperty("account")&&(r.account=e.account),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupLeave=$root.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.account&&e.hasOwnProperty("account")&&t.uint32(10).string(e.account),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupLeave;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.account=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.account&&e.hasOwnProperty("account")&&!$util.isString(e.account)?"account: string expected":null},e.fromObject=function(e){if(e instanceof $root.GroupLeave)return e;var t=new $root.GroupLeave;return null!=e.account&&(t.account=String(e.account)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.account=""),null!=e.account&&e.hasOwnProperty("account")&&(r.account=e.account),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupReply=$root.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&e.hasOwnProperty("account")&&t.uint32(18).string(e.account),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(24).uint32(e.code),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupReply;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.account&&e.hasOwnProperty("account")&&!$util.isString(e.account)?"account: string expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null},e.fromObject=function(e){if(e instanceof $root.GroupReply)return e;var t=new $root.GroupReply;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.account&&(t.account=String(e.account)),null!=e.code&&(t.code=e.code>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;r.account="",r.code=0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.account&&e.hasOwnProperty("account")&&(r.account=e.account),null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupLeaveNotice=$root.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&e.hasOwnProperty("user")&&t.uint32(18).string(e.user),null!=e.group&&e.hasOwnProperty("group")&&t.uint32(26).string(e.group),null!=e.instance&&e.hasOwnProperty("instance")&&t.uint32(32).uint64(e.instance),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupLeaveNotice;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.user&&e.hasOwnProperty("user")&&!$util.isString(e.user)?"user: string expected":null!=e.group&&e.hasOwnProperty("group")&&!$util.isString(e.group)?"group: string expected":null!=e.instance&&e.hasOwnProperty("instance")&&!($util.isInteger(e.instance)||e.instance&&$util.isInteger(e.instance.low)&&$util.isInteger(e.instance.high))?"instance: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.GroupLeaveNotice)return e;var t=new $root.GroupLeaveNotice;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.user&&(t.user=String(e.user)),null!=e.group&&(t.group=String(e.group)),null!=e.instance&&($util.Long?(t.instance=$util.Long.fromValue(e.instance)).unsigned=!0:"string"==typeof e.instance?t.instance=parseInt(e.instance,10):"number"==typeof e.instance?t.instance=e.instance:"object"===_typeof(e.instance)&&(t.instance=new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(r.user="",r.group="",$util.Long){var o=new $util.Long(0,0,!0);r.instance=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.instance=t.longs===String?"0":0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.user&&e.hasOwnProperty("user")&&(r.user=e.user),null!=e.group&&e.hasOwnProperty("group")&&(r.group=e.group),null!=e.instance&&e.hasOwnProperty("instance")&&("number"==typeof e.instance?r.instance=t.longs===String?String(e.instance):e.instance:r.instance=t.longs===String?$util.Long.prototype.toString.call(e.instance):t.longs===Number?new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0):e.instance),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupEnterNotice=$root.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&e.hasOwnProperty("user")&&t.uint32(18).string(e.user),null!=e.group&&e.hasOwnProperty("group")&&t.uint32(26).string(e.group),null!=e.instance&&e.hasOwnProperty("instance")&&t.uint32(32).uint64(e.instance),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupEnterNotice;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.user&&e.hasOwnProperty("user")&&!$util.isString(e.user)?"user: string expected":null!=e.group&&e.hasOwnProperty("group")&&!$util.isString(e.group)?"group: string expected":null!=e.instance&&e.hasOwnProperty("instance")&&!($util.isInteger(e.instance)||e.instance&&$util.isInteger(e.instance.low)&&$util.isInteger(e.instance.high))?"instance: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.GroupEnterNotice)return e;var t=new $root.GroupEnterNotice;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.user&&(t.user=String(e.user)),null!=e.group&&(t.group=String(e.group)),null!=e.instance&&($util.Long?(t.instance=$util.Long.fromValue(e.instance)).unsigned=!0:"string"==typeof e.instance?t.instance=parseInt(e.instance,10):"number"==typeof e.instance?t.instance=e.instance:"object"===_typeof(e.instance)&&(t.instance=new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(r.user="",r.group="",$util.Long){var o=new $util.Long(0,0,!0);r.instance=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.instance=t.longs===String?"0":0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.user&&e.hasOwnProperty("user")&&(r.user=e.user),null!=e.group&&e.hasOwnProperty("group")&&(r.group=e.group),null!=e.instance&&e.hasOwnProperty("instance")&&("number"==typeof e.instance?r.instance=t.longs===String?String(e.instance):e.instance:r.instance=t.longs===String?$util.Long.prototype.toString.call(e.instance):t.longs===Number?new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0):e.instance),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),RtmMessage=$root.RtmMessage=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.dialogue=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.sequence=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.options=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=$util.newBuffer([]),e.prototype.MiscMap=$util.emptyObject,e.prototype.ms=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.instance&&e.hasOwnProperty("instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&e.hasOwnProperty("dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&e.hasOwnProperty("sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&e.hasOwnProperty("options")&&t.uint32(32).uint64(e.options),null!=e.src&&e.hasOwnProperty("src")&&t.uint32(42).string(e.src),null!=e.dst&&e.hasOwnProperty("dst")&&t.uint32(50).string(e.dst),null!=e.payload&&e.hasOwnProperty("payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&e.hasOwnProperty("MiscMap"))for(var r=Object.keys(e.MiscMap),n=0;n<r.length;++n)t.uint32(66).fork().uint32(10).string(r[n]).uint32(18).string(e.MiscMap[r[n]]).ldelim();return null!=e.ms&&e.hasOwnProperty("ms")&&t.uint32(72).uint64(e.ms),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,n=void 0===t?e.len:e.pos+t,o=new $root.RtmMessage;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:e.skip().pos++,o.MiscMap===$util.emptyObject&&(o.MiscMap={}),r=e.string(),e.pos++,o.MiscMap[r]=e.string();break;case 9:o.ms=e.uint64();break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==_typeof(e)||null===e)return"object expected";if(null!=e.instance&&e.hasOwnProperty("instance")&&!($util.isInteger(e.instance)||e.instance&&$util.isInteger(e.instance.low)&&$util.isInteger(e.instance.high)))return"instance: integer|Long expected";if(null!=e.dialogue&&e.hasOwnProperty("dialogue")&&!($util.isInteger(e.dialogue)||e.dialogue&&$util.isInteger(e.dialogue.low)&&$util.isInteger(e.dialogue.high)))return"dialogue: integer|Long expected";if(null!=e.sequence&&e.hasOwnProperty("sequence")&&!($util.isInteger(e.sequence)||e.sequence&&$util.isInteger(e.sequence.low)&&$util.isInteger(e.sequence.high)))return"sequence: integer|Long expected";if(null!=e.options&&e.hasOwnProperty("options")&&!($util.isInteger(e.options)||e.options&&$util.isInteger(e.options.low)&&$util.isInteger(e.options.high)))return"options: integer|Long expected";if(null!=e.src&&e.hasOwnProperty("src")&&!$util.isString(e.src))return"src: string expected";if(null!=e.dst&&e.hasOwnProperty("dst")&&!$util.isString(e.dst))return"dst: string expected";if(null!=e.payload&&e.hasOwnProperty("payload")&&!(e.payload&&"number"==typeof e.payload.length||$util.isString(e.payload)))return"payload: buffer expected";if(null!=e.MiscMap&&e.hasOwnProperty("MiscMap")){if(!$util.isObject(e.MiscMap))return"MiscMap: object expected";for(var t=Object.keys(e.MiscMap),r=0;r<t.length;++r)if(!$util.isString(e.MiscMap[t[r]]))return"MiscMap: string{k:string} expected"}return null!=e.ms&&e.hasOwnProperty("ms")&&!($util.isInteger(e.ms)||e.ms&&$util.isInteger(e.ms.low)&&$util.isInteger(e.ms.high))?"ms: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.RtmMessage)return e;var t=new $root.RtmMessage;if(null!=e.instance&&($util.Long?(t.instance=$util.Long.fromValue(e.instance)).unsigned=!0:"string"==typeof e.instance?t.instance=parseInt(e.instance,10):"number"==typeof e.instance?t.instance=e.instance:"object"===_typeof(e.instance)&&(t.instance=new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0))),null!=e.dialogue&&($util.Long?(t.dialogue=$util.Long.fromValue(e.dialogue)).unsigned=!0:"string"==typeof e.dialogue?t.dialogue=parseInt(e.dialogue,10):"number"==typeof e.dialogue?t.dialogue=e.dialogue:"object"===_typeof(e.dialogue)&&(t.dialogue=new $util.LongBits(e.dialogue.low>>>0,e.dialogue.high>>>0).toNumber(!0))),null!=e.sequence&&($util.Long?(t.sequence=$util.Long.fromValue(e.sequence)).unsigned=!0:"string"==typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"==typeof e.sequence?t.sequence=e.sequence:"object"===_typeof(e.sequence)&&(t.sequence=new $util.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber(!0))),null!=e.options&&($util.Long?(t.options=$util.Long.fromValue(e.options)).unsigned=!0:"string"==typeof e.options?t.options=parseInt(e.options,10):"number"==typeof e.options?t.options=e.options:"object"===_typeof(e.options)&&(t.options=new $util.LongBits(e.options.low>>>0,e.options.high>>>0).toNumber(!0))),null!=e.src&&(t.src=String(e.src)),null!=e.dst&&(t.dst=String(e.dst)),null!=e.payload&&("string"==typeof e.payload?$util.base64.decode(e.payload,t.payload=$util.newBuffer($util.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),e.MiscMap){if("object"!==_typeof(e.MiscMap))throw TypeError(".RtmMessage.MiscMap: object expected");t.MiscMap={};for(var r=Object.keys(e.MiscMap),n=0;n<r.length;++n)t.MiscMap[r[n]]=String(e.MiscMap[r[n]])}return null!=e.ms&&($util.Long?(t.ms=$util.Long.fromValue(e.ms)).unsigned=!0:"string"==typeof e.ms?t.ms=parseInt(e.ms,10):"number"==typeof e.ms?t.ms=e.ms:"object"===_typeof(e.ms)&&(t.ms=new $util.LongBits(e.ms.low>>>0,e.ms.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r,n={};if((t.objects||t.defaults)&&(n.MiscMap={}),t.defaults){if($util.Long){var o=new $util.Long(0,0,!0);n.instance=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.instance=t.longs===String?"0":0;if($util.Long){var i=new $util.Long(0,0,!0);n.dialogue=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.dialogue=t.longs===String?"0":0;if($util.Long){var s=new $util.Long(0,0,!0);n.sequence=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.sequence=t.longs===String?"0":0;if($util.Long){var a=new $util.Long(0,0,!0);n.options=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else n.options=t.longs===String?"0":0;if(n.src="",n.dst="",t.bytes===String?n.payload="":(n.payload=[],t.bytes!==Array&&(n.payload=$util.newBuffer(n.payload))),$util.Long){var u=new $util.Long(0,0,!0);n.ms=t.longs===String?u.toString():t.longs===Number?u.toNumber():u}else n.ms=t.longs===String?"0":0}if(null!=e.instance&&e.hasOwnProperty("instance")&&("number"==typeof e.instance?n.instance=t.longs===String?String(e.instance):e.instance:n.instance=t.longs===String?$util.Long.prototype.toString.call(e.instance):t.longs===Number?new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0):e.instance),null!=e.dialogue&&e.hasOwnProperty("dialogue")&&("number"==typeof e.dialogue?n.dialogue=t.longs===String?String(e.dialogue):e.dialogue:n.dialogue=t.longs===String?$util.Long.prototype.toString.call(e.dialogue):t.longs===Number?new $util.LongBits(e.dialogue.low>>>0,e.dialogue.high>>>0).toNumber(!0):e.dialogue),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"==typeof e.sequence?n.sequence=t.longs===String?String(e.sequence):e.sequence:n.sequence=t.longs===String?$util.Long.prototype.toString.call(e.sequence):t.longs===Number?new $util.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber(!0):e.sequence),null!=e.options&&e.hasOwnProperty("options")&&("number"==typeof e.options?n.options=t.longs===String?String(e.options):e.options:n.options=t.longs===String?$util.Long.prototype.toString.call(e.options):t.longs===Number?new $util.LongBits(e.options.low>>>0,e.options.high>>>0).toNumber(!0):e.options),null!=e.src&&e.hasOwnProperty("src")&&(n.src=e.src),null!=e.dst&&e.hasOwnProperty("dst")&&(n.dst=e.dst),null!=e.payload&&e.hasOwnProperty("payload")&&(n.payload=t.bytes===String?$util.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),e.MiscMap&&(r=Object.keys(e.MiscMap)).length){n.MiscMap={};for(var c=0;c<r.length;++c)n.MiscMap[r[c]]=e.MiscMap[r[c]]}return null!=e.ms&&e.hasOwnProperty("ms")&&("number"==typeof e.ms?n.ms=t.longs===String?String(e.ms):e.ms:n.ms=t.longs===String?$util.Long.prototype.toString.call(e.ms):t.longs===Number?new $util.LongBits(e.ms.low>>>0,e.ms.high>>>0).toNumber(!0):e.ms),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),Ack=$root.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.instance=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.dialogue=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.sequence=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.instance&&e.hasOwnProperty("instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&e.hasOwnProperty("dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&e.hasOwnProperty("sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&e.hasOwnProperty("code")&&t.uint32(32).uint32(e.code),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.Ack;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.instance=e.uint64();break;case 2:n.dialogue=e.uint64();break;case 3:n.sequence=e.uint64();break;case 4:n.code=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.instance&&e.hasOwnProperty("instance")&&!($util.isInteger(e.instance)||e.instance&&$util.isInteger(e.instance.low)&&$util.isInteger(e.instance.high))?"instance: integer|Long expected":null!=e.dialogue&&e.hasOwnProperty("dialogue")&&!($util.isInteger(e.dialogue)||e.dialogue&&$util.isInteger(e.dialogue.low)&&$util.isInteger(e.dialogue.high))?"dialogue: integer|Long expected":null!=e.sequence&&e.hasOwnProperty("sequence")&&!($util.isInteger(e.sequence)||e.sequence&&$util.isInteger(e.sequence.low)&&$util.isInteger(e.sequence.high))?"sequence: integer|Long expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null},e.fromObject=function(e){if(e instanceof $root.Ack)return e;var t=new $root.Ack;return null!=e.instance&&($util.Long?(t.instance=$util.Long.fromValue(e.instance)).unsigned=!0:"string"==typeof e.instance?t.instance=parseInt(e.instance,10):"number"==typeof e.instance?t.instance=e.instance:"object"===_typeof(e.instance)&&(t.instance=new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0))),null!=e.dialogue&&($util.Long?(t.dialogue=$util.Long.fromValue(e.dialogue)).unsigned=!0:"string"==typeof e.dialogue?t.dialogue=parseInt(e.dialogue,10):"number"==typeof e.dialogue?t.dialogue=e.dialogue:"object"===_typeof(e.dialogue)&&(t.dialogue=new $util.LongBits(e.dialogue.low>>>0,e.dialogue.high>>>0).toNumber(!0))),null!=e.sequence&&($util.Long?(t.sequence=$util.Long.fromValue(e.sequence)).unsigned=!0:"string"==typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"==typeof e.sequence?t.sequence=e.sequence:"object"===_typeof(e.sequence)&&(t.sequence=new $util.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber(!0))),null!=e.code&&(t.code=e.code>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.instance=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.instance=t.longs===String?"0":0;if($util.Long){var o=new $util.Long(0,0,!0);r.dialogue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.dialogue=t.longs===String?"0":0;if($util.Long){var i=new $util.Long(0,0,!0);r.sequence=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.sequence=t.longs===String?"0":0;r.code=0}return null!=e.instance&&e.hasOwnProperty("instance")&&("number"==typeof e.instance?r.instance=t.longs===String?String(e.instance):e.instance:r.instance=t.longs===String?$util.Long.prototype.toString.call(e.instance):t.longs===Number?new $util.LongBits(e.instance.low>>>0,e.instance.high>>>0).toNumber(!0):e.instance),null!=e.dialogue&&e.hasOwnProperty("dialogue")&&("number"==typeof e.dialogue?r.dialogue=t.longs===String?String(e.dialogue):e.dialogue:r.dialogue=t.longs===String?$util.Long.prototype.toString.call(e.dialogue):t.longs===Number?new $util.LongBits(e.dialogue.low>>>0,e.dialogue.high>>>0).toNumber(!0):e.dialogue),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"==typeof e.sequence?r.sequence=t.longs===String?String(e.sequence):e.sequence:r.sequence=t.longs===String?$util.Long.prototype.toString.call(e.sequence):t.longs===Number?new $util.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber(!0):e.sequence),null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupAllUsersList=$root.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&e.hasOwnProperty("group")&&t.uint32(18).string(e.group),null!=e.pageSize&&e.hasOwnProperty("pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&e.hasOwnProperty("pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAllUsersList;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.pageSize=e.uint32();break;case 4:n.pageNumber=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high))?"seq: integer|Long expected":null!=e.group&&e.hasOwnProperty("group")&&!$util.isString(e.group)?"group: string expected":null!=e.pageSize&&e.hasOwnProperty("pageSize")&&!$util.isInteger(e.pageSize)?"pageSize: integer expected":null!=e.pageNumber&&e.hasOwnProperty("pageNumber")&&!$util.isInteger(e.pageNumber)?"pageNumber: integer expected":null},e.fromObject=function(e){if(e instanceof $root.GroupAllUsersList)return e;var t=new $root.GroupAllUsersList;return null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.group&&(t.group=String(e.group)),null!=e.pageSize&&(t.pageSize=e.pageSize>>>0),null!=e.pageNumber&&(t.pageNumber=e.pageNumber>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;r.group="",r.pageSize=0,r.pageNumber=0}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.group&&e.hasOwnProperty("group")&&(r.group=e.group),null!=e.pageSize&&e.hasOwnProperty("pageSize")&&(r.pageSize=e.pageSize),null!=e.pageNumber&&e.hasOwnProperty("pageNumber")&&(r.pageNumber=e.pageNumber),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),GroupAllUsersResult=$root.GroupAllUsersResult=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.users=$util.emptyArray,e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.seq&&e.hasOwnProperty("seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&e.hasOwnProperty("group")&&t.uint32(18).string(e.group),null!=e.totalSize&&e.hasOwnProperty("totalSize")&&t.uint32(24).uint32(e.totalSize),null!=e.pageSize&&e.hasOwnProperty("pageSize")&&t.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&e.hasOwnProperty("pageNumber")&&t.uint32(40).uint32(e.pageNumber),null!=e.users&&e.users.length)for(var r=0;r<e.users.length;++r)$root.GroupAllUsersResult.GroupUserInfo.encode(e.users[r],t.uint32(50).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAllUsersResult;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.totalSize=e.uint32();break;case 4:n.pageSize=e.uint32();break;case 5:n.pageNumber=e.uint32();break;case 6:n.users&&n.users.length||(n.users=[]),n.users.push($root.GroupAllUsersResult.GroupUserInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==_typeof(e)||null===e)return"object expected";if(null!=e.seq&&e.hasOwnProperty("seq")&&!($util.isInteger(e.seq)||e.seq&&$util.isInteger(e.seq.low)&&$util.isInteger(e.seq.high)))return"seq: integer|Long expected";if(null!=e.group&&e.hasOwnProperty("group")&&!$util.isString(e.group))return"group: string expected";if(null!=e.totalSize&&e.hasOwnProperty("totalSize")&&!$util.isInteger(e.totalSize))return"totalSize: integer expected";if(null!=e.pageSize&&e.hasOwnProperty("pageSize")&&!$util.isInteger(e.pageSize))return"pageSize: integer expected";if(null!=e.pageNumber&&e.hasOwnProperty("pageNumber")&&!$util.isInteger(e.pageNumber))return"pageNumber: integer expected";if(null!=e.users&&e.hasOwnProperty("users")){if(!Array.isArray(e.users))return"users: array expected";for(var t=0;t<e.users.length;++t){var r=$root.GroupAllUsersResult.GroupUserInfo.verify(e.users[t]);if(r)return"users."+r}}return null},e.fromObject=function(e){if(e instanceof $root.GroupAllUsersResult)return e;var t=new $root.GroupAllUsersResult;if(null!=e.seq&&($util.Long?(t.seq=$util.Long.fromValue(e.seq)).unsigned=!0:"string"==typeof e.seq?t.seq=parseInt(e.seq,10):"number"==typeof e.seq?t.seq=e.seq:"object"===_typeof(e.seq)&&(t.seq=new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.group&&(t.group=String(e.group)),null!=e.totalSize&&(t.totalSize=e.totalSize>>>0),null!=e.pageSize&&(t.pageSize=e.pageSize>>>0),null!=e.pageNumber&&(t.pageNumber=e.pageNumber>>>0),e.users){if(!Array.isArray(e.users))throw TypeError(".GroupAllUsersResult.users: array expected");t.users=[];for(var r=0;r<e.users.length;++r){if("object"!==_typeof(e.users[r]))throw TypeError(".GroupAllUsersResult.users: object expected");t.users[r]=$root.GroupAllUsersResult.GroupUserInfo.fromObject(e.users[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.users=[]),t.defaults){if($util.Long){var n=new $util.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;r.group="",r.totalSize=0,r.pageSize=0,r.pageNumber=0}if(null!=e.seq&&e.hasOwnProperty("seq")&&("number"==typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?$util.Long.prototype.toString.call(e.seq):t.longs===Number?new $util.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.group&&e.hasOwnProperty("group")&&(r.group=e.group),null!=e.totalSize&&e.hasOwnProperty("totalSize")&&(r.totalSize=e.totalSize),null!=e.pageSize&&e.hasOwnProperty("pageSize")&&(r.pageSize=e.pageSize),null!=e.pageNumber&&e.hasOwnProperty("pageNumber")&&(r.pageNumber=e.pageNumber),e.users&&e.users.length){r.users=[];for(var o=0;o<e.users.length;++o)r.users[o]=$root.GroupAllUsersResult.GroupUserInfo.toObject(e.users[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e.GroupUserInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.account&&e.hasOwnProperty("account")&&t.uint32(10).string(e.account),null!=e.ts&&e.hasOwnProperty("ts")&&t.uint32(16).uint32(e.ts),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.GroupAllUsersResult.GroupUserInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.account=e.string();break;case 2:n.ts=e.uint32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==_typeof(e)||null===e?"object expected":null!=e.account&&e.hasOwnProperty("account")&&!$util.isString(e.account)?"account: string expected":null!=e.ts&&e.hasOwnProperty("ts")&&!$util.isInteger(e.ts)?"ts: integer expected":null},e.fromObject=function(e){if(e instanceof $root.GroupAllUsersResult.GroupUserInfo)return e;var t=new $root.GroupAllUsersResult.GroupUserInfo;return null!=e.account&&(t.account=String(e.account)),null!=e.ts&&(t.ts=e.ts>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.account="",r.ts=0),null!=e.account&&e.hasOwnProperty("account")&&(r.account=e.account),null!=e.ts&&e.hasOwnProperty("ts")&&(r.ts=e.ts),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,indexMinimal_6.toJSONOptions)},e}(),e}(),ProtoPackets=Object.freeze({Wrapper:Wrapper$1,Ping:Ping,Pong:Pong,UserJoin:UserJoin,UserResp:UserResp,UserQuit:UserQuit,UserDrop:UserDrop,GroupEnter:GroupEnter,GroupLeave:GroupLeave,GroupReply:GroupReply,GroupLeaveNotice:GroupLeaveNotice,GroupEnterNotice:GroupEnterNotice,RtmMessage:RtmMessage,Ack:Ack,GroupAllUsersList:GroupAllUsersList,GroupAllUsersResult:GroupAllUsersResult,default:$root});function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var URI=$root.URI,Wrapper$2=Wrapper$1,PacketsAndURI=_objectWithoutProperties(ProtoPackets,["Wrapper"]),Packets=omit_1(PacketsAndURI,"URI"),nameToUri=function(e){var t="".concat(e,"Uri"),r=URI[t];if("number"!=typeof r||0===r)throw new TypeError("Got Unknown URI Name");return r};function uriToPacketName(e){return URI[e].slice(0,-3)}function getWrappedByName(e,t){var r=nameToUri(e),n=Packets[e],o=n.verify(t);if(null!==o)throw new TypeError(o);var i=new n(t),s=n.encode(i).finish();return new Wrapper$2({uri:r,data:s})}function baseClamp(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}var _baseClamp=baseClamp,INFINITY$2=1/0,MAX_INTEGER=1.7976931348623157e308;function toFinite(e){return e?(e=toNumber_1(e))===INFINITY$2||e===-INFINITY$2?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}var toFinite_1=toFinite;function toInteger(e){var t=toFinite_1(e),r=t%1;return t==t?r?t-r:t:0}var toInteger_1=toInteger;function startsWith(e,t,r){return e=toString_1(e),r=null==r?0:_baseClamp(toInteger_1(r),0,e.length),t=_baseToString(t),e.slice(r,r+t.length)==t}var startsWith_1=startsWith;function isValidAppId(e){return/^[a-zA-Z0-9]{32}$/.test(e)}function isValidId(e){return"string"==typeof e&&/^[a-zA-Z0-9!#$%&()+-:;<=.>?@[\]^_{}|~,\s]{1,64}$/.test(e)&&!startsWith_1(e," ")&&"null"!==e}function isValidIp(e){var t;try{t=e.split(".").map(function(e){return Number(e)})}catch(e){return!1}if(4!==t.length)return!1;if(0===t[0])return!1;for(var r=0;r<t.length;r++){var n=t[r];if(!Number.isInteger(n))return!1;if(n<0||n>255)return!1}return!0}function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),r&&_defineProperties$2(e,r),e}function _possibleConstructorReturn$4(e,t){return!t||"object"!==_typeof$4(t)&&"function"!=typeof t?_assertThisInitialized$4(e):t}function _getPrototypeOf$4(e){return(_getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized$4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits$4(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$4(e,t)}function _setPrototypeOf$4(e,t){return(_setPrototypeOf$4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SocketError=genError(),Socket=function(e){function t(e,r,n,o){var i;if(_classCallCheck$4(this,t),(i=_possibleConstructorReturn$4(this,_getPrototypeOf$4(t).call(this,o,uniquePrefixedId("Socket-",o.loggerId)))).ip=e,i.env=r,i.ticket=n,i.isSpoil=!1,i.isReconnecting=!1,i.open$=void 0,i.attempsSinceLastError=0,i.input$=new lib_1$1,i.socket$=void 0,i.toClose=new Subject,0!==r&&1!==r)throw new SocketError({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!isValidIp(e))throw new SocketError({IP_NOT_VALID:"The ip from ap is not valid"});var s=EDGE_ENV_PORT[r],a=getEdgeDomain(e),u="wss://".concat(a,":").concat(s);i.log('Opening websocket address "%s" for the Env %d',i.ip,i.env);var c=i.input$.pipe(map(function(e){if(!isSymbol_1(e)&&e instanceof Wrapper$1)return Wrapper$1.encode(e).finish();throw new SocketError({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"})}));return i.socket$=makeWebSocketObservable(u,{protocols:[],makeWebSocket:function(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t}}).pipe(map(function(e){return e(c).pipe(map(function(e){return Wrapper$1.decode(new Uint8Array(e))}))}),i.socketReconnector.bind(_assertThisInitialized$4(i))),i.open$=i.socket$.pipe(tap(function(e){i.log("Websocket opened",i.name),e.subscribe(function(e){var t=e.data,r=uriToPacketName(e.uri),n=Packets[r].decode(t),o=mergeWith_1({},omit_1(n,"toJSON"),function(e,t){return t instanceof long_1?longToStringIfNeeded(t):t}),s=!1;(n instanceof GroupEnterNotice||n instanceof GroupLeaveNotice)&&(n.instance.lessThanOrEqual(UINT32_MAX)&&(s=!0));if(n instanceof RtmMessage||n instanceof Ack){var a=n.instance,u=n.dialogue,c=n.sequence;(u.lessThanOrEqual(UINT32_MAX)||a.lessThanOrEqual(UINT32_MAX)||c.lessThan(1))&&(s=!0)}s?i.warn("{%d} Illegal %s, abandoned %o",i.env,r,o):("Pong"!==r&&i.genLogger("RTM:MSG:RECV")("Env_%d: %s %o",i.env,r,o),i.emit(r,n))},function(){})}),mapTo(void 0),takeUntil(i.toClose),share()),i}return _inherits$4(t,createEventBase()),_createClass$2(t,[{key:"sendPacket",value:function(e,t){if("Ping"!==e){var r=mapValues_1(t,function(e){return e instanceof long_1?longToStringIfNeeded(e):e});this.genLogger("RTM:MSG:SEND")("Env_%d: %s %o",this.env,e,r)}this.input$.next(getWrappedByName(e,t))}},{key:"forceReconnect",value:function(){this.log("{%d} Force reconnect the socket",this.env),this.input$.next(t.reconnectSymbol)}},{key:"close",value:function(){this.toClose.next()}},{key:"fromSocketReceived",value:function(e){return fromEvent(this,e)}},{key:"socketReconnector",value:function(e){var t=this,r=function(e){return t.attempsSinceLastError+=1,t.warn("The %s of Env %d reconnecting %s",t.name,t.env,e.message),timer((t.attempsSinceLastError-1)*SOCKET_RETRY_INTERVAL)};return e.pipe(catchError(function(e){return t.isSpoil?EMPTY:(t.isReconnecting=!0,t.emit("reconnect"),throwError(e))}),retryWhen(function(e){return e.pipe(switchMap(r))}),tap(function(){t.isReconnecting=!1,t.attempsSinceLastError=0}))}}]),t}();function _typeof$5(e){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$4(e){return _arrayWithoutHoles$4(e)||_iterableToArray$4(e)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$4(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$4(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$3(e,t,r){return t&&_defineProperties$3(e.prototype,t),r&&_defineProperties$3(e,r),e}function _possibleConstructorReturn$5(e,t){return!t||"object"!==_typeof$5(t)&&"function"!=typeof t?_assertThisInitialized$5(e):t}function _assertThisInitialized$5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf$5(e){return(_getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$5(e,t)}function _setPrototypeOf$5(e,t){return(_setPrototypeOf$5=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Socket.reconnectSymbol=Symbol("reconnect");var ConnectionError=genError(),Connection=function(e){function t(e,r){var n;_classCallCheck$5(this,t),(n=_possibleConstructorReturn$5(this,_getPrototypeOf$5(t).call(this,r,"Connection"))).context=e,n.lastOpenSockets=[new ReplaySubject(1),new ReplaySubject(1)],n.curOpenSockets=[void 0,void 0],n.socketOpeners=[void 0,void 0],n.openKeeperSubjects=[new Subject,new Subject],n.openKeeperSubs=[void 0,void 0],n.apClient=new AccessPoint(n.context,n.logger),n.edgeInfoPool=[];var o=n.apClient.apEdgeInfo$.pipe(throwIfEmpty(function(){return new ConnectionError({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),filter(function(e){return!some_1(n.edgeInfoPool,e)}),tap(function(e){n.edgeInfoPool.push(e),n.log("An edge info got %o",e)}),shareReplay()),i="",s=Math.random()>=.5?1:0,a=1===s?0:1,u=o.pipe(mergeMap(function(e){var t=e.ip,n=e.ticket,o=new Socket(t,s,n,r);return o.open$.pipe(mapTo(o))}),tap(function(e){n.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,EDGE_ENV_PORT[e.env]),n.curOpenSockets[s]=e,n.lastOpenSockets[s].next(e),i=e.ip}),first(),share()),c=o.pipe(reduce(function(e,t){return[].concat(_toConsumableArray$4(e),[t])},[]),map(function(e){return sortBy_1(e,function(e){var t=e.ip;return calIpDistance(i,t)}).slice(-1)[0]}),first(),mergeMap(function(e){var t=e.ip,o=e.ticket,i=new Socket(t,a,o,r);return i.open$.pipe(tap(function(){n.lastOpenSockets[a].next(i),n.curOpenSockets[a]=i}))}),share());return n.socketOpeners[s]=u.pipe(mergeMap(function(e){return e.open$.pipe(tap(function(){n.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,EDGE_ENV_PORT[e.env]),n.curOpenSockets[s]=e,n.lastOpenSockets[s].next(e)}))})),n.socketOpeners[a]=concat(u.pipe(skipLast(1),mapTo(void 0)),c),n.openKeeperSubjects.forEach(function(e,t){var r=e.pipe(switchAll());n.openKeeperSubs[t]=r.subscribe({error:n.error})}),n}return _inherits$5(t,createEventBase()),_createClass$3(t,[{key:"initConnection",value:function(){var e=this;this.openKeeperSubjects.forEach(function(t,r){t.next(e.socketOpeners[r])})}},{key:"closeSocket",value:function(e){if(![0,1].includes(e))throw new CommonError({INVALID_ENV:"The env argument is not 0 or 1"});var t=this.openKeeperSubs[e];if(void 0===t)throw new Error("no socket opener subscription");t.unsubscribe(),this.openKeeperSubs[e]=void 0,this.curOpenSockets[e]=void 0}},{key:"waitClosing",value:function(e){var t=this;return e.isSpoil=!0,e.open$.pipe(ignoreElements(),catchError(function(e){return e.message===lib_1?EMPTY:throwError(e)}),timeout(LOGOUT_SOCKET_CLOSE_TIMEOUT),catchError(function(r){return r instanceof TimeoutError?(t.closeSocket(e.env),t.warn("Force closing the ENV_%d conneciton",e.env),EMPTY):throwError(r)}))}}]),t}();function _typeof$6(e){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$4(e,t,r){return t&&_defineProperties$4(e.prototype,t),r&&_defineProperties$4(e,r),e}function _possibleConstructorReturn$6(e,t){return!t||"object"!==_typeof$6(t)&&"function"!=typeof t?_assertThisInitialized$6(e):t}function _assertThisInitialized$6(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf$6(e){return(_getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$6(e,t)}function _setPrototypeOf$6(e,t){return(_setPrototypeOf$6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Context=function(e){function t(e,r){var n;return _classCallCheck$6(this,t),(n=_possibleConstructorReturn$6(this,_getPrototypeOf$6(t).call(this,r,"Context"))).appId=e,n.uid=void 0,n.token=void 0,n}return _inherits$6(t,createEventBase()),_createClass$4(t,[{key:"setToken",value:function(e){if(this.log("The token is set to %s",e),"string"!=typeof e||!e)throw new Error("set invalid token");this.token=e}},{key:"setUid",value:function(e){if(this.log('The user ID is set to "%s"',e),!isValidId(e))throw new Error("set invalid uid");this.uid=e}},{key:"getUid",value:function(){if("string"==typeof this.uid&&this.uid)return this.uid;throw new Error("no available uid")}},{key:"getKey",value:function(){if("string"==typeof this.token&&this.token)return this.token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Error("no available key")}}]),t}();function compact(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var i=e[t];i&&(o[n++]=i)}return o}var compact_1=compact,isArrayLike$2=function(e){return null!=e&&"function"!=typeof e&&void 0!==e.length};_typedArray("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),_typedArray("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),_typedArray("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),_typedArray("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0);var compare=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},OBJP=Object.getPrototypeOf({}),FN="function",STR="string",equiv=function(e,t){var r;return e===t||(null==e?e==t:_typeof(e.equiv)===FN?e.equiv(t):null==t?e==t:_typeof(t.equiv)===FN?t.equiv(e):_typeof(e)!==STR&&_typeof(t)!==STR&&(null!=(r=Object.getPrototypeOf(e))&&r!==OBJP||null!=(r=Object.getPrototypeOf(t))&&r!==OBJP?_typeof(e)!==FN&&void 0!==e.length&&_typeof(t)!==FN&&void 0!==t.length?equivArrayLike(e,t):e instanceof Set&&t instanceof Set?equivSet(e,t):e instanceof Map&&t instanceof Map?equivMap(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:equivObject(e,t)))},equivArrayLike=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv,n=e.length;if(n===t.length)for(;--n>=0&&r(e[n],t[n]););return n<0},equivSet=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv;return e.size===t.size&&r(_toConsumableArray(e.keys()).sort(),_toConsumableArray(t.keys()).sort())},equivMap=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv;return e.size===t.size&&r(_toConsumableArray(e).sort(),_toConsumableArray(t).sort())},equivObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:equiv;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!t.hasOwnProperty(n)||!r(e[n],t[n]))return!1;return!0},IllegalArgumentError=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"illegal argument(s)"+(void 0!==e?": "+e:"")))}return _inherits(t,_wrapNativeSuper(Error)),t}(),illegalArgs=function(e){throw new IllegalArgumentError(e)},IllegalArityError=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"illegal arity: ".concat(e)))}return _inherits(t,_wrapNativeSuper(Error)),t}(),IllegalStateError=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"illegal state"+(void 0!==e?": "+e:"")))}return _inherits(t,_wrapNativeSuper(Error)),t}(),illegalState=function(e){throw new IllegalStateError(e)},UnsupportedOperationError=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"unsupported operation"+(void 0!==e?": "+e:"")))}return _inherits(t,_wrapNativeSuper(Error)),t}(),EVENT_ALL="*",EVENT_ENABLE="enable",EVENT_DISABLE="disable",SEMAPHORE=Symbol(),NO_OP=function(){},assert="undefined"==typeof process||"production"!==process.env.NODE_ENV||"1"===process.env.UMBRELLA_ASSERTS?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assertion failed";if("function"==typeof e&&!e()||!e)throw new Error(t)}:NO_OP,mixin=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Reflect.ownKeys(e),n=Reflect.ownKeys(t),o=Symbol("isa");function i(t){var n=!0,i=!1,s=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value,l=Object.getOwnPropertyDescriptor(t.prototype,c);!l||l.configurable?Object.defineProperty(t.prototype,c,{value:e[c],writable:!0}):console.log("not patching: ".concat(t.name,".").concat(c.toString()))}}catch(e){i=!0,s=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw s}}return Object.defineProperty(t.prototype,o,{value:!0}),t}var s=!0,a=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var f=c.value;Object.defineProperty(i,f,{value:t[f],enumerable:t.propertyIsEnumerable(f)})}}catch(e){a=!0,u=e}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}return Object.defineProperty(i,Symbol.hasInstance,{value:function(e){return!!e[o]}}),i},meta$1=_meta.onFreeze;_objectSap("seal",function(e){return function(t){return e&&_isObject(t)?e(meta$1(t)):t}});var IEnableMixin=mixin({_enabled:!0,isEnabled:function(){return this._enabled},enable:function(){this._enabled=!0,this.notify&&this.notify({id:EVENT_ENABLE,target:this})},disable:function(){this._enabled=!1,this.notify&&this.notify({id:EVENT_DISABLE,target:this})},toggle:function(){return this._enabled?this.disable():this.enable(),this._enabled}}),inotify_dispatch=function(e,t){if(e)for(var r,n=0,o=e.length;n<o;n++)if((r=e[n])[0].call(r[1],t),t.canceled)return},INotifyMixin=mixin({addListener:function(e,t,r){var n=(this._listeners=this._listeners||{})[e];return n||(n=this._listeners[e]=[]),-1===this.__listener(n,t,r)&&(n.push([t,r]),!0)},removeListener:function(e,t,r){if(!this._listeners)return!1;var n=this._listeners[e];if(n){var o=this.__listener(n,t,r);if(-1!==o)return n.splice(o,1),!0}return!1},notify:function(e){this._listeners&&(void 0===e.target&&(e.target=this),inotify_dispatch(this._listeners[e.id],e),inotify_dispatch(this._listeners[EVENT_ALL],e))},__listener:function(e,t,r){for(var n=e.length;--n>=0;){var o=e[n];if(o[0]===t&&o[1]===r)break}return n}}),IWatchMixin=mixin({addWatch:function(e,t){return this._watches=this._watches||{},!this._watches[e]&&(this._watches[e]=t,!0)},removeWatch:function(e){if(this._watches)return!!this._watches[e]&&(delete this._watches[e],!0)},notifyWatches:function(e,t){if(this._watches){var r=this._watches;for(var n in r)r[n](n,e,t)}}}),Reduced=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"deref",value:function(){return this.value}}]),e}(),isReduced=function(e){return e instanceof Reduced},unreduced=function(e){return e instanceof Reduced?e.deref():e},_marked2=regeneratorRuntime.mark(iterator1);function iterator1(e,t){var r,n,o,i,s,a,u,c;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=e([null,null,function(e,t){return t}])[2],n=!0,o=!1,i=void 0,l.prev=4,s=t[Symbol.iterator]();case 6:if(n=(a=s.next()).done){l.next=21;break}if(u=a.value,c=r(SEMAPHORE,u),!isReduced(c)){l.next=15;break}if((c=unreduced(c.deref()))===SEMAPHORE){l.next=14;break}return l.next=14,c;case 14:return l.abrupt("return");case 15:if(c===SEMAPHORE){l.next=18;break}return l.next=18,c;case 18:n=!0,l.next=6;break;case 21:l.next=27;break;case 23:l.prev=23,l.t0=l.catch(4),o=!0,i=l.t0;case 27:l.prev=27,l.prev=28,n||null==s.return||s.return();case 30:if(l.prev=30,!o){l.next=33;break}throw i;case 33:return l.finish(30);case 34:return l.finish(27);case 35:case"end":return l.stop()}},_marked2,null,[[4,23,27,35],[28,,30,34]])}var compR=function(e,t){return[e[0],e[1],t]};function map$1(e,t){return t?iterator1(map$1(e),t):function(t){var r=t[2];return compR(t,function(t,n){return r(t,e(n))})}}function partial(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],i=r[1],s=r[2],a=r[3],u=r[4],c=r[5],l=r[6],f=r[7];switch(r.length){case 1:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o].concat(r))};case 2:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i].concat(r))};case 3:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i,s].concat(r))};case 4:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i,s,a].concat(r))};case 5:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i,s,a,u].concat(r))};case 6:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i,s,a,u,c].concat(r))};case 7:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i,s,a,u,c,l].concat(r))};case 8:return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(void 0,[o,i,s,a,u,c,l,f].concat(r))};default:illegalArgs()}}var foo=partial(function(e,t){return e+t},"a"),INV_MAX=1/4294967295,ARandom=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"float",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.int()*INV_MAX*e}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.int()*INV_MAX*e*2-e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}},{key:"gaussian",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-.5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=0,o=e;o-- >0;)n+=this.float(r);return n/e+t}}]),e}(),random=Math.random,SystemRandom=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,ARandom),_createClass(t,[{key:"int",value:function(){return 4294967295*random()>>>0}},{key:"float",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return random()*e}}]),t}(),SYSTEM=new SystemRandom;_export(_export.P,"Array",{fill:_arrayFill}),_addToUnscopables("fill");var DCons=function(){function e(t){_classCallCheck(this,e),this._length=0,t&&this.into(t)}return _createClass(e,[{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){if(this._length<e._length)return-1;if(this._length>e._length)return 1;for(var t=this.head,r=e.head,n=0;t&&0==n;)n=compare(t.value,r.value),t=t.next,r=r.next;return n}},{key:"equiv",value:function(t){if((t instanceof e||isArrayLike$2(t))&&this._length===t.length){var r=this.head,n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(!equiv(r.value,u))return!1;r=r.next}}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return!0}return!1}},{key:Symbol.iterator,value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}},e,this)})},{key:"cycle",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}},e,this)})},{key:"$reduce",value:function(e,t){for(var r=this.head;r&&!isReduced(t);)t=e(t,r.value),r=r.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return this.head=e.next,this.head?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){var t={value:e,next:this.head};return this.head?this.head.prev=t:this.tail=t,this.head=t,this._length++,this}},{key:"insertBefore",value:function(e,t){e||illegalArgs("cell is undefined");var r={value:t,next:e,prev:e.prev};return e.prev?e.prev.next=r:this.head=r,e.prev=r,this._length++,this}},{key:"insertAfter",value:function(e,t){e||illegalArgs("cell is undefined");var r={value:t,next:e.next,prev:e};return e.next?e.next.prev=r:this.tail=r,e.next=r,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){return e<0&&(e+=this._length),e<=0?this.cons(t):this.insertBefore(this.nthCell(e),t)}},{key:"insertAfterNth",value:function(e,t){return e<0&&(e+=this._length),e>=this._length-1?this.push(t):this.insertAfter(this.nthCell(e),t)}},{key:"insertSorted",value:function(e,t){t=t||compare;for(var r=this.head;r;){if(t(e,r.value)<=0)return this.insertBefore(r,e);r=r.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var o=r,i=0;i<o.length;i++){var s=o[i];e.into(s)}return e}},{key:"into",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;this.push(s)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=t<0?t+this._length:t,o=r<0?r+this._length:r;(n<0||o<0)&&illegalArgs("invalid indices: ${from} / ${to}");for(var i=new e,s=this.nthCell(n);s&&++n<=o;)i.push(s.value),s=s.next;return i}},{key:"splice",value:function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;"number"==typeof t?(t<0&&(t+=this._length),r=this.nthCell(t)):r=t;var i=new e;if(n>0)for(;r&&n-- >0;)this.remove(r),i.push(r.value),r=r.next;else r&&(r=r.next);if(o)if(r){var s=!0,a=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var f=c.value;this.insertBefore(r,f)}}catch(e){a=!0,u=e}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}}else{var p=!0,h=!1,_=void 0;try{for(var d,g=o[Symbol.iterator]();!(p=(d=g.next()).done);p=!0){var b=d.value;this.push(b)}}catch(e){h=!0,_=e}finally{try{p||null==g.return||g.return()}finally{if(h)throw _}}}return i}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var r=e.value;e.value=t.value,t.value=r}return this}},{key:"push",value:function(e){if(this.tail){var t={value:e,prev:this.tail};return this.tail.next=t,this.tail=t,this._length++,this}return this.cons(e)}},{key:"pop",value:function(){var e=this.tail;return!e&&illegalState("can't pop, empty"),this.tail=e.prev,this.tail?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var r=this.nthCell(e);return!r&&illegalArgs("index out of bounds: ".concat(e)),r.value=t,this}},{key:"nth",value:function(e,t){var r=this.nthCell(e);return r?r.value:t}},{key:"nthCell",value:function(e){if(e<0&&(e+=this._length),!(e<0||e>=this._length)){var t,r;for(e<=this._length>>1?(t=this.head,r="next"):(t=this.tail,r="prev",e=this._length-e-1);e-- >0&&t;)t=t[r];return t}}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var r=new e,n=this.head;n;)r.push(t(n.value)),n=n.next;return r}},{key:"filter",value:function(t){for(var r=new e,n=this.head;n;)t(n.value)&&r.push(n.value),n=n.next;return r}},{key:"reduce",value:function(e,t){for(var r=t,n=this.head;n;)r=e(r,n.value),n=n.next;return r}},{key:"shuffle",value:function(){for(var e=this._length,t=this.tail;e>0;){var r=Math.floor(Math.random()*e);this.swap(this.nthCell(r),t),t=t.prev,e--}return this}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,r=(this._length>>>1)+(1&this._length);e&&t&&r>0;){var n=e.value;e.value=t.value,t.value=n,e=e.next,t=t.prev,r--}return this}},{key:"asHead",value:function(e){return e===this.head?this:(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++,this)}},{key:"asTail",value:function(e){return e===this.tail?this:(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++,this)}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(null!=t.value?t.value.toString():void 0===t.value?"undefined":"null"),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return _toConsumableArray(this)}},{key:"length",get:function(){return this._length}}]),e}(),LRUCache=function(){function e(t,r){_classCallCheck(this,e);var n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},r);this.map=n.map(),this.items=new DCons,this._size=0,this.opts=n,t&&this.into(t)}return _createClass(e,[{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return map$1(function(e){return[e.k,e]},this.items)}},{key:"keys",value:function(){return map$1(function(e){return e.k},this.items)}},{key:"values",value:function(){return map$1(function(e){return e.v},this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){var r=this.map.get(e);return r?this.resetEntry(r):t}},{key:"set",value:function(e,t){var r=this.opts.ksize(e)+this.opts.vsize(t),n=this.map.get(e);return n&&(this._size-=n.value.s),this._size+=r,this.ensureSize()&&(n?(n.value.v=t,n.value.s=r,this.items.asTail(n)):(this.items.push({k:e,v:t,s:r}),this.map.set(e,this.items.tail))),t}},{key:"into",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;this.set(s[0],s[1])}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return this}},{key:"getSet",value:function(e,t){var r=this,n=this.map.get(e);return n?Promise.resolve(this.resetEntry(n)):t().then(function(t){return r.set(e,t)})}},{key:"delete",value:function(e){var t=this.map.get(e);return!!t&&(this.removeEntry(t),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,r=this.opts.maxlen;this._size>t||this.length>=r;){var n=this.items.drop();if(!n)return!1;this.map.delete(n.k),e&&e(n.k,n.v),this._size-=n.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}}]),e}(),TLRUCache=function(e){function t(e,r){return _classCallCheck(this,t),r=Object.assign({ttl:36e5},r),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))}return _inherits(t,LRUCache),_createClass(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){var r=this.map.get(e);if(r){if(r.value.t>=Date.now())return this.resetEntry(r);this.removeEntry(r)}return t}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,n=this.opts.ksize(e)+this.opts.vsize(t),o=this.map.get(e);if(o&&(this._size-=o.value.s),this._size+=n,this.ensureSize()){var i=Date.now()+r;o?(o.value.v=t,o.value.s=n,o.value.t=i,this.items.asTail(o)):(this.items.push({k:e,v:t,s:n,t:i}),this.map.set(e,this.items.tail))}return t}},{key:"getSet",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,o=this.get(e);return o?Promise.resolve(o):t().then(function(t){return r.set(e,t,n)})}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,r=this.opts.maxlen,n=Date.now(),o=this.items.head;o&&(this._size>e||this.length>=r);)o.value.t<n&&this.removeEntry(o),o=o.next;return _get(_getPrototypeOf(t.prototype),"ensureSize",this).call(this)}}]),t}(),common$1=createCommonjsModule(function(e,t){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==_typeof(r))throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(e[o]=r[o])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),o);else for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){var t,r,n,o,i,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),o=0,t=0,r=e.length;t<r;t++)i=e[t],s.set(i,o),o+=i.length;return s}},i={arraySet:function(e,t,r,n,o){for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)}),common_1=common$1.assign,common_2=common$1.shrinkBuf,common_3=common$1.setTyped,common_4=common$1.Buf8,common_5=common$1.Buf16,common_6=common$1.Buf32,Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero$1(static_ltree);var static_dtree=new Array(2*D_CODES);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES);zero$1(base_length);var base_dist=new Array(D_CODES),static_l_desc,static_d_desc,static_bl_desc;function StaticTreeDesc(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,r){e.bi_valid>Buf_size-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=r-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function send_code(e,t,r){send_bits(e,r[2*t],r[2*t+1])}function bi_reverse(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var r,n,o,i,s,a,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,_=t.stat_desc.max_length,d=0;for(i=0;i<=MAX_BITS;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<HEAP_SIZE;r++)(i=u[2*u[2*(n=e.heap[r])+1]+1]+1)>_&&(i=_,d++),u[2*n+1]=i,n>c||(e.bl_count[i]++,s=0,n>=h&&(s=p[n-h]),a=u[2*n],e.opt_len+=a*(i+s),f&&(e.static_len+=a*(l[2*n+1]+s)));if(0!==d){do{for(i=_-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[_]--,d-=2}while(d>0);for(i=_;0!==i;i--)for(n=e.bl_count[i];0!==n;)(o=e.heap[--r])>c||(u[2*o+1]!==i&&(e.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),n--)}}function gen_codes(e,t,r){var n,o,i=new Array(MAX_BITS+1),s=0;for(n=1;n<=MAX_BITS;n++)i[n]=s=s+r[n-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=bi_reverse(i[a]++,a))}}function tr_static_init(){var e,t,r,n,o,i=new Array(MAX_BITS+1);for(r=0,n=0;n<LENGTH_CODES-1;n++)for(base_length[n]=r,e=0;e<1<<extra_lbits[n];e++)_length_code[r++]=n;for(_length_code[r-1]=n,o=0,n=0;n<16;n++)for(base_dist[n]=o,e=0;e<1<<extra_dbits[n];e++)_dist_code[o++]=n;for(o>>=7;n<D_CODES;n++)for(base_dist[n]=o<<7,e=0;e<1<<extra_dbits[n]-7;e++)_dist_code[256+o++]=n;for(t=0;t<=MAX_BITS;t++)i[t]=0;for(e=0;e<=143;)static_ltree[2*e+1]=8,e++,i[8]++;for(;e<=255;)static_ltree[2*e+1]=9,e++,i[9]++;for(;e<=279;)static_ltree[2*e+1]=7,e++,i[7]++;for(;e<=287;)static_ltree[2*e+1]=8,e++,i[8]++;for(gen_codes(static_ltree,L_CODES+1,i),e=0;e<D_CODES;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D_CODES;t++)e.dyn_dtree[2*t]=0;for(t=0;t<BL_CODES;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,r,n){bi_windup(e),n&&(put_short(e,r),put_short(e,~r)),common$1.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function smaller(e,t,r,n){var o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]}function pqdownheap(e,t,r){for(var n=e.heap[r],o=r<<1;o<=e.heap_len&&(o<e.heap_len&&smaller(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!smaller(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n}function compress_block(e,t,r){var n,o,i,s,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],o=e.pending_buf[e.l_buf+a],a++,0===n?send_code(e,o,t):(send_code(e,(i=_length_code[o])+LITERALS+1,t),0!==(s=extra_lbits[i])&&send_bits(e,o-=base_length[i],s),send_code(e,i=d_code(--n),r),0!==(s=extra_dbits[i])&&send_bits(e,n-=base_dist[i],s))}while(a<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var r,n,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)pqdownheap(e,i,r);o=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*o]=i[2*r]+i[2*n],e.depth[o]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=o,e.heap[1]=o++,pqdownheap(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(i,c,e.bl_count)}function scan_tree(e,t,r){var n,o,i=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=t[2*(n+1)+1],++a<u&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*REP_3_6]++):a<=10?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4))}function send_tree(e,t,r){var n,o,i=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(o=s,s=t[2*(n+1)+1],!(++a<u&&o===s)){if(a<c)do{send_code(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(send_code(e,o,e.bl_tree),a--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,a-3,2)):a<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,a-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,a-11,7));a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES-1;t>=3&&0===e.bl_tree[2*bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,r,n){var o;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,n-4,4),o=0;o<n;o++)send_bits(e,e.bl_tree[2*bl_order[o]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)}function detect_data_type(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(t=32;t<LITERALS;t++)if(0!==e.dyn_ltree[2*t])return Z_TEXT;return Z_BINARY}zero$1(base_dist);var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,r,n){send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3),copy_block(e,t,r,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,r,n){var o,i,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=r+5,r+4<=o&&-1!==t?_tr_stored_block(e,t,r,n):e.strategy===Z_FIXED||i===o?(send_bits(e,(STATIC_TREES<<1)+(n?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),n&&bi_windup(e)}function _tr_tally(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_length_code[r]+LITERALS+1)]++,e.dyn_dtree[2*d_code(t)]++),e.last_lit===e.lit_bufsize-1}var _tr_init_1=_tr_init,_tr_stored_block_1=_tr_stored_block,_tr_flush_block_1=_tr_flush_block,_tr_tally_1=_tr_tally,_tr_align_1=_tr_align,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};function adler32(e,t,r,n){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{i=i+(o=o+t[n++]|0)|0}while(--s);o%=65521,i%=65521}return o|i<<16|0}var adler32_1=adler32;function makeTable(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}var crcTable=makeTable();function crc32(e,t,r,n){var o=crcTable,i=n+r;e^=-1;for(var s=n;s<i;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED$1=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN$1=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,MIN_MATCH$1=3,MAX_MATCH$1=258,MIN_LOOKAHEAD=MAX_MATCH$1+MIN_MATCH$1+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,configuration_table;function err(e,t){return e.msg=messages[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero$2(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(common$1.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function flush_block_only(e,t){trees._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function read_buf(e,t,r,n){var o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,common$1.arraySet(t,e.input,e.next_in,o,r),1===e.state.wrap?e.adler=adler32_1(e.adler,t,o,r):2===e.state.wrap&&(e.adler=crc32_1(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)}function longest_match(e,t){var r,n,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,c=e.window,l=e.w_mask,f=e.prev,p=e.strstart+MAX_MATCH$1,h=c[i+s-1],_=c[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+s]===_&&c[r+s-1]===h&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<p);if(n=MAX_MATCH$1-(p-i),i=p-MAX_MATCH$1,n>s){if(e.match_start=t,s=n,n>=a)break;h=c[i+s-1],_=c[i+s]}}}while((t=f[t&l])>u&&0!=--o);return s<=e.lookahead?s:e.lookahead}function fill_window(e){var t,r,n,o,i,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-MIN_LOOKAHEAD)){common$1.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--r);t=r=s;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--r);o+=s}if(0===e.strm.avail_in)break;if(r=read_buf(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=MIN_MATCH$1)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+MIN_MATCH$1-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH$1)););}while(e.lookahead<MIN_LOOKAHEAD&&0!==e.strm.avail_in)}function deflate_stored(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),0===e.lookahead&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE;if(e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out),BS_NEED_MORE)}function deflate_fast(e,t){for(var r,n;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r)),e.match_length>=MIN_MATCH$1)if(n=trees._tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH$1){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var r,n,o;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH$1&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH$1-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH$1&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH$1-1)),e.prev_length>=MIN_MATCH$1&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-MIN_MATCH$1,n=trees._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH$1),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH$1-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=MIN_MATCH$1-1,e.strstart++,n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}else if(e.match_available){if((n=trees._tr_tally(e,0,e.window[e.strstart-1]))&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=trees._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH$1-1?e.strstart:MIN_MATCH$1-1,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var r,n,o,i,s=e.window;;){if(e.lookahead<=MAX_MATCH$1){if(fill_window(e),e.lookahead<=MAX_MATCH$1&&t===Z_NO_FLUSH)return BS_NEED_MORE;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=MIN_MATCH$1&&e.strstart>0&&(n=s[o=e.strstart-1])===s[++o]&&n===s[++o]&&n===s[++o]){i=e.strstart+MAX_MATCH$1;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<i);e.match_length=MAX_MATCH$1-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH$1?(r=trees._tr_tally(e,1,e.match_length-MIN_MATCH$1),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var r;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===Z_NO_FLUSH)return BS_NEED_MORE;break}if(e.match_length=0,r=trees._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}function lm_init(e){e.window_size=2*e.w_size,zero$2(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH$1-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new common$1.Buf16(2*HEAP_SIZE$1),this.dyn_dtree=new common$1.Buf16(2*(2*D_CODES$1+1)),this.bl_tree=new common$1.Buf16(2*(2*BL_CODES$1+1)),zero$2(this.dyn_ltree),zero$2(this.dyn_dtree),zero$2(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new common$1.Buf16(MAX_BITS$1+1),this.heap=new common$1.Buf16(2*L_CODES$1+1),zero$2(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new common$1.Buf16(2*L_CODES$1+1),zero$2(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=2===t.wrap?0:1,t.last_flush=Z_NO_FLUSH,trees._tr_init(t),Z_OK):err(e,Z_STREAM_ERROR)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK&&lm_init(e.state),t}function deflateSetHeader(e,t){return e&&e.state?2!==e.state.wrap?Z_STREAM_ERROR:(e.state.gzhead=t,Z_OK):Z_STREAM_ERROR}function deflateInit2(e,t,r,n,o,i){if(!e)return Z_STREAM_ERROR;var s=1;if(t===Z_DEFAULT_COMPRESSION&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>MAX_MEM_LEVEL||r!==Z_DEFLATED||n<8||n>15||t<0||t>9||i<0||i>Z_FIXED$1)return err(e,Z_STREAM_ERROR);8===n&&(n=9);var a=new DeflateState;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+MIN_MATCH$1-1)/MIN_MATCH$1),a.window=new common$1.Buf8(2*a.w_size),a.head=new common$1.Buf16(a.hash_size),a.prev=new common$1.Buf16(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new common$1.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,deflateReset(e)}function deflateInit(e,t){return deflateInit2(e,t,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(e,t){var r,n,o,i;if(!e||!e.state||t>Z_BLOCK||t<0)return e?err(e,Z_STREAM_ERROR):Z_STREAM_ERROR;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===FINISH_STATE&&t!==Z_FINISH)return err(e,0===e.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===INIT_STATE)if(2===n.wrap)e.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead?(put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,255&n.gzhead.time),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,255&n.gzhead.extra.length),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE):(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,9===n.level?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE);else{var s=Z_DEFLATED+(n.w_bits-8<<4)<<8;s|=(n.strategy>=Z_HUFFMAN_ONLY||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=PRESET_DICT),s+=31-s%31,n.status=BUSY_STATE,putShortMSB(n,s),0!==n.strstart&&(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),e.adler=1}if(n.status===EXTRA_STATE)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>o&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-o,o)),flush_pending(e),o=n.pending,n.pending!==n.pending_buf_size));)put_byte(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=NAME_STATE)}else n.status=NAME_STATE;if(n.status===NAME_STATE)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-o,o)),flush_pending(e),o=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,put_byte(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>o&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-o,o)),0===i&&(n.gzindex=0,n.status=COMMENT_STATE)}else n.status=COMMENT_STATE;if(n.status===COMMENT_STATE)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-o,o)),flush_pending(e),o=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,put_byte(n,i)}while(0!==i);n.gzhead.hcrc&&n.pending>o&&(e.adler=crc32_1(e.adler,n.pending_buf,n.pending-o,o)),0===i&&(n.status=HCRC_STATE)}else n.status=HCRC_STATE;if(n.status===HCRC_STATE&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&flush_pending(e),n.pending+2<=n.pending_buf_size&&(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),e.adler=0,n.status=BUSY_STATE)):n.status=BUSY_STATE),0!==n.pending){if(flush_pending(e),0===e.avail_out)return n.last_flush=-1,Z_OK}else if(0===e.avail_in&&rank(t)<=rank(r)&&t!==Z_FINISH)return err(e,Z_BUF_ERROR);if(n.status===FINISH_STATE&&0!==e.avail_in)return err(e,Z_BUF_ERROR);if(0!==e.avail_in||0!==n.lookahead||t!==Z_NO_FLUSH&&n.status!==FINISH_STATE){var a=n.strategy===Z_HUFFMAN_ONLY?deflate_huff(n,t):n.strategy===Z_RLE?deflate_rle(n,t):configuration_table[n.level].func(n,t);if(a!==BS_FINISH_STARTED&&a!==BS_FINISH_DONE||(n.status=FINISH_STATE),a===BS_NEED_MORE||a===BS_FINISH_STARTED)return 0===e.avail_out&&(n.last_flush=-1),Z_OK;if(a===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?trees._tr_align(n):t!==Z_BLOCK&&(trees._tr_stored_block(n,0,0,!1),t===Z_FULL_FLUSH&&(zero$2(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(e),0===e.avail_out))return n.last_flush=-1,Z_OK}return t!==Z_FINISH?Z_OK:n.wrap<=0?Z_STREAM_END:(2===n.wrap?(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),put_byte(n,e.adler>>16&255),put_byte(n,e.adler>>24&255),put_byte(n,255&e.total_in),put_byte(n,e.total_in>>8&255),put_byte(n,e.total_in>>16&255),put_byte(n,e.total_in>>24&255)):(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),flush_pending(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Z_OK:Z_STREAM_END)}function deflateEnd(e){var t;return e&&e.state?(t=e.state.status)!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR):Z_OK):Z_STREAM_ERROR}function deflateSetDictionary(e,t){var r,n,o,i,s,a,u,c,l=t.length;if(!e||!e.state)return Z_STREAM_ERROR;if(2===(i=(r=e.state).wrap)||1===i&&r.status!==INIT_STATE||r.lookahead)return Z_STREAM_ERROR;for(1===i&&(e.adler=adler32_1(e.adler,t,l,0)),r.wrap=0,l>=r.w_size&&(0===i&&(zero$2(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new common$1.Buf8(r.w_size),common$1.arraySet(c,t,l-r.w_size,r.w_size,0),t=c,l=r.w_size),s=e.avail_in,a=e.next_in,u=e.input,e.avail_in=l,e.next_in=0,e.input=t,fill_window(r);r.lookahead>=MIN_MATCH$1;){n=r.strstart,o=r.lookahead-(MIN_MATCH$1-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+MIN_MATCH$1-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=MIN_MATCH$1-1,fill_window(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=MIN_MATCH$1-1,r.match_available=0,e.next_in=a,e.input=u,e.avail_in=s,r.wrap=i,Z_OK}configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2=deflate,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo},STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(e){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new common$1.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){var t,r,n,o,i,s=e.length,a=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new common$1.Buf8(a),i=0,o=0;i<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t};function buf2binstring(e,t){if(t<65534&&(e.subarray&&STR_APPLY_UIA_OK||!e.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,common$1.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}var buf2binstring_1=function(e){return buf2binstring(e,e.length)},binstring2buf=function(e){for(var t=new common$1.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},buf2string=function(e,t){var r,n,o,i,s=t||e.length,a=new Array(2*s);for(n=0,r=0;r<s;)if((o=e[r++])<128)a[n++]=o;else if((i=_utf8len[o])>4)a[n++]=65533,r+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&r<s;)o=o<<6|63&e[r++],i--;i>1?a[n++]=65533:o<65536?a[n++]=o:(o-=65536,a[n++]=55296|o>>10&1023,a[n++]=56320|1023&o)}return buf2binstring(a,n)},utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2binstring:buf2binstring_1,binstring2buf:binstring2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,toString$3=Object.prototype.toString,Z_NO_FLUSH$1=0,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_SYNC_FLUSH=2,Z_DEFAULT_COMPRESSION$1=-1,Z_DEFAULT_STRATEGY$1=0,Z_DEFLATED$1=8;function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION$1,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY$1,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=deflate_1.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$1)throw new Error(messages[r]);if(t.header&&deflate_1.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(n="string"==typeof t.dictionary?strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$3.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=deflate_1.deflateSetDictionary(this.strm,n))!==Z_OK$1)throw new Error(messages[r]);this._dict_set=!0}}function deflate$1(e,t){var r=new Deflate(t);if(r.push(e,!0),r.err)throw r.msg||messages[r.err];return r.result}function deflateRaw(e,t){return(t=t||{}).raw=!0,deflate$1(e,t)}function gzip(e,t){return(t=t||{}).gzip=!0,deflate$1(e,t)}Deflate.prototype.push=function(e,t){var r,n,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?Z_FINISH$1:Z_NO_FLUSH$1,"string"==typeof e?o.input=strings.string2buf(e):"[object ArrayBuffer]"===toString$3.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new common$1.Buf8(i),o.next_out=0,o.avail_out=i),(r=deflate_1.deflate(o,n))!==Z_STREAM_END$1&&r!==Z_OK$1)return this.onEnd(r),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||n!==Z_FINISH$1&&n!==Z_SYNC_FLUSH)||("string"===this.options.to?this.onData(strings.buf2binstring(common$1.shrinkBuf(o.output,o.next_out))):this.onData(common$1.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&r!==Z_STREAM_END$1);return n===Z_FINISH$1?(r=deflate_1.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Z_OK$1):n!==Z_SYNC_FLUSH||(this.onEnd(Z_OK$1),o.avail_out=0,!0)},Deflate.prototype.onData=function(e){this.chunks.push(e)},Deflate.prototype.onEnd=function(e){e===Z_OK$1&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Deflate_1=Deflate,deflate_2$1=deflate$1,deflateRaw_1=deflateRaw,gzip_1=gzip,deflate_1$1={Deflate:Deflate_1,deflate:deflate_2$1,deflateRaw:deflateRaw_1,gzip:gzip_1},BAD=30,TYPE=12,inffast=function(e,t){var r,n,o,i,s,a,u,c,l,f,p,h,_,d,g,b,y,m,v,E,S,w,O,T,$;r=e.state,n=e.next_in,T=e.input,o=n+(e.avail_in-5),i=e.next_out,$=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,p=r.window,h=r.hold,_=r.bits,d=r.lencode,g=r.distcode,b=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{_<15&&(h+=T[n++]<<_,_+=8,h+=T[n++]<<_,_+=8),m=d[h&b];t:for(;;){if(h>>>=v=m>>>24,_-=v,0===(v=m>>>16&255))$[i++]=65535&m;else{if(!(16&v)){if(0==(64&v)){m=d[(65535&m)+(h&(1<<v)-1)];continue t}if(32&v){r.mode=TYPE;break e}e.msg="invalid literal/length code",r.mode=BAD;break e}E=65535&m,(v&=15)&&(_<v&&(h+=T[n++]<<_,_+=8),E+=h&(1<<v)-1,h>>>=v,_-=v),_<15&&(h+=T[n++]<<_,_+=8,h+=T[n++]<<_,_+=8),m=g[h&y];r:for(;;){if(h>>>=v=m>>>24,_-=v,!(16&(v=m>>>16&255))){if(0==(64&v)){m=g[(65535&m)+(h&(1<<v)-1)];continue r}e.msg="invalid distance code",r.mode=BAD;break e}if(S=65535&m,_<(v&=15)&&(h+=T[n++]<<_,(_+=8)<v&&(h+=T[n++]<<_,_+=8)),(S+=h&(1<<v)-1)>u){e.msg="invalid distance too far back",r.mode=BAD;break e}if(h>>>=v,_-=v,S>(v=i-s)){if((v=S-v)>l&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break e}if(w=0,O=p,0===f){if(w+=c-v,v<E){E-=v;do{$[i++]=p[w++]}while(--v);w=i-S,O=$}}else if(f<v){if(w+=c+f-v,(v-=f)<E){E-=v;do{$[i++]=p[w++]}while(--v);if(w=0,f<E){E-=v=f;do{$[i++]=p[w++]}while(--v);w=i-S,O=$}}}else if(w+=f-v,v<E){E-=v;do{$[i++]=p[w++]}while(--v);w=i-S,O=$}for(;E>2;)$[i++]=O[w++],$[i++]=O[w++],$[i++]=O[w++],E-=3;E&&($[i++]=O[w++],E>1&&($[i++]=O[w++]))}else{w=i-S;do{$[i++]=$[w++],$[i++]=$[w++],$[i++]=$[w++],E-=3}while(E>2);E&&($[i++]=$[w++],E>1&&($[i++]=$[w++]))}break}}break}}while(n<o&&i<a);n-=E=_>>3,h&=(1<<(_-=E<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=i<a?a-i+257:257-(i-a),r.hold=h,r.bits=_},MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],inftrees=function(e,t,r,n,o,i,s,a){var u,c,l,f,p,h,_,d,g,b=a.bits,y=0,m=0,v=0,E=0,S=0,w=0,O=0,T=0,$=0,A=0,I=null,R=0,N=new common$1.Buf16(MAXBITS+1),L=new common$1.Buf16(MAXBITS+1),x=null,P=0;for(y=0;y<=MAXBITS;y++)N[y]=0;for(m=0;m<n;m++)N[t[r+m]]++;for(S=b,E=MAXBITS;E>=1&&0===N[E];E--);if(S>E&&(S=E),0===E)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(v=1;v<E&&0===N[v];v++);for(S<v&&(S=v),T=1,y=1;y<=MAXBITS;y++)if(T<<=1,(T-=N[y])<0)return-1;if(T>0&&(e===CODES||1!==E))return-1;for(L[1]=0,y=1;y<MAXBITS;y++)L[y+1]=L[y]+N[y];for(m=0;m<n;m++)0!==t[r+m]&&(s[L[t[r+m]]++]=m);if(e===CODES?(I=x=s,h=19):e===LENS?(I=lbase,R-=257,x=lext,P-=257,h=256):(I=dbase,x=dext,h=-1),A=0,m=0,y=v,p=i,w=S,O=0,l=-1,f=($=1<<S)-1,e===LENS&&$>ENOUGH_LENS||e===DISTS&&$>ENOUGH_DISTS)return 1;for(;;){_=y-O,s[m]<h?(d=0,g=s[m]):s[m]>h?(d=x[P+s[m]],g=I[R+s[m]]):(d=96,g=0),u=1<<y-O,v=c=1<<w;do{o[p+(A>>O)+(c-=u)]=_<<24|d<<16|g|0}while(0!==c);for(u=1<<y-1;A&u;)u>>=1;if(0!==u?(A&=u-1,A+=u):A=0,m++,0==--N[y]){if(y===E)break;y=t[r+s[m]]}if(y>S&&(A&f)!==l){for(0===O&&(O=S),p+=v,T=1<<(w=y-O);w+O<E&&!((T-=N[w+O])<=0);)w++,T<<=1;if($+=1<<w,e===LENS&&$>ENOUGH_LENS||e===DISTS&&$>ENOUGH_DISTS)return 1;o[l=A&f]=S<<24|w<<16|p-i|0}}return 0!==A&&(o[p+A]=y-O<<24|64<<16|0),a.bits=S,0},CODES$1=0,LENS$1=1,DISTS$1=2,Z_FINISH$2=4,Z_BLOCK$1=5,Z_TREES=6,Z_OK$2=0,Z_STREAM_END$2=1,Z_NEED_DICT=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$2=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME$2=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE$1=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH$2=25,LIT=26,CHECK=27,LENGTH$1=28,DONE=29,BAD$1=30,MEM=31,SYNC=32,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,MAX_WBITS$1=15,DEF_WBITS=MAX_WBITS$1;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new common$1.Buf16(320),this.work=new common$1.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new common$1.Buf32(ENOUGH_LENS$1),t.distcode=t.distdyn=new common$1.Buf32(ENOUGH_DISTS$1),t.sane=1,t.back=-1,Z_OK$2):Z_STREAM_ERROR$1}function inflateReset(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR$1}function inflateReset2(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))):Z_STREAM_ERROR$1}function inflateInit2(e,t){var r,n;return e?(n=new InflateState,e.state=n,n.window=null,(r=inflateReset2(e,t))!==Z_OK$2&&(e.state=null),r):Z_STREAM_ERROR$1}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new common$1.Buf32(512),distfix=new common$1.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS$1,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS$1,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,r,n){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new common$1.Buf8(i.wsize)),n>=i.wsize?(common$1.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>n&&(o=n),common$1.arraySet(i.window,t,r-n,o,i.wnext),(n-=o)?(common$1.arraySet(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function inflate(e,t){var r,n,o,i,s,a,u,c,l,f,p,h,_,d,g,b,y,m,v,E,S,w,O,T,$=0,A=new common$1.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;(r=e.state).mode===TYPE$1&&(r.mode=TYPEDO),s=e.next_out,o=e.output,u=e.avail_out,i=e.next_in,n=e.input,a=e.avail_in,c=r.hold,l=r.bits,f=a,p=u,w=Z_OK$2;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;l<16;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0),c=0,l=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=BAD$1;break}if((15&c)!==Z_DEFLATED$2){e.msg="unknown compression method",r.mode=BAD$1;break}if(l-=4,S=8+(15&(c>>>=4)),0===r.wbits)r.wbits=S;else if(S>r.wbits){e.msg="invalid window size",r.mode=BAD$1;break}r.dmax=1<<S,e.adler=r.check=1,r.mode=512&c?DICTID:TYPE$1,c=0,l=0;break;case FLAGS:for(;l<16;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==Z_DEFLATED$2){e.msg="unknown compression method",r.mode=BAD$1;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=BAD$1;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0)),c=0,l=0,r.mode=TIME;case TIME:for(;l<32;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,r.check=crc32_1(r.check,A,4,0)),c=0,l=0,r.mode=OS;case OS:for(;l<16;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0)),c=0,l=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;l<16;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(A[0]=255&c,A[1]=c>>>8&255,r.check=crc32_1(r.check,A,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((h=r.length)>a&&(h=a),h&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),common$1.arraySet(r.head.extra,n,i,h,S)),512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),a-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=NAME$2;case NAME$2:if(2048&r.flags){if(0===a)break e;h=0;do{S=n[i+h++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&h<a);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),a-=h,i+=h,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===a)break e;h=0;do{S=n[i+h++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&h<a);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),a-=h,i+=h,S)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;l<16;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=BAD$1;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE$1;break;case DICTID:for(;l<32;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}e.adler=r.check=zswap32(c),c=0,l=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=a,r.hold=c,r.bits=l,Z_NEED_DICT;e.adler=r.check=1,r.mode=TYPE$1;case TYPE$1:if(t===Z_BLOCK$1||t===Z_TREES)break e;case TYPEDO:if(r.last){c>>>=7&l,l-=7&l,r.mode=CHECK;break}for(;l<3;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){c>>>=2,l-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD$1}c>>>=2,l-=2;break;case STORED:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD$1;break}if(r.length=65535&c,c=0,l=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(h=r.length){if(h>a&&(h=a),h>u&&(h=u),0===h)break e;common$1.arraySet(o,n,i,h,s),a-=h,i+=h,u-=h,s+=h,r.length-=h;break}r.mode=TYPE$1;break;case TABLE:for(;l<14;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD$1;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;l<3;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}r.lens[I[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},w=inftrees(CODES$1,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,w){e.msg="invalid code lengths set",r.mode=BAD$1;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;b=($=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&$,!((g=$>>>24)<=l);){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(y<16)c>>>=g,l-=g,r.lens[r.have++]=y;else{if(16===y){for(T=g+2;l<T;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(c>>>=g,l-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=BAD$1;break}S=r.lens[r.have-1],h=3+(3&c),c>>>=2,l-=2}else if(17===y){for(T=g+3;l<T;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}l-=g,S=0,h=3+(7&(c>>>=g)),c>>>=3,l-=3}else{for(T=g+7;l<T;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}l-=g,S=0,h=11+(127&(c>>>=g)),c>>>=7,l-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD$1;break}for(;h--;)r.lens[r.have++]=S}}if(r.mode===BAD$1)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=BAD$1;break}if(r.lenbits=9,O={bits:r.lenbits},w=inftrees(LENS$1,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,w){e.msg="invalid literal/lengths set",r.mode=BAD$1;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},w=inftrees(DISTS$1,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,w){e.msg="invalid distances set",r.mode=BAD$1;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(a>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=a,r.hold=c,r.bits=l,inffast(e,p),s=e.next_out,o=e.output,u=e.avail_out,i=e.next_in,n=e.input,a=e.avail_in,c=r.hold,l=r.bits,r.mode===TYPE$1&&(r.back=-1);break}for(r.back=0;b=($=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&$,!((g=$>>>24)<=l);){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(b&&0==(240&b)){for(m=g,v=b,E=y;b=($=r.lencode[E+((c&(1<<m+v)-1)>>m)])>>>16&255,y=65535&$,!(m+(g=$>>>24)<=l);){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=g,l-=g,r.back+=g,r.length=y,0===b){r.mode=LIT;break}if(32&b){r.back=-1,r.mode=TYPE$1;break}if(64&b){e.msg="invalid literal/length code",r.mode=BAD$1;break}r.extra=15&b,r.mode=LENEXT;case LENEXT:if(r.extra){for(T=r.extra;l<T;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;b=($=r.distcode[c&(1<<r.distbits)-1])>>>16&255,y=65535&$,!((g=$>>>24)<=l);){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(0==(240&b)){for(m=g,v=b,E=y;b=($=r.distcode[E+((c&(1<<m+v)-1)>>m)])>>>16&255,y=65535&$,!(m+(g=$>>>24)<=l);){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}c>>>=m,l-=m,r.back+=m}if(c>>>=g,l-=g,r.back+=g,64&b){e.msg="invalid distance code",r.mode=BAD$1;break}r.offset=y,r.extra=15&b,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(T=r.extra;l<T;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD$1;break}r.mode=MATCH$2;case MATCH$2:if(0===u)break e;if(h=p-u,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD$1;break}h>r.wnext?(h-=r.wnext,_=r.wsize-h):_=r.wnext-h,h>r.length&&(h=r.length),d=r.window}else d=o,_=s-r.offset,h=r.length;h>u&&(h=u),u-=h,r.length-=h;do{o[s++]=d[_++]}while(--h);0===r.length&&(r.mode=LEN);break;case LIT:if(0===u)break e;o[s++]=r.length,u--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;l<32;){if(0===a)break e;a--,c|=n[i++]<<l,l+=8}if(p-=u,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=r.flags?crc32_1(r.check,o,p,s-p):adler32_1(r.check,o,p,s-p)),p=u,(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check",r.mode=BAD$1;break}c=0,l=0}r.mode=LENGTH$1;case LENGTH$1:if(r.wrap&&r.flags){for(;l<32;){if(0===a)break e;a--,c+=n[i++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=BAD$1;break}c=0,l=0}r.mode=DONE;case DONE:w=Z_STREAM_END$2;break e;case BAD$1:w=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=a,r.hold=c,r.bits=l,(r.wsize||p!==e.avail_out&&r.mode<BAD$1&&(r.mode<CHECK||t!==Z_FINISH$2))&&updatewindow(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=r.flags?crc32_1(r.check,o,p,e.next_out-p):adler32_1(r.check,o,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE$1?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===f&&0===p||t===Z_FINISH$2)&&w===Z_OK$2&&(w=Z_BUF_ERROR$1),w}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$2}function inflateGetHeader(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$2):Z_STREAM_ERROR$1}function inflateSetDictionary(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR$1:r.mode===DICT&&adler32_1(1,t,n,0)!==r.check?Z_DATA_ERROR$1:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR):(r.havedict=1,Z_OK$2):Z_STREAM_ERROR$1}var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2=inflate,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo},constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString$4=Object.prototype.toString;function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);this.options=common$1.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=inflate_1.inflateInit2(this.strm,t.windowBits);if(r!==constants.Z_OK)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$4.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1.inflateSetDictionary(this.strm,t.dictionary))!==constants.Z_OK))throw new Error(messages[r])}function inflate$1(e,t){var r=new Inflate(t);if(r.push(e,!0),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate.prototype.push=function(e,t){var r,n,o,i,s,a=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?constants.Z_FINISH:constants.Z_NO_FLUSH,"string"==typeof e?a.input=strings.binstring2buf(e):"[object ArrayBuffer]"===toString$4.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new common$1.Buf8(u),a.next_out=0,a.avail_out=u),(r=inflate_1.inflate(a,constants.Z_NO_FLUSH))===constants.Z_NEED_DICT&&c&&(r=inflate_1.inflateSetDictionary(this.strm,c)),r===constants.Z_BUF_ERROR&&!0===l&&(r=constants.Z_OK,l=!1),r!==constants.Z_STREAM_END&&r!==constants.Z_OK)return this.onEnd(r),this.ended=!0,!1;a.next_out&&(0!==a.avail_out&&r!==constants.Z_STREAM_END&&(0!==a.avail_in||n!==constants.Z_FINISH&&n!==constants.Z_SYNC_FLUSH)||("string"===this.options.to?(o=strings.utf8border(a.output,a.next_out),i=a.next_out-o,s=strings.buf2string(a.output,o),a.next_out=i,a.avail_out=u-i,i&&common$1.arraySet(a.output,a.output,o,i,0),this.onData(s)):this.onData(common$1.shrinkBuf(a.output,a.next_out)))),0===a.avail_in&&0===a.avail_out&&(l=!0)}while((a.avail_in>0||0===a.avail_out)&&r!==constants.Z_STREAM_END);return r===constants.Z_STREAM_END&&(n=constants.Z_FINISH),n===constants.Z_FINISH?(r=inflate_1.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===constants.Z_OK):n!==constants.Z_SYNC_FLUSH||(this.onEnd(constants.Z_OK),a.avail_out=0,!0)},Inflate.prototype.onData=function(e){this.chunks.push(e)},Inflate.prototype.onEnd=function(e){e===constants.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1=Inflate,inflate_2$1=inflate$1,inflateRaw_1=inflateRaw,ungzip=inflate$1,inflate_1$1={Inflate:Inflate_1,inflate:inflate_2$1,inflateRaw:inflateRaw_1,ungzip:ungzip},assign=common$1.assign,pako={};assign(pako,deflate_1$1,inflate_1$1,constants);var pako_1=pako,pako_2=pako_1.deflate,pako_3=pako_1.inflate;function _toConsumableArray$5(e){return _arrayWithoutHoles$5(e)||_iterableToArray$5(e)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$5(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$5(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _slicedToArray$2(e,t){return _arrayWithHoles$2(e)||_iterableToArrayLimit$2(e,t)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$2(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}function _arrayWithHoles$2(e){if(Array.isArray(e))return e}var messageOptionBitFields=[["MessageType",8],["BroadcastJumps",2],["ToArchive",1],["FromArchive",1],["CompressionMethod",2]],messageOptionsBitsNumber=messageOptionBitFields.reduce(function(e,t){return e+_slicedToArray$2(t,2)[1]},0),BROADCAST_JUMPS_NUMBER=1,ZIP_COMPRESSION_METHOD=1,MessageType;!function(e){e[e.UserMessageType=0]="UserMessageType",e[e.GroupMessageType=1]="GroupMessageType"}(MessageType||(MessageType={}));for(var getUninitializedMessageOption=function(){return{BroadcastJumps:0,CompressionMethod:0,FromArchive:0,MessageType:0,ToArchive:0}},messageOptionBitLength=getUninitializedMessageOption(),messageOptionOffset=getUninitializedMessageOption(),curOffset=0,i$3=0;i$3<messageOptionBitFields.length;i$3++){var name=messageOptionBitFields[i$3][0],length=messageOptionBitFields[i$3][1];messageOptionBitLength[name]=length,messageOptionOffset[name]=curOffset,curOffset+=length}function setReversedMessageOption(e,t,r){for(var n=messageOptionBitLength[t],o=messageOptionOffset[t],i=_toConsumableArray$5(r.toString(2).padStart(n,"0")).reverse(),s=o,a=0;s<o+n;s++,a++)e[s]=i[a];return e}function getMessageOption(e,t){for(var r=messageOptionBitLength[t],n=messageOptionOffset[t],o=[],i=_toConsumableArray$5(e.toString(2).padStart(messageOptionsBitsNumber,"0")).reverse(),s=n,a=0;s<n+r;s++,a++)o[a]=i[s];return Number.parseInt(o.reverse().join(""),2)}function genMessageOptions(e){var t=e.toPeer,r=e.needJumps,n=e.useCompression,o=new Array(messageOptionsBitsNumber).fill("0");o=setReversedMessageOption(o,"MessageType",t?MessageType.UserMessageType:MessageType.GroupMessageType),r&&(o=setReversedMessageOption(o,"BroadcastJumps",BROADCAST_JUMPS_NUMBER)),n&&(o=setReversedMessageOption(o,"CompressionMethod",ZIP_COMPRESSION_METHOD));var i=Number.parseInt(_toConsumableArray$5(o).reverse().join(""),2);return long_1.fromNumber(i,!0)}function isMessageFromPeer(e){return getMessageOption(e,"MessageType")===MessageType.UserMessageType}function isMessageCompressed(e){return getMessageOption(e,"CompressionMethod")===ZIP_COMPRESSION_METHOD}function _typeof$7(e){return(_typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep$4(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$4(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$4(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$4(i,n,o,s,a,"throw",e)}s(void 0)})}}function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$5(e,t,r){return t&&_defineProperties$5(e.prototype,t),r&&_defineProperties$5(e,r),e}function _possibleConstructorReturn$7(e,t){return!t||"object"!==_typeof$7(t)&&"function"!=typeof t?_assertThisInitialized$7(e):t}function _assertThisInitialized$7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf$7(e){return(_getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$7(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$7(e,t)}function _setPrototypeOf$7(e,t){return(_setPrototypeOf$7=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ChatManager=function(e){function t(e){var r;return _classCallCheck$7(this,t),(r=_possibleConstructorReturn$7(this,_getPrototypeOf$7(t).call(this,e,"ChatManager"))).dialogueLru=new TLRUCache(void 0,{maxlen:LRU_MAX_ITEM,ttl:TLRU_MAX_AGE}),r.intervalEnds=0,r.nActiveInCurrentInterval=0,r}return _inherits$7(t,createEventBase()),_createClass$5(t,[{key:"getChatInfo",value:function(){var e=_asyncToGenerator$4(regenerator.mark(function e(t){var r,n,o,i,s,a;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.dialogueLru.get(t),this.dialogueLru.prune(),!r){e.next=8;break}return n=r.dialogue,o=r.sequence,i=o.add(1),s={dialogue:n,sequence:i},this.dialogueLru.set(t,{dialogue:n,sequence:i}),e.abrupt("return",s);case 8:return e.next=10,genRandomUInt64();case 10:return e.t0=e.sent,e.t1=long_1.fromNumber(1,!0),a={dialogue:e.t0,sequence:e.t1},this.dialogueLru.set(t,a),e.abrupt("return",a);case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"rateLimiter",value:function(e){var t=this;return of(void 0).pipe(concatMap(function(){var r=async.now();if(t.intervalEnds<=r)return t.nActiveInCurrentInterval=1,t.intervalEnds=r+1e3,e;t.nActiveInCurrentInterval+=1,t.nActiveInCurrentInterval>60&&(t.nActiveInCurrentInterval=1,t.intervalEnds+=1e3);var n=t.intervalEnds-1e3-r;return n>0?(t.emit("rateLimitReached"),of(void 0).pipe(delay(n,async),switchMapTo(e))):e}))}}]),t}();function _typeof$8(e){return(_typeof$8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$6(e){return _arrayWithoutHoles$6(e)||_iterableToArray$6(e)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$6(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$6(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function asyncGeneratorStep$5(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$5(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$5(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$5(i,n,o,s,a,"throw",e)}s(void 0)})}}function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$6(e,t,r){return t&&_defineProperties$6(e.prototype,t),r&&_defineProperties$6(e,r),e}function _possibleConstructorReturn$8(e,t){return!t||"object"!==_typeof$8(t)&&"function"!=typeof t?_assertThisInitialized$8(e):t}function _assertThisInitialized$8(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf$8(e){return(_getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$8(e,t)}function _setPrototypeOf$8(e,t){return(_setPrototypeOf$8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SessionError=genError(),Session=function(e){function t(e,r,n){var o;return _classCallCheck$8(this,t),(o=_possibleConstructorReturn$8(this,_getPrototypeOf$8(t).call(this,n,"Session"))).context=e,o.connection=r,o.chatManager=new ChatManager(o.logger),o.joinedChannels=new Set,o.instancePromise=genRandomUInt64(),o.curLoginSockets=[void 0,void 0],o.loginSocketSubs=[[],[]],o.lastLoginSockets=[new ReplaySubject(1),new ReplaySubject(1)],o.seqSentStatuses=[!1,!1],o.seq=long_1.fromNumber(1,!0),o.dialPendingMsgSubjectMaps=[new Map,new Map],o.dialogueSequenceLrus=[new TLRUCache(void 0,{maxlen:LRU_MAX_ITEM}),new TLRUCache(void 0,{maxlen:LRU_MAX_ITEM})],o.msgDedupLru=new LRUCache(void 0,{maxlen:MSG_DEDUP_MAX_LEN}),o.instancePromise.then(function(e){o.log('The instance is "%s"',e.toString())}),o}return _inherits$8(t,createEventBase()),_createClass$6(t,[{key:"loginHandler",value:function(){var e=_asyncToGenerator$5(regenerator.mark(function e(){var t,r,n=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.connection.initConnection(),t=this.seq,(r=this.getSocketLoginObservables(this.connection.lastOpenSockets,t)).forEach(function(e,t){n.loginSocketSubs[t].push(e.pipe(tap(function(e){n.curLoginSockets[t]=e,n.emit("userJoined")})).subscribe(n.lastLoginSockets[t]))}),this.initKeepAlive(),this.initReceiver(),e.abrupt("return",merge.apply(void 0,_toConsumableArray$6(r)).pipe(first(),timeout(CLIENT_LOGIN_TIMEOUT),catchError(function(e){return e instanceof TimeoutError&&n.warn("Login timeout"),throwError(e)})).toPromise());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logoutHandler",value:function(){var e=_asyncToGenerator$5(regenerator.mark(function e(){var t,r,n,o=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getLoginSockets(),r=t.map(function(e){return e.sendPacket("UserQuit",{}),o.onSocketClose(e),o.connection.waitClosing(e)}),n=t.map(function(e){return e.env}),[0,1].filter(function(e){return!n.includes(e)}).forEach(function(e){o.connection.closeSocket(e)}),e.abrupt("return",merge.apply(void 0,_toConsumableArray$6(r)).toPromise());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var e=_asyncToGenerator$5(regenerator.mark(function e(t,r){var n,o,i,s=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=3;break}throw this.error(new SessionError({NOT_LOGGED_IN:"Session is not logged in, cannot do the operation"})),new Error(JoinChannelError.JOIN_CHANNEL_ERR_REJECTED);case 3:return n=fromEvent(this,"channelLeft").pipe(filter(function(e){return e===t}),first()),o=this.incGetSeq(),(i=this.lastLoginSockets.map(function(e){return e.pipe(switchMap(function(e,t){0!==t&&s.incSeqIfNeeded(e.env);var n=0===t?o:s.seq;return e.sendPacket("GroupEnter",{account:r,seq:n}),e.fromSocketReceived("GroupReply").pipe(first(function(e){var t=e.seq;return n.eq(t)}))}),takeUntil(n),share())})).forEach(function(e,t){return s.loginSocketSubs[t].push(e.subscribe({error:function(){}}))}),e.next=9,merge.apply(void 0,_toConsumableArray$6(i)).pipe(first(),timeout(COMMON_REQUEST_TIMEOUT),catchError(function(e){return e instanceof TimeoutError&&s.warn("Channel join timeout"),throwError(e)})).toPromise();case 9:this.joinedChannels.add(t);case 10:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e,t){this.emit("channelLeft",e),this.joinedChannels.delete(e),this.getLoginSockets().forEach(function(e){e.sendPacket("GroupLeave",{account:t})})}},{key:"requestChannelMemberList",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new SessionError({NOT_LOGGED_IN:"Session is not logged in, cannot do the operation"});var r=this.incGetSeq();return t.forEach(function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})}),merge.apply(void 0,_toConsumableArray$6(t.map(function(t){return t.fromSocketReceived("GroupAllUsersResult").pipe(first(function(t){var n=t.group,o=t.seq;return n===e&&r.eq(o)}))})))}},{key:"sendMessage",value:function(){var e=_asyncToGenerator$5(regenerator.mark(function e(t,r,n){var o,i,s,a,u,c,l,f=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isValidId(r)){e.next=2;break}throw new Error("The send message arguments are not valid");case 2:if(!(new Blob([t]).size>MESSAGE_TEXT_MAX_BYTES)){e.next=4;break}throw new Error("The message size is over the 32KB limit");case 4:return o=new Blob([t]).size>=MESSAGE_MIN_COMPRESSION_LEN,e.next=7,this.chatManager.getChatInfo(r);case 7:return i=e.sent,s=i.dialogue,a=i.sequence,e.next=12,this.instancePromise;case 12:return u=e.sent,this.log('A %s message is sending: "'.concat(u,"-").concat(s,"#").concat(a,'"'),n?"peer":"channel"),this.log("The message info: %o",{text:t,useCompression:o}),c=function(e){return new RtmMessage({MiscMap:{},sequence:a,dialogue:s,instance:u,dst:r,ms:long_1.fromNumber(Date.now(),!0),options:genMessageOptions({toPeer:n,useCompression:o,needJumps:e}),payload:o?pako_2(t):(new TextEncoder).encode(t),src:f.context.getUid()})},e.next=18,from(this.sendMessageToRetry(c,n)).pipe(timeout(MESSAGE_SEND_TIMEOUT),catchError(function(e){return e instanceof TimeoutError&&f.warn("Send message timeout"),throwError(e)})).toPromise();case 18:return l=e.sent,e.abrupt("return",{hasPeerReceived:0===l});case 20:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendMessageToRetry",value:function(){var e=_asyncToGenerator$5(regenerator.mark(function e(t,r){var n,o,i,s,a,u,c,l,f,p=arguments;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>2&&void 0!==p[2]?p[2]:0,this.log("Attemp to send the message".concat(r?" with retrying, %o":"without retrying"),{attemps:n}),0!==(o=this.getLoginSockets()).length){e.next=5;break}throw new Error("no logged-in sockets");case 5:return i=t(n>0),o.forEach(function(e){e.sendPacket("RtmMessage",i)}),s=i.dialogue,a=i.sequence,u=i.instance,c=o.map(function(e){return e.fromSocketReceived("Ack").pipe(filter(function(e){return s.eq(e.dialogue)&&a.eq(e.sequence)&&u.eq(e.instance)}))}),e.prev=9,e.next=12,iif(function(){return 3===n||!r},merge.apply(void 0,_toConsumableArray$6(c)),merge.apply(void 0,_toConsumableArray$6(c)).pipe(timeout(PEER_MESSAGE_RETRY_TIMEOUTS[n]))).pipe(first()).toPromise();case 12:return l=e.sent,f=l.code,this.log("The message has been acked, %o",{code:f}),e.abrupt("return",f);case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof TimeoutError)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!0,n+1));case 22:throw e.t0;case 23:case"end":return e.stop()}},e,this,[[9,18]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"onSocketClose",value:function(e){this.loginSocketSubs[e.env].reverse().forEach(function(e){return e.unsubscribe()})}},{key:"initKeepAlive",value:function(){var e=this;this.lastLoginSockets.map(function(t){return t.pipe(switchMap(function(t){return timer(0,KEEPALIVE_INTERVAL).pipe(tap(function(){e.incSeqIfNeeded(t.env),t.sendPacket("Ping",{ms:long_1.fromNumber(Date.now(),!0),seq:e.seq})}))}))}).forEach(function(t,r){e.loginSocketSubs[r].push(t.subscribe({error:function(){}}))})}},{key:"initReceiver",value:function(){var e=this;this.lastLoginSockets.map(function(t){return t.pipe(tap(function(t){t.on("reconnect",function(){var r=[0,1].filter(function(e){return e!==t.env})[0],n=e.connection.curOpenSockets[r];n&&!0===n.isReconnecting&&e.emit("connectionLost")}),t.on("UserDrop",function(r){var n=r.code;e.emit("userDrop",n),e.onSocketClose(t),e.connection.waitClosing(t)}),t.on("RtmMessage",function(e){var r=e.dialogue,n=e.instance,o=e.sequence;isMessageFromPeer(e.options)&&t.sendPacket("Ack",{code:0,dialogue:r,instance:n,sequence:o})}),t.on("GroupEnterNotice",function(t){var r=t.group,n=t.instance,o=t.seq,i=t.user;e.log("Received GroupEnterNotice, %o",{group:r,instance:n,seq:o,user:i}),e.emit("memberNotice",r,{seq:o,instance:n,memberId:i,type:"MemberJoined"})}),t.on("GroupLeaveNotice",function(t){var r=t.group,n=t.instance,o=t.seq,i=t.user;e.emit("memberNotice",r,{seq:o,instance:n,memberId:i,type:"MemberLeft"})}),t.on("RtmMessage",function(r){var n=r.dialogue,o=r.sequence,i=r.instance,s=n.toString(),a=e.dialPendingMsgSubjectMaps[t.env].get(s);if(a)a.next(r);else{var u=e.dialogueSequenceLrus[t.env].get(s),c=!u&&o.eq(1),l=u&&o.sub(u).eq(1);if(c||l)e.onMessage(r,t.env);else{if(c){if(u&&o.lte(u))return void e.warn('Abandoned message, the sequence is less or equal the last: "'.concat(i,"-").concat(n,"#").concat(o,'"'));e.log('Pending message, the sequence is not continuous with the last: "'.concat(i,"-").concat(n,"#").concat(o,'"'))}else e.log('Pending message, the first sequence is not equal to 1: "'.concat(i,"-").concat(n,"#").concat(o,'"'));var f=new Subject;e.dialPendingMsgSubjectMaps[t.env].set(s,f);var p=f.pipe(scan(function(e,t){return[].concat(_toConsumableArray$6(e),[t])},[]),map(function(e){return e.sort(function(e,t){var r=e.sequence,n=t.sequence;return r.eq(n)?0:r.gt(n)?1:-1})}),shareReplay(1));p.pipe(takeUntil(timer(ONLINE_MESSAGE_DEDUP_DELAY)),first(function(e){if(e.length<2)return!1;for(var t=1;t<=e.length;t++){if(!e[t-1].sequence.eq(t))return!1}return!0}),finalize(function(){e.dialPendingMsgSubjectMaps[t.env].delete(s)})).subscribe(function(r){return r.forEach(function(r){return e.onMessage(r,t.env)})},function(r){r instanceof EmptyError&&p.pipe(first()).subscribe(function(r){return r.forEach(function(r){return e.onMessage(r,t.env)})})}),f.next(r)}}})}))}).forEach(function(t,r){e.loginSocketSubs[r].push(t.subscribe({error:function(){}}))})}},{key:"requestSocketLogin",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.seq,o=defer$1(_asyncToGenerator$5(regenerator.mark(function o(){return regenerator.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=e,o.t1=r.context.getUid(),o.next=4,r.instancePromise;case 4:o.t2=o.sent,o.t3=t?long_1.fromNumber(1,!0):long_1.fromNumber(0,!0),o.t4=n,o.t5=e.ticket,o.t6={account:o.t1,instance:o.t2,opt:o.t3,seq:o.t4,ticket:o.t5},o.t0.sendPacket.call(o.t0,"UserJoin",o.t6);case 10:case"end":return o.stop()}},o)}))),i=e.fromSocketReceived("UserResp").pipe(first(function(e){return n.eq(e.seq)}),switchMap(function(t){return 0!==t.code&&(e.close(),r.error(new SessionError({LOGIN_SERVER_REJECTED:"Connected to gateway success but the Rtm server rejected login"})),throwError(new Error(LoginError.LOGIN_ERR_REJECTED))),r.log("ENV_%d logged in",e.env),of(e)}),timeout(LOGIN_RESP_TIMEOUT),catchError(function(e){return e instanceof TimeoutError&&r.warn("Login response timeout"),throwError(e)}));return o.pipe(switchMap(function(){return i}))}},{key:"getSocketLoginObservables",value:function(e,t){var r=this;return e.map(function(e){return e.pipe(switchMap(function(e,n){return r.incSeqIfNeeded(e.env),r.requestSocketLogin(e,0!==n,0===n?t:void 0)}),share())})}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new CommonError({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){return compact_1(this.curLoginSockets)}},{key:"onMessage",value:function(e,t){var r=e.options,n=e.payload,o=e.src,i=e.dst,s=e.instance,a=e.dialogue,u=e.sequence;this.dialogueSequenceLrus[t].set(a.toString(),u);var c="".concat(s,"-").concat(a,"#").concat(u);if(!this.msgDedupLru.has(c)){this.msgDedupLru.set(c,void 0);var l=isMessageCompressed(r),f=l?pako_3(n,{to:"string"}):new TextDecoder("utf-8").decode(n);if(isMessageFromPeer(r)){var p={text:f,peerId:o};this.info("Received a message from peer, %o",{src:o,id:c}),this.log("The message detail: %o",{text:f,useCompression:l}),this.emit("peerMessage",p)}else this.info("Received a channel message, %s",{channelId:i,memberId:o,id:c}),this.emit("channelMessage",i,{memberId:o,text:f})}}}]),t}(),_class,_temp;function _typeof$9(e){return(_typeof$9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray$7(e){return _arrayWithoutHoles$7(e)||_iterableToArray$7(e)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray$7(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles$7(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function asyncGeneratorStep$6(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$6(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$6(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$6(i,n,o,s,a,"throw",e)}s(void 0)})}}function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$7(e,t,r){return t&&_defineProperties$7(e.prototype,t),r&&_defineProperties$7(e,r),e}function _possibleConstructorReturn$9(e,t){return!t||"object"!==_typeof$9(t)&&"function"!=typeof t?_assertThisInitialized$9(e):t}function _assertThisInitialized$9(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf$9(e){return(_getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$9(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$9(e,t)}function _setPrototypeOf$9(e,t){return(_setPrototypeOf$9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var ChannelError=genError(),Channel=(_temp=function(e){function t(e,r,n){var o;return _classCallCheck$9(this,t),(o=_possibleConstructorReturn$9(this,_getPrototypeOf$9(t).call(this,n,"RtmChannel",!0))).channelId=e,o.session=r,o.memberJoinedSeqLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEM}),o.memberLeftSeqLru=new LRUCache(void 0,{maxlen:LRU_MAX_ITEM}),o.info('A channel created, id "%s"',e),o}return _inherits$9(t,createEventBase()),_createClass$7(t,[{key:"getId",value:function(){return this.channelId}},{key:"join",value:function(){var e=_asyncToGenerator$6(regenerator.mark(function e(){var t=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log('Joining the channel "%s"',this.channelId),!this.hasOtherChannelJoined()){e.next=4;break}throw this.error(new ChannelError({CHANNEL_REJOIN_THE_SAME_ID:"A channel with the same channel ID has joined, cannot rejoin"})),new Error(JoinChannelError.JOIN_CHANNEL_ERR_REJECTED);case 4:if(!this.session.joinedChannels.has(this)){e.next=7;break}throw this.error(new ChannelError({CHANNEL_ALREADY_JOINED:"The channel has joined, cannot rejoin"})),new Error(JoinChannelError.JOIN_CHANNEL_ERR_REJECTED);case 7:if(20!==this.session.joinedChannels.size){e.next=10;break}throw this.error(new ChannelError({CHANNEL_JOIN_OVER_LIMIT:"The joined channels has exceeded the limit of 20"})),new Error(JoinChannelError.JOIN_CHANNEL_ERR_REJECTED);case 10:return e.next=12,this.session.requestChannelJoin(this,this.channelId);case 12:this.info('The channel "%s" joined successfully',this.channelId),this.session.on("channelMessage",function(e,r){var n=r.memberId,o=r.text;e===t.channelId&&(t.log("A ChannelMessage event emits - message: %o, %o",{text:o},{memberId:n}),t.emit("ChannelMessage",{text:o},n))}),this.session.on("memberNotice",function(){var e=_asyncToGenerator$6(regenerator.mark(function e(r,n){var o,i,s,a,u,c,l;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.instance,i=n.memberId,s=n.seq,a=n.type,r===t.channelId&&i!==t.session.context.getUid()){e.next=3;break}return e.abrupt("return");case 3:if(u=o.toString(),"MemberJoined"!==a){e.next=8;break}c=t.memberJoinedSeqLru,e.next=13;break;case 8:if("MemberLeft"!==a){e.next=12;break}c=t.memberLeftSeqLru,e.next=13;break;case 12:throw assertNever("memberNotice",a);case 13:l=c.get(u),t.log('A %s received, de-duplicating ins:"%s" with last seq '.concat(l),a,u),l&&!s.greaterThan(l)||(c.set(o.toString(),s),t.log('A %s event emits - memberId: "%s"',a,i),t.emit(a,i));case 16:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=_asyncToGenerator$6(regenerator.mark(function e(){return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.session.joinedChannels.has(this)){e.next=3;break}throw this.error(new ChannelError({CHANNEL_NOT_JOINED:"The channel does not join, cannot do the operation"})),new Error(LeaveChannelError.LEAVE_CHANNEL_ERR_REJECTED);case 3:this.session.requestChannelLeave(this,this.channelId),this.memberLeftSeqLru.empty(),this.memberJoinedSeqLru.empty();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=_asyncToGenerator$6(regenerator.mark(function e(t){var r;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.text,this.session.joinedChannels.has(this)){e.next=4;break}throw this.error(new ChannelError({CHANNEL_NOT_JOINED:"The channel does not join, cannot do the operation"})),new Error(ChannelMessageError.CHANNEL_MESSAGE_ERR_FAILURE);case 4:return e.prev=4,e.next=7,this.session.sendMessage(r,this.channelId,!1);case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(4),!(e.t0 instanceof TimeoutError)){e.next=13;break}throw new Error(ChannelMessageError.CHANNEL_MESSAGE_ERR_TIMEOUT);case 13:throw this.error(e.t0),new Error(ChannelMessageError.CHANNEL_MESSAGE_ERR_FAILURE);case 15:case"end":return e.stop()}},e,this,[[4,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=_asyncToGenerator$6(regenerator.mark(function e(){var t;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.session.joinedChannels.has(this)){e.next=3;break}throw this.error(new ChannelError({CHANNEL_NOT_JOINED:"The channel does not join, cannot do the operation"})),new Error(GetMembersError.GET_MEMBERS_ERR_REJECTED);case 3:e.prev=3,t=this.session.requestChannelMemberList(this.channelId),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(3),this.error(e.t0),new Error(GetMembersError.GET_MEMBERS_ERR_REJECTED);case 11:return e.prev=11,e.next=14,t.pipe(map(function(e){return e.users.map(function(e){return e.account})})).toPromise();case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t1=e.catch(11),this.error(e.t1),new Error(GetMembersError.GET_MEMBERS_ERR_FAILURE);case 21:case"end":return e.stop()}},e,this,[[3,7],[11,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var e=this;return!this.session.joinedChannels.has(this)&&_toConsumableArray$7(this.session.joinedChannels).some(function(t){return t.channelId===e.channelId})}}]),t}(),_class=_temp,_applyDecoratedDescriptor(_class.prototype,"getId",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"getId"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"join",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"join"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"leave",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"leave"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"sendMessage",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"sendMessage"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"getMembers",[logged],Object.getOwnPropertyDescriptor(_class.prototype,"getMembers"),_class.prototype),_class),_class$1,_temp$1;function _typeof$a(e){return(_typeof$a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep$7(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator$7(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep$7(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep$7(i,n,o,s,a,"throw",e)}s(void 0)})}}function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$8(e,t,r){return t&&_defineProperties$8(e.prototype,t),r&&_defineProperties$8(e,r),e}function _possibleConstructorReturn$a(e,t){return!t||"object"!==_typeof$a(t)&&"function"!=typeof t?_assertThisInitialized$a(e):t}function _assertThisInitialized$a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf$a(e){return(_getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$a(e,t)}function _setPrototypeOf$a(e,t){return(_setPrototypeOf$a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _applyDecoratedDescriptor$1(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Client=(_temp$1=function(e){function t(e,r){var n;return _classCallCheck$a(this,t),(n=_possibleConstructorReturn$a(this,_getPrototypeOf$a(t).call(this,r,"RtmClient",!0))).context=void 0,n.session=void 0,n.connectionState="DISCONNECTED",n.lastLoginTime=void 0,n.context=new Context(e,r),n.on("ConnectionStateChange",function(e,t){n.connectionState=e,"BANNED_BY_SERVER"===t||"INTERRUPTED"===t||"LOGIN_FAILURE"===t||"LOGIN_TIMEOUT"===t||"REMOTE_LOGIN"===t?n.warn('The client ConnectionState changed: "%s", reason: "%s"',e,t):n.info('The client ConnectionState changed: "%s", reason: "%s"',e,t)}),n}return _inherits$a(t,createEventBase()),_createClass$8(t,[{key:"login",value:function(){var e=_asyncToGenerator$7(regenerator.mark(function e(t){var r,n,o=this;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.uid,n=t.token,!(void 0!==this.lastLoginTime&&Date.now()-this.lastLoginTime<LOGIN_MIN_INTERVAL)){e.next=3;break}throw new Error(LoginError.LOGIN_ERR_TOO_OFTEN);case 3:if(this.lastLoginTime=Date.now(),"ABORTED"!==this.connectionState){e.next=6;break}throw new Error(LoginError.LOGIN_ERR_REJECTED);case 6:if("DISCONNECTED"===this.connectionState){e.next=8;break}throw new Error(LoginError.LOGIN_ERR_ALREADY_LOGIN);case 8:e.prev=8,"string"==typeof n&&0!==n.length&&this.context.setToken(n),this.context.setUid(r),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(8),new TypeError(LoginError.LOGIN_ERR_INVALID_ARGUMENT);case 16:return this.emit("ConnectionStateChange","CONNECTING","LOGIN"),this.session=new Session(this.context,new Connection(this.context,this.logger),this.logger),this.session.on("userDrop",this.userDropHandler.bind(this)),this.session.on("connectionLost",function(){"CONNECTED"===o.connectionState&&(o.emit("ConnectionStateChange","RECONNECTING","INTERRUPTED"),o.session.once("userJoined",function(){o.emit("ConnectionStateChange","CONNECTED","LOGIN")}))}),this.session.on("peerMessage",function(e){var t=e.peerId,r=e.text;o.emit("MessageFromPeer",{text:r},t)}),e.prev=21,e.next=24,this.session.loginHandler();case 24:this.log('Login success for account "%s"',r),e.next=39;break;case 27:if(e.prev=27,e.t1=e.catch(21),!(e.t1 instanceof TimeoutError)){e.next=32;break}throw this.emit("ConnectionStateChange","DISCONNECTED","LOGIN_TIMEOUT"),new Error(LoginError.LOGIN_ERR_TIMEOUT);case 32:if(this.emit("ConnectionStateChange","DISCONNECTED","LOGIN_FAILURE"),!(e.t1 instanceof Error)){e.next=38;break}if(!Object.keys(LoginError).includes(e.t1.message)){e.next=36;break}throw e.t1;case 36:if(!(e.t1 instanceof AccessPointError)){e.next=38;break}throw new Error(LoginError.LOGIN_ERR_REJECTED);case 38:throw new Error(LoginError.LOGIN_ERR_UNKNOWN);case 39:this.emit("ConnectionStateChange","CONNECTED","LOGIN_SUCCESS");case 40:case"end":return e.stop()}},e,this,[[8,13],[21,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=_asyncToGenerator$7(regenerator.mark(function e(){return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.session&&"DISCONNECTED"!==this.connectionState){e.next=2;break}throw new Error(LogoutError.LOGOUT_ERR_REJECTED);case 2:if("ABORTED"!==this.connectionState){e.next=5;break}return this.emit("ConnectionStateChange","DISCONNECTED","LOGOUT"),e.abrupt("return");case 5:return e.prev=5,e.next=8,this.session.logoutHandler();case 8:this.log("Log out success");case 9:return e.prev=9,this.emit("ConnectionStateChange","DISCONNECTED","LOGOUT"),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[5,,9,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"sendMessageToPeer",value:function(){var e=_asyncToGenerator$7(regenerator.mark(function e(t,r){var n;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.text,"CONNECTED"===this.connectionState){e.next=3;break}throw new Error(PeerMessageError.PEER_MESSAGE_ERR_FAILURE);case 3:return e.prev=3,e.next=6,this.session.sendMessage(n,r,!0);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof TimeoutError)){e.next=13;break}throw new Error(PeerMessageError.PEER_MESSAGE_ERR_TIMEOUT);case 13:throw this.error(e.t0),new Error(PeerMessageError.PEER_MESSAGE_ERR_FAILURE);case 15:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){if(!isValidId(e))throw new Error(CreateChannelError.CREATE_CHANNEL_ERR_INVALID_ARGUMENT);return new Channel(e,this.session,this.logger)}},{key:"userDropHandler",value:function(e){if("ABORTED"!==this.connectionState)switch(e){case 11:return this.error("Kicked off by remote session"),void this.emit("ConnectionStateChange","ABORTED","REMOTE_LOGIN");case 14:case 15:case 16:return this.error("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),void this.emit("ConnectionStateChange","ABORTED","BANNED_BY_SERVER");default:this.error("User kicked off for unknown code: ".concat(e)),this.emit("ConnectionStateChange","ABORTED","INTERRUPTED")}}}]),t}(),_class$1=_temp$1,_applyDecoratedDescriptor$1(_class$1.prototype,"login",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"login"),_class$1.prototype),_applyDecoratedDescriptor$1(_class$1.prototype,"logout",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"logout"),_class$1.prototype),_applyDecoratedDescriptor$1(_class$1.prototype,"sendMessageToPeer",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"sendMessageToPeer"),_class$1.prototype),_applyDecoratedDescriptor$1(_class$1.prototype,"createChannel",[logged],Object.getOwnPropertyDescriptor(_class$1.prototype,"createChannel"),_class$1.prototype),_class$1),version="0.9.0-beta.0",BUILD="v0.9.0-alpha.1-66-g66fd615",processId=cuid_1();function createInstance(e,t){if(!isValidAppId(e))throw new Error(CreateInstanceError.CREATE_INSTANCE_ERR_REJECTED);var r=initLoggerId(),n=genInfoLogger(),o=genWarnLogger(),i=genErrorLogger(),s=trackLoggerGenerator(r),a=debugLoggerGenerator(r),u=a("RTM:LOG","<Entry> ");return n("The Agora RTM Web SDK version is %s",version),u("Creating an RtmClient instance"),u('The Git commit ID is "'.concat(BUILD,'"')),u('The App ID is "%s"',e),u('The process ID is "%s"',processId),u('process.env.NODE_ENV is "%s"',"production"),new Client(e,{genLogger:a,genTracker:s,info:n,warn:o,error:i,loggerId:r})}exports.BUILD=BUILD,exports.VERSION=version,exports.createInstance=createInstance,Object.defineProperty(exports,"__esModule",{value:!0})});